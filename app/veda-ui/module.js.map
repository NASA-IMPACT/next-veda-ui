{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-a5a26d8b3c5f9e1b.js","node_modules/@parcel/runtime-js/lib/runtime-87317f34a378b820.js","node_modules/@parcel/runtime-js/lib/runtime-72fc2351d01fa5fd.js","node_modules/@parcel/runtime-js/lib/runtime-00bd72da7da27be2.js","node_modules/@parcel/runtime-js/lib/runtime-d67f1f5d1cfd9c06.js","node_modules/@parcel/runtime-js/lib/runtime-9df2ff50ae638119.js","node_modules/@parcel/runtime-js/lib/runtime-18baf8b90411013d.js","node_modules/@parcel/runtime-js/lib/runtime-88f5a2e5600fabe7.js","node_modules/@parcel/runtime-js/lib/runtime-abbd462c50262ec9.js","node_modules/@parcel/runtime-js/lib/runtime-1bcf21be8806a6fa.js","node_modules/@parcel/runtime-js/lib/runtime-fc90ef20d033af21.js","node_modules/@parcel/runtime-js/lib/runtime-91a4d05862778425.js","node_modules/@parcel/runtime-js/lib/runtime-6a3992dffde92297.js","node_modules/@parcel/runtime-js/lib/runtime-6b5ac5fe382556a3.js","node_modules/@parcel/runtime-js/lib/runtime-9c6bbbfd4307c367.js","node_modules/@parcel/runtime-js/lib/runtime-4963f874a32e5d16.js","node_modules/@parcel/runtime-js/lib/runtime-5afe700e8d916eff.js","node_modules/@parcel/runtime-js/lib/runtime-d1658f9c3eddae74.js","node_modules/@parcel/runtime-js/lib/runtime-635b053b7de71062.js","node_modules/@parcel/runtime-js/lib/runtime-cd3bfdd478305182.js","node_modules/@parcel/runtime-js/lib/runtime-502efa007238352c.js","node_modules/@parcel/runtime-js/lib/runtime-aaed4113ac1cc3f6.js","node_modules/@parcel/runtime-js/lib/runtime-b8e2e0bcb8840562.js","node_modules/@parcel/runtime-js/lib/runtime-3ed8a9c5d57af33d.js","node_modules/@parcel/runtime-js/lib/runtime-5f10bd4e095bc57c.js","app/scripts/components/common/mdx-content.js","app/scripts/utils/veda-data.ts","parcel-resolver-veda/veda.out.js","app/scripts/utils/status.ts","app/scripts/components/common/loading-skeleton.tsx","app/scripts/styles/variable-utils.ts","app/scripts/components/common/blocks/index.tsx","app/scripts/components/common/figure.js","app/scripts/components/common/blocks/block-constant.js","app/scripts/components/common/blocks/figure.js","app/scripts/styles/content-block.js","app/scripts/styles/variable-components.ts","app/scripts/styles/hug/index.ts","app/scripts/utils/hinted-error.tsx","app/scripts/components/common/blocks/images/index.js","app/scripts/components/common/blocks/scrollytelling/chapter.tsx","app/scripts/utils/date.ts","app/scripts/utils/utils.ts","app/scripts/components/common/mapbox/map-options/utils.ts","app/scripts/components/common/blocks/lazy-components.js","app/scripts/components/common/chart/block.tsx","app/scripts/components/common/chart/utils.ts","app/scripts/utils/format.ts","app/scripts/components/common/chart/constant.js","app/scripts/components/common/chart/index.tsx","app/scripts/components/common/chart/tooltip.tsx","app/scripts/components/common/chart/alt-title.tsx","app/scripts/components/common/chart/legend.tsx","app/scripts/components/common/chart/analysis/brush.tsx","app/scripts/components/common/chart/analysis/useBrush.ts","app/scripts/utils/use-resize-observer.ts","app/scripts/utils/use-media-query.ts","app/scripts/utils/use-scrollbar-width-css.ts","app/scripts/utils/use-async-error.ts","app/scripts/components/common/table/index.tsx","app/scripts/utils/use-load-file.ts","app/scripts/components/common/blocks/images/compare.js","app/scripts/components/common/blocks/block-map.tsx","app/scripts/components/common/mapbox/index.tsx","app/scripts/components/common/mapbox/layers/utils.ts","app/scripts/components/common/mapbox/layers/raster-timeseries.tsx","app/scripts/components/common/mapbox/layers/styles.tsx","app/scripts/components/common/mapbox/layers/custom-marker.ts","node_modules/@parcel/runtime-js/lib/runtime-4f1340955149303d.js","app/scripts/components/common/mapbox/layers/vector-timeseries.tsx","app/scripts/components/common/mapbox/layers/zarr-timeseries.tsx","app/scripts/components/common/map/style-generators/hooks.ts","app/scripts/components/common/map/utils.ts","app/scripts/components/common/mapbox/layers/cmr-timeseries.tsx","app/scripts/components/common/mapbox/map.tsx","app/scripts/components/common/mapbox/mapbox-style-override.js","app/scripts/components/common/mapbox/aoi/mb-draw-popover.tsx","app/scripts/components/common/mapbox/mb-popover/index.tsx","app/scripts/components/common/mapbox/mb-popover/popover-inner.tsx","app/scripts/components/common/mapbox/mb-popover/styled.ts","app/scripts/components/common/aoi/utils.ts","app/scripts/components/common/mapbox/aoi/mb-aoi-draw.js","app/scripts/components/common/mapbox/aoi/style.ts","app/scripts/components/common/mapbox/map-options/index.tsx","app/scripts/components/common/mapbox/map-options/projection-items.tsx","app/scripts/components/common/stressed-form-group-input.tsx","app/scripts/components/common/stressed-field.ts","app/scripts/utils/use-safe-state.ts","app/scripts/styles/fieldset.js","app/scripts/components/common/mapbox/map-options/basemaps.ts","app/scripts/components/common/mapbox/use-mapbox-control.tsx","app/scripts/components/common/mapbox/map-coords.tsx","app/scripts/components/common/copy-field.ts","app/scripts/components/common/mapbox/map-message.tsx","app/scripts/components/common/mapbox/layer-legend.tsx","app/scripts/components/common/tip.ts","app/scripts/styles/panel.tsx","app/scripts/components/common/mapbox/map-options/use-basemap.ts","app/scripts/components/common/mapbox/layers/basemap.tsx","app/scripts/components/common/mapbox/utils.ts","app/scripts/context/layer-data.tsx","app/scripts/components/common/blocks/embed.tsx","app/scripts/styles/browser-frame.tsx","app/scripts/components/common/blocks/scrollytelling/index.tsx","app/scripts/components/common/layout-root.tsx","app/scripts/components/common/meta-tags.js","app/scripts/components/common/page-footer.js","app/scripts/components/common/page-overrides.tsx","app/scripts/components/common/smart-link.tsx","app/scripts/utils/url.ts","app/scripts/utils/use-google-tag-manager.ts","app/scripts/utils/use-sliding-sticky-header.ts","app/scripts/utils/use-effect-previous.ts","app/scripts/components/common/nav-wrapper.js","app/scripts/components/common/page-header.tsx","app/scripts/components/common/dropdown-scrollable.tsx","app/scripts/components/common/nasa-logo.js","app/scripts/components/common/google-form.tsx","app/scripts/styles/menu-link.js","app/scripts/components/common/unscrollable-body.ts","app/scripts/utils/routes.ts","app/scripts/components/common/notebook-connect.tsx","app/scripts/index.ts","app/scripts/components/data-catalog/index.tsx","app/scripts/components/data-catalog/dataset-menu.tsx","app/scripts/styles/drop-menu-item-button.tsx","app/scripts/components/data-catalog/filters-control.tsx","app/scripts/components/common/search-field.tsx","app/scripts/components/common/form/checkable-filter/index.tsx","app/scripts/components/common/card/styles.tsx","app/scripts/components/common/browse-controls/use-browse-controls.ts","app/scripts/components/data-catalog/filter-tag.tsx","app/scripts/components/data-catalog/prepare-datasets.ts","app/scripts/components/common/fold.tsx","app/scripts/styles/constrainer.ts","app/scripts/components/common/card/index.tsx","app/scripts/components/common/card/horizontal-info-card.tsx","app/scripts/styles/pill.tsx","app/scripts/components/common/element-interactive.js","app/scripts/components/common/empty-hub.tsx","app/scripts/components/common/text-highlight.tsx","app/scripts/components/common/card-sources.tsx","app/scripts/components/common/dataset-classification.tsx","app/scripts/components/common/icons/progress-tick.tsx","app/scripts/components/common/icons/flask.tsx","app/scripts/components/common/icons/medal.tsx","app/scripts/components/exploration/data-utils.ts","app/scripts/components/exploration/types.d.ts.ts","app/scripts/components/exploration/components/datasets/analysis-metrics.tsx","app/scripts/data-layer/datasets.tsx"],"sourcesContent":["module.exports = (__parcel__import__(\"./\" + \"about.3981b582.js\")).then(() => parcelRequire('262j5'));","module.exports = (__parcel__import__(\"./\" + \"sandbox-override.63d9bb83.js\")).then(() => parcelRequire('4K0b6'));","module.exports = (__parcel__import__(\"./\" + \"disclaimer.4b88cc06.js\")).then(() => parcelRequire('fBlqp'));","module.exports = (__parcel__import__(\"./\" + \"custom.a670266c.js\")).then(() => parcelRequire('65eVQ'));","module.exports = (__parcel__import__(\"./\" + \"aparam.27adf3ba.js\")).then(() => parcelRequire('gOZb4'));","module.exports = new __parcel__URL__(\"gpmimergdaily.f7cbf0b3.png\").toString();","module.exports = (__parcel__import__(\"./\" + \"GPM_3IMERGDF.data.530e2a4e.js\")).then(() => parcelRequire('gDpdH'));","module.exports = new __parcel__URL__(\"trmm.88120269.png\").toString();","module.exports = (__parcel__import__(\"./\" + \"TRMM_3B42_Daily.data.184ea235.js\")).then(() => parcelRequire('ghOJ2'));","module.exports = new __parcel__URL__(\"east_coast_mar_20.c916ac9e.jpg\").toString();","module.exports = (__parcel__import__(\"./\" + \"data-from-ghg.data.0037b4a8.js\")).then(() => parcelRequire('i4SoD'));","module.exports = new __parcel__URL__(\"no2--dataset-cover.80478047.jpg\").toString();","module.exports = (__parcel__import__(\"./\" + \"fire.data.3436385b.js\")).then(() => parcelRequire('kPpTF'));","module.exports = new __parcel__URL__(\"nighttime-lights--dataset-cover.1cd08e26.jpg\").toString();","module.exports = (__parcel__import__(\"./\" + \"nighttime-lights.data.34e29c97.js\")).then(() => parcelRequire('cyXyS'));","module.exports = new __parcel__URL__(\"img-placeholder-3.4c5b2358.jpg\").toString();","module.exports = (__parcel__import__(\"./\" + \"no2.data.b1582e46.js\")).then(() => parcelRequire('grUmx'));","module.exports = new __parcel__URL__(\"img-placeholder-4.728679b2.jpg\").toString();","module.exports = (__parcel__import__(\"./\" + \"sandbox.data.d54def4d.js\")).then(() => parcelRequire('b3i3L'));","module.exports = new __parcel__URL__(\"air-quality-and-covid-19--story-cover.0e88beec.jpg\").toString();","module.exports = (__parcel__import__(\"./\" + \"air-quality-and-covid-19.stories.e5355462.js\")).then(() => parcelRequire('5BEBQ'));","module.exports = new __parcel__URL__(\"img-placeholder-6.88847e66.jpg\").toString();","module.exports = (__parcel__import__(\"./\" + \"external-link-example.stories.e9f753e8.js\")).then(() => parcelRequire('c5Ko5'));","module.exports = (__parcel__import__(\"./\" + \"internal-link-example.stories.98ca11fe.js\")).then(() => parcelRequire('cZJgW'));","module.exports = (__parcel__import__(\"./\" + \"life-of-water.stories.43a61ea9.js\")).then(() => parcelRequire('7FVXN'));","import React from 'react';\nimport T from 'prop-types';\nimport { MDXProvider } from '@mdx-js/react';\n\nimport { useMdxPageLoader } from '$utils/veda-data';\nimport { S_LOADING, S_SUCCEEDED } from '$utils/status';\nimport { ContentLoading } from '$components/common/loading-skeleton';\nimport Block from '$components/common/blocks';\nimport ContentBlockFigure from '$components/common/blocks/figure';\nimport { ContentBlockProse } from '$styles/content-block';\nimport Image, { Caption } from '$components/common/blocks/images';\nimport { Chapter } from '$components/common/blocks/scrollytelling/chapter';\nimport {\n  LazyChart,\n  LazyCompareImage,\n  LazyScrollyTelling,\n  LazyMap,\n  LazyTable,\n  LazyEmbed\n} from '$components/common/blocks/lazy-components';\nimport { NotebookConnectCalloutBlock } from '$components/common/notebook-connect';\nimport SmartLink, { CustomLink } from '$components/common/smart-link';\n\nfunction MdxContent(props) {\n  const pageMdx = useMdxPageLoader(props.loader);\n\n  if (pageMdx.status === S_LOADING) {\n    return <ContentLoading />;\n  }\n\n  if (pageMdx.status === S_SUCCEEDED) {\n    return (\n      <MDXProvider\n        components={{\n          Block,\n          Prose: ContentBlockProse,\n          Figure: ContentBlockFigure,\n          Caption,\n          Chapter,\n          Image,\n          Map: LazyMap,\n          ScrollytellingBlock: LazyScrollyTelling,\n          Chart: LazyChart,\n          CompareImage: LazyCompareImage,\n          NotebookConnectCallout: NotebookConnectCalloutBlock,\n          Link: SmartLink,\n          a: CustomLink,\n          Table: LazyTable,\n          Embed: LazyEmbed\n        }}\n      >\n        <pageMdx.MdxContent {...(props.throughProps || {})} />\n      </MDXProvider>\n    );\n  }\n\n  return null;\n}\n\nMdxContent.propTypes = {\n  loader: T.func,\n  throughProps: T.object\n};\n\nexport default MdxContent;\n","import { useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\nimport { uniqBy } from 'lodash';\nimport {\n  stories,\n  datasets,\n  DatasetData,\n  StoryData,\n  Taxonomy,\n  TaxonomyItem\n} from 'veda';\n\nimport { MDXContent, MDXModule } from 'mdx/types';\nimport { S_IDLE, S_LOADING, S_SUCCEEDED } from './status';\nimport { DatasetDataWithEnhancedLayers } from '$components/exploration/data-utils';\n\n/**\n * List with the meta information of all datasets.\n */\nexport const allDatasetsProps = Object.values(datasets).map((d) => d!.data);\n\n/**\n * List with the meta information of all stories.\n */\nexport const allStoriesProps = Object.values(stories).map(\n  (d) => d!.data\n);\n\n/**\n * Returns the meta data for a story taking into account the url parameters.\n * If the story does not exist, null is returned.\n * @returns Object\n */\nexport function useStory() {\n  const { storyId } = useParams();\n\n  const story = stories[storyId ?? ''];\n\n  // Stop if the story doesn't exist.\n  return story ?? null;\n}\n\n/**\n * Returns the meta data for a dataset taking into account the url parameters.\n * If the dataset does not exist, null is returned.\n * @returns Object\n */\nexport function useDataset() {\n  const { datasetId } = useParams();\n\n  const dataset = datasets[datasetId ?? ''];\n\n  // Stop if the datasets doesn't exist.\n  return dataset ?? null;\n}\n\ntype MdxPageLoadResult =\n  | {\n      status: typeof S_IDLE | typeof S_LOADING;\n      MdxContent: null;\n    }\n  | {\n      status: typeof S_SUCCEEDED;\n      MdxContent: MDXContent;\n    };\n\n/**\n * Loads the MDX page returning an object with loading status and the component.\n *\n * @param {function} loader Async function to load the mdx page\n * @returns Object\n */\nexport function useMdxPageLoader(loader?: () => Promise<MDXModule>) {\n  const [pageMdx, setPageMdx] = useState<MdxPageLoadResult>({\n    status: S_IDLE,\n    MdxContent: null\n  });\n\n  useEffect(() => {\n    if (!loader) return;\n\n    const load = async () => {\n      setPageMdx({\n        status: S_LOADING,\n        MdxContent: null\n      });\n\n      const content = await loader();\n      setPageMdx({\n        status: S_SUCCEEDED,\n        MdxContent: content.default\n      });\n    };\n\n    load();\n  }, [loader]);\n\n  return pageMdx;\n}\n\nexport function generateTaxonomies(data: DatasetDataWithEnhancedLayers[] | DatasetData[]): Taxonomy[] {\n  const concat = (arr, v) => (arr || []).concat(v);\n\n  const taxonomyData = {};\n  // for loops are faster than reduces.\n  for (const { taxonomy } of data) {\n    for (const { name, values } of taxonomy) {\n      if (!name || !values?.length) continue;\n      taxonomyData[name] = concat(taxonomyData[name], values);\n    }\n  }\n\n  const taxonomiesUnique = Object.entries(taxonomyData).map(([key, tx]): Taxonomy => ({\n    name: key,\n    // eslint-disable-next-line fp/no-mutating-methods\n    values: uniqBy(tx as TaxonomyItem[], (t) => t.id).sort((a, b) => a.name.localeCompare(b.name)) as TaxonomyItem[]\n  }));\n  return taxonomiesUnique;\n}\n\n\n// Taxonomies with special meaning as they're used in the app, like in the cards\n// for example.\nexport const TAXONOMY_TOPICS = 'Topics';\nexport const TAXONOMY_SOURCE = 'Source';\nexport const TAXONOMY_GRADE = 'Grade';\nexport const TAXONOMY_UNCERTAINTY = 'Uncertainty';\n\nexport function getTaxonomy(\n  data: DatasetData | StoryData | Taxonomy[],\n  taxonomyName: string\n) {\n  const list = Array.isArray(data) ? data : data.taxonomy;\n\n  return list.find((t) => t.name === taxonomyName);\n}\n\nexport function getAllTaxonomyValues(\n  data: DatasetData | StoryData | Taxonomy[]\n) {\n  const list = Array.isArray(data) ? data : data.taxonomy;\n  const allValues = list.map((l) => l.values).flat();\n  return allValues;\n}\n\nexport function getTaxonomyByIds(group: string, ids: string | string[], taxonomies: Taxonomy[]) {\n  const groupValues = taxonomies.find((t) => t.name == group)?.values;\n  \n  let taxonomyItems: any[] = [];\n\n  if (ids instanceof Array) {\n    const items = ids.map((id) => groupValues?.filter((value) => value.id == id)[0]);\n    taxonomyItems = items.map((item) => ({...item, ...{taxonomy: group}}));\n  } else {\n    const taxonomy = groupValues?.filter((value) => value.id == ids)[0];\n    /* eslint-disable-next-line fp/no-mutating-methods */\n    if(taxonomy) taxonomyItems.push({...taxonomy, ...{taxonomy: group}});\n  }\n  return taxonomyItems;\n}\n","const config = {\n        pageOverrides: {\n    'aboutContent': {\n        data: {\"title\":\"About the Dashboard\",\"description\":\"Visualization, Exploration, and Data Analysis (VEDA): Scalable and Interactive System for Science Data.\"},\n        content: () => import('../mock/about.mdx')\n      },\n'sandbox-override': {\n        data: {},\n        content: () => import('../mock/sandbox-override.mdx')\n      },\n'/disclaimer': {\n        data: {\"menu\":\"Disclaimer\",\"title\":\"This is the disclaimer\"},\n        content: () => import('../mock/custom-pages/disclaimer.mdx')\n      },\n'/custom-page': {\n        data: {\"menu\":\"Custom\",\"title\":\"A custom page\",\"description\":\"This is the description of a custom page. And it is optional!\"},\n        content: () => import('../mock/custom-pages/custom.mdx')\n      },\n'/aparam/:id': {\n        data: {\"title\":\"This is a param!\",\"description\":\"why so sullen...\"},\n        content: () => import('../mock/custom-pages/aparam.mdx')\n      }\n  },\n        strings: {\"stories\":{\"one\":\"Story\",\"other\":\"Stories\"},\"storiesBanner\":{\"one\":\"Explore the guided narratives below to discover how NASA satellites and other Earth observing resources reveal a changing planet.\",\"other\":\"Explore the guided narratives below to discover how NASA satellites and other Earth observing resources reveal a changing planet.\"},\"dataCatalogBanner\":{\"one\":\"This dashboard explores key indicators to track and compare changes over time.\",\"other\":\"This dashboard explores key indicators to track and compare changes over time.\"}},\n        booleans: {\"stories\":{\"one\":\"Story\",\"other\":\"Stories\"},\"storiesBanner\":{\"one\":\"Explore the guided narratives below to discover how NASA satellites and other Earth observing resources reveal a changing planet.\",\"other\":\"Explore the guided narratives below to discover how NASA satellites and other Earth observing resources reveal a changing planet.\"},\"dataCatalogBanner\":{\"one\":\"This dashboard explores key indicators to track and compare changes over time.\",\"other\":\"This dashboard explores key indicators to track and compare changes over time.\"}}\n      };\n\n      export const theme = null;\n\n      export const storyTaxonomies = [{\"name\":\"Topics\",\"values\":[{\"id\":\"agriculture\",\"name\":\"Agriculture\"},{\"id\":\"air-quality\",\"name\":\"Air Quality\"},{\"id\":\"covid-19\",\"name\":\"Covid 19\"}]},{\"name\":\"Source\",\"values\":[{\"id\":\"development-seed\",\"name\":\"Development Seed\"}]}]\n\n      export const getOverride = (key) => config.pageOverrides[key];\n\n      export const userPages = Object.keys(config.pageOverrides)\n        .filter((k) => k.startsWith('/'));\n\n      export const getString = (variable) => config.strings[variable];\n      export const getBoolean = (variable) => config.booleans[variable];\n\n      export const datasets = {\n    'GPM_3IMERGDF.v07': {\n        data: {\"id\":\"GPM_3IMERGDF.v07\",\"name\":\"GPM IMERG Daily Precipitation\",\"description\":\"GPM IMERG Final Precipitation L3 1 day 0.1 degree x 0.1 degree\",\"media\":{\"src\":require('../mock/datasets/gpmimergdaily.png'),\"alt\":\"CMIP6 Near-Surface Air Temperature Screenshot\",\"author\":{\"name\":\"NASA\",\"url\":null}},\"taxonomy\":[{\"name\":\"Topics\",\"values\":[{\"id\":\"climate\",\"name\":\"Climate\"}]}],\"layers\":[{\"id\":\"GPM_3IMERGDF.v07\",\"type\":\"cmr\",\"stacApiEndpoint\":\"https://cmr.earthdata.nasa.gov/cloudstac/GES_DISC\",\"tileApiEndpoint\":\"https://prod-titiler-xarray.delta-backend.com/tilejson.json\",\"stacCol\":\"GPM_3IMERGDF.v07\",\"assetUrlReplacements\":{\"from\":\"https://data.gesdisc.earthdata.nasa.gov/data\",\"to\":\"s3://gesdisc-cumulus-prod-protected\"},\"name\":\"GPM IMERG Final Precipitation L3 1 day 0.1 degree x 0.1 degree\",\"description\":\"GPM Level 3 IMERG Final Daily 10 x 10 km (GPM_3IMERGDF) accumulated precipitation\",\"time_density\":\"day\",\"zoomExtent\":[0,20],\"sourceParams\":{\"resampling_method\":\"bilinear\",\"variable\":\"precipitation\",\"colormap_name\":\"gnbu\",\"rescale\":\"0,46\",\"maxzoom\":12},\"legend\":{\"unit\":{\"label\":null},\"type\":\"gradient\",\"min\":\"0 mm/hr\",\"max\":\"46 mm/hr\",\"stops\":[\"#f7fcf0\",\"#e6f5e1\",\"#d7efd1\",\"#c5e8c2\",\"#abdeb6\",\"#8bd2bf\",\"#6bc3c9\",\"#4bafd1\",\"#3193c2\",\"#1878b4\",\"#085da0\",\"#084081\"]}}]},\n        content: () => import('../mock/datasets/GPM_3IMERGDF.data.mdx')\n      },\n'TRMM_3B42_Daily': {\n        data: {\"id\":\"TRMM_3B42_Daily\",\"name\":\"Daily accumulated precipitation from the TRMM Multi-Satellite\",\"description\":\"Daily accumulated precipitation product generated from the research-quality 3-hourly TRMM Multi-Satellite Precipitation Analysis TMPA (3B42)\",\"media\":{\"src\":require('../mock/datasets/trmm.png'),\"alt\":\"CMIP6 Near-Surface Air Temperature Screenshot\",\"author\":{\"name\":\"NASA\",\"url\":null}},\"taxonomy\":[{\"name\":\"Topics\",\"values\":[{\"id\":\"climate\",\"name\":\"Climate\"}]}],\"layers\":[{\"id\":\"TRMM_3B42_Daily.v7\",\"stacApiEndpoint\":\"https://cmr.earthdata.nasa.gov/cloudstac/GES_DISC\",\"tileApiEndpoint\":\"https://prod-titiler-xarray.delta-backend.com/tilejson.json\",\"stacCol\":\"TRMM_3B42_Daily.v7\",\"name\":\"TRMM_3B42_Daily\",\"type\":\"cmr\",\"time_density\":\"day\",\"assetUrlReplacements\":{\"from\":\"https://data.gesdisc.earthdata.nasa.gov/data\",\"to\":\"s3://gesdisc-cumulus-prod-protected\"},\"description\":\"Daily accumulated precipitation product generated from the research-quality 3-hourly TRMM Multi-Satellite Precipitation Analysis TMPA (3B42)\",\"zoomExtent\":[0,20],\"sourceParams\":{\"resampling_method\":\"bilinear\",\"variable\":\"precipitation\",\"colormap_name\":\"gnbu\",\"rescale\":\"0,46\",\"maxzoom\":12},\"analysis\":{\"exclude\":true},\"legend\":{\"unit\":{\"label\":null},\"type\":\"gradient\",\"min\":\"0 mm/hr\",\"max\":\"46 mm/hr\",\"stops\":[\"#f7fcf0\",\"#e6f5e1\",\"#d7efd1\",\"#c5e8c2\",\"#abdeb6\",\"#8bd2bf\",\"#6bc3c9\",\"#4bafd1\",\"#3193c2\",\"#1878b4\",\"#085da0\",\"#084081\"]}}]},\n        content: () => import('../mock/datasets/TRMM_3B42_Daily.data.mdx')\n      },\n'casagfed-carbonflux-monthgrid-v3': {\n        data: {\"id\":\"casagfed-carbonflux-monthgrid-v3\",\"name\":\"CASA-GFED3 Land Carbon Flux\",\"description\":\"Global, monthly 0.5 degree resolution carbon fluxes from Net Primary Production (NPP), heterotrophic respiration (Rh), wildfire emissions (FIRE), and fuel wood burning emissions (FUEL) derived from the CASA-GFED model, version 3\",\"usage\":[{\"url\":\"https://us-ghg-center.github.io/ghgc-docs/cog_transformation/casagfed-carbonflux-monthgrid-v3.html\",\"label\":\"Notebook showing data transformation to COG for ingest to the US GHG Center\",\"title\":\"Data Transformation Notebook\"},{\"url\":\"https://us-ghg-center.github.io/ghgc-docs/user_data_notebooks/casagfed-carbonflux-monthgrid-v3_User_Notebook.html\",\"label\":\"Notebook to read, visualize, and explore data statistics\",\"title\":\"Sample Data Notebook\"},{\"url\":\"https://hub.ghg.center/hub/user-redirect/git-pull?repo=https%3A%2F%2Fgithub.com%2FUS-GHG-Center%2Fghgc-docs&urlpath=tree%2Fghgc-docs%2Fuser_data_notebooks%2Fcasagfed-carbonflux-monthgrid-v3_User_Notebook.ipynb&branch=main\",\"label\":\"Run example notebook\",\"title\":\"Interactive Session in the US GHG Center JupyterHub (requires account)\"},{\"url\":\"https://dljsq618eotzp.cloudfront.net/browseui/index.html#casagfed-carbonflux-monthgrid-v3/\",\"label\":\"Browse and download the data\",\"title\":\"Data Browser\"}],\"media\":{\"src\":require('../mock/datasets/east_coast_mar_20.jpg'),\"alt\":\"wildfire\",\"author\":{\"name\":\"Marcus Kauffman\"}},\"taxonomy\":[{\"name\":\"Topics\",\"values\":[{\"id\":\"natural-emissions-and-sinks\",\"name\":\"Natural Emissions and Sinks\"}]},{\"name\":\"Source\",\"values\":[{\"id\":\"nasa\",\"name\":\"NASA\"}]},{\"name\":\"Gas\",\"values\":[{\"id\":\"co₂\",\"name\":\"CO₂\"}]},{\"name\":\"Product Type\",\"values\":[{\"id\":\"model-output\",\"name\":\"Model Output\"}]}],\"infoDescription\":\"<ul><li>Temporal Extent: January 2000 - December 2021</li><li>Temporal Resolution: Monthly</li><li>Spatial Extent: Global</li><li>Spatial Resolution: 1 km x 1 km</li><li>Data Units: Tons of carbon per 1 km x 1 km cell (monthly total)</li><li>Data Type: Research</li><li>Data Latency: Updated annually, following the release of an updated [BP Statistical Review of World Energy report]</li></ul>\",\"layers\":[{\"id\":\"casa-gfed-co2-flux\",\"stacApiEndpoint\":\"https://ghg.center/api/stac\",\"tileApiEndpoint\":\"https://ghg.center/api/raster\",\"stacCol\":\"casagfed-carbonflux-monthgrid-v3\",\"name\":\"Net Primary Production (NPP)\",\"type\":\"raster\",\"description\":\"Model-estimated net primary production (NPP), which is the amount of carbon available from plants\",\"initialDatetime\":\"newest\",\"projection\":{\"id\":\"equirectangular\"},\"basemapId\":\"light\",\"zoomExtent\":[0,20],\"sourceParams\":{\"assets\":\"npp\",\"colormap_name\":\"purd\",\"rescale\":[0,0.3]},\"compare\":{\"datasetId\":\"nighttime-lights\",\"layerId\":\"nightlights-hd-monthly\",\"mapLabel\":({ dateFns, datetime, compareDatetime }) => {\nif (dateFns && datetime && compareDatetime) return `${dateFns.format(datetime, 'LLL yyyy')} VS ${dateFns.format(compareDatetime, 'LLL yyyy')}`;\n}\n},\"legend\":{\"unit\":{\"label\":\"kg Carbon/m²/mon\"},\"type\":\"gradient\",\"min\":0,\"max\":0.3,\"stops\":[\"#F7F4F9\",\"#E9E3F0\",\"#D9C3DF\",\"#CDA0CD\",\"#D57ABA\",\"#E34A9F\",\"#DF2179\",\"#C10E51\",\"#92003F\",\"#67001F\"]},\"info\":{\"source\":\"NASA\",\"spatialExtent\":\"Global\",\"temporalResolution\":\"Monthly\",\"unit\":\"10¹⁵ molecules cm⁻²\"}},{\"id\":\"casa-gfed-co2-flux-hr\",\"stacApiEndpoint\":\"https://ghg.center/api/stac\",\"tileApiEndpoint\":\"https://ghg.center/api/raster\",\"stacCol\":\"casagfed-carbonflux-monthgrid-v3\",\"name\":\"Heterotrophic Respiration (Rh)\",\"type\":\"raster\",\"description\":\"Model-estimated heterotrophic respiration (Rh), which is the flux of carbon from the soil to the atmosphere\",\"initialDatetime\":\"newest\",\"projection\":{\"id\":\"equirectangular\"},\"basemapId\":\"light\",\"zoomExtent\":[0,20],\"sourceParams\":{\"assets\":\"rh\",\"colormap_name\":\"purd\",\"rescale\":[0,0.3]},\"compare\":{\"datasetId\":\"casagfed-carbonflux-monthgrid-v3\",\"layerId\":\"casa-gfed-co2-flux-hr\",\"mapLabel\":({ dateFns, datetime, compareDatetime }) => {\nif (dateFns && datetime && compareDatetime) return `${dateFns.format(datetime, 'LLL yyyy')} VS ${dateFns.format(compareDatetime, 'LLL yyyy')}`;\n}\n},\"legend\":{\"unit\":{\"label\":\"kg Carbon/m²/mon\"},\"type\":\"gradient\",\"min\":0,\"max\":0.3,\"stops\":[\"#F7F4F9\",\"#E9E3F0\",\"#D9C3DF\",\"#CDA0CD\",\"#D57ABA\",\"#E34A9F\",\"#DF2179\",\"#C10E51\",\"#92003F\",\"#67001F\"]}},{\"id\":\"casa-gfed-co2-flux-nee\",\"stacApiEndpoint\":\"https://ghg.center/api/stac\",\"tileApiEndpoint\":\"https://ghg.center/api/raster\",\"stacCol\":\"casagfed-carbonflux-monthgrid-v3\",\"name\":\"Net Ecosystem Exchange (NEE)\",\"type\":\"raster\",\"description\":\"Model-estimated net ecosystem exchange (NEE), which is the net carbon flux to the atmosphere\",\"initialDatetime\":\"newest\",\"projection\":{\"id\":\"equirectangular\"},\"basemapId\":\"light\",\"zoomExtent\":[0,20],\"sourceParams\":{\"assets\":\"nee\",\"colormap_name\":\"coolwarm\",\"rescale\":[-0.1,0.1]},\"compare\":{\"datasetId\":\"casagfed-carbonflux-monthgrid-v3\",\"layerId\":\"casa-gfed-co2-flux-nee\",\"mapLabel\":({ dateFns, datetime, compareDatetime }) => {\nif (dateFns && datetime && compareDatetime) return `${dateFns.format(datetime, 'LLL yyyy')} VS ${dateFns.format(compareDatetime, 'LLL yyyy')}`;\n}\n},\"legend\":{\"unit\":{\"label\":\"kg Carbon/m²/mon\"},\"type\":\"gradient\",\"min\":-0.1,\"max\":0.1,\"stops\":[\"#3B4CC0\",\"#6788EE\",\"#9ABBFF\",\"#C9D7F0\",\"#EDD1C2\",\"#F7A889\",\"#E26952\",\"#B40426\"]}},{\"id\":\"casa-gfed-co2-flux-fe\",\"stacApiEndpoint\":\"https://ghg.center/api/stac\",\"tileApiEndpoint\":\"https://ghg.center/api/raster\",\"stacCol\":\"casagfed-carbonflux-monthgrid-v3\",\"name\":\"Fire Emissions (FIRE)\",\"type\":\"raster\",\"description\":\"Model-estimated flux of carbon to the atmosphere from wildfires\",\"initialDatetime\":\"newest\",\"projection\":{\"id\":\"equirectangular\"},\"basemapId\":\"light\",\"zoomExtent\":[0,20],\"sourceParams\":{\"assets\":\"fire\",\"colormap_name\":\"purd\",\"rescale\":[0,0.3]},\"compare\":{\"datasetId\":\"casagfed-carbonflux-monthgrid-v3\",\"layerId\":\"casa-gfed-co2-flux-fe\",\"mapLabel\":({ dateFns, datetime, compareDatetime }) => {\nif (dateFns && datetime && compareDatetime) return `${dateFns.format(datetime, 'LLL yyyy')} VS ${dateFns.format(compareDatetime, 'LLL yyyy')}`;\n}\n},\"legend\":{\"unit\":{\"label\":\"kg Carbon/m²/mon\"},\"type\":\"gradient\",\"min\":0,\"max\":0.3,\"stops\":[\"#F7F4F9\",\"#E9E3F0\",\"#D9C3DF\",\"#CDA0CD\",\"#D57ABA\",\"#E34A9F\",\"#DF2179\",\"#C10E51\",\"#92003F\",\"#67001F\"]}},{\"id\":\"casa-gfed-co2-flux-fuel\",\"stacApiEndpoint\":\"https://ghg.center/api/stac\",\"tileApiEndpoint\":\"https://ghg.center/api/raster\",\"stacCol\":\"casagfed-carbonflux-monthgrid-v3\",\"name\":\"Wood Fuel Emissions (FUEL)\",\"type\":\"raster\",\"description\":\"Model-estimated flux of carbon to the atmosphere from wood burned for fuel\",\"initialDatetime\":\"newest\",\"projection\":{\"id\":\"equirectangular\"},\"basemapId\":\"light\",\"zoomExtent\":[0,20],\"sourceParams\":{\"assets\":\"fuel\",\"colormap_name\":\"bupu\",\"rescale\":[0,0.03]},\"compare\":{\"datasetId\":\"casagfed-carbonflux-monthgrid-v3\",\"layerId\":\"casa-gfed-co2-flux-fuel\",\"mapLabel\":({ dateFns, datetime, compareDatetime }) => {\nif (dateFns && datetime && compareDatetime) return `${dateFns.format(datetime, 'LLL yyyy')} VS ${dateFns.format(compareDatetime, 'LLL yyyy')}`;\n}\n},\"legend\":{\"unit\":{\"label\":\"kg Carbon/m²/mon\"},\"type\":\"gradient\",\"min\":0,\"max\":0.03,\"stops\":[\"#F7FCFD\",\"#DCE9F2\",\"#B5CCE3\",\"#96ACD2\",\"#8C7DBA\",\"#894DA3\",\"#821580\",\"#4D004B\"]}}]},\n        content: () => import('../mock/datasets/data-from-ghg.data.mdx')\n      },\n'fire': {\n        data: {\"id\":\"fire\",\"name\":\"EIS Fire\",\"description\":\"EIS Fire.\",\"media\":{\"src\":require('../mock/datasets/no2--dataset-cover.jpg'),\"alt\":\"Power plant shooting steam at the sky.\",\"author\":{\"name\":\"Mick Truyts\",\"url\":\"https://unsplash.com/photos/x6WQeNYJC1w\"}},\"taxonomy\":[{\"name\":\"Topics\",\"values\":[{\"id\":\"covid-19\",\"name\":\"Covid 19\"}]},{\"name\":\"Sector\",\"values\":[{\"id\":\"agriculture-forestry-and-land-use\",\"name\":\"Agriculture, Forestry and Land Use\"},{\"id\":\"energy\",\"name\":\"Energy\"}]},{\"name\":\"Producer\",\"values\":[{\"id\":\"nist\",\"name\":\"NIST\"}]},{\"name\":\"Gas Emission\",\"values\":[{\"id\":\"c-ox\",\"name\":\"COx\"}]}],\"layers\":[{\"id\":\"eis_fire_perimeter\",\"stacCol\":\"eis_fire_perimeter\",\"name\":\"Fire\",\"type\":\"vector\",\"description\":\"eis_fire_perimeter\",\"zoomExtent\":[5,20]}]},\n        content: () => import('../mock/datasets/fire.data.mdx')\n      },\n'nighttime-lights': {\n        data: {\"featured\":true,\"id\":\"nighttime-lights\",\"name\":\"Nighttime Lights\",\"description\":\"During the COVID-19 pandemic, researchers are using night light observations to track variations in energy use, migration, and transportation in response to social distancing and lockdown measures.\",\"media\":{\"src\":require('../mock/datasets/nighttime-lights--dataset-cover.jpg'),\"alt\":\"Satellite image of Earth at night.\",\"author\":{\"name\":\"NASA Earth Observatory\",\"url\":\"https://earthobservatory.nasa.gov/images/90008/night-light-maps-open-up-new-applications\"}},\"taxonomy\":[{\"name\":\"Topics\",\"values\":[{\"id\":\"covid-19\",\"name\":\"Covid 19\"},{\"id\":\"agriculture\",\"name\":\"Agriculture\"}]},{\"name\":\"Sector\",\"values\":[{\"id\":\"electricity\",\"name\":\"Electricity\"}]},{\"name\":\"Producer\",\"values\":[{\"id\":\"nasa\",\"name\":\"NASA\"}]},{\"name\":\"Gas Emission\",\"values\":[{\"id\":\"dos\",\"name\":\"DOS\"}]}],\"layers\":[{\"id\":\"nightlights-hd-monthly\",\"stacCol\":\"nightlights-hd-monthly\",\"name\":\"Nightlights Monthly\",\"type\":\"raster\",\"description\":\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc sodales semper risus, suscipit varius diam facilisis non.\",\"zoomExtent\":[4,16],\"sourceParams\":{\"bidx\":1,\"colormap_name\":\"inferno\",\"rescale\":[0,255]},\"legend\":{\"type\":\"gradient\",\"min\":\"Less\",\"max\":\"More\",\"stops\":[\"#08041d\",\"#1f0a46\",\"#52076c\",\"#f57c16\",\"#f7cf39\"]}}]},\n        content: () => import('../mock/datasets/nighttime-lights.data.mdx')\n      },\n'no2': {\n        data: {\"id\":\"no2\",\"name\":\"Nitrogen Dioxide\",\"featured\":true,\"sourceExclusive\":\"Mock\",\"description\":\"Since the outbreak of the novel coronavirus, atmospheric concentrations of nitrogen dioxide have changed by as much as 60% in some regions.\",\"usage\":[{\"url\":\"https://nasa-impact.github.io/veda-documentation/timeseries-stac-api.html\",\"label\":\"Static notebook\",\"title\":\"Time series using STAC API statistics endpoints\"},{\"url\":\"https://daskhub.veda.smce.nasa.gov/hub/user-redirect/git-pull?repo=https%3A%2F%2Fgithub.com%2Fnasa-impact%2Fveda-documentation&urlpath=lab%2Ftree%2Fveda-documentation%2Ftimeseries-stac-api.ipynb&branch=main\",\"label\":\"SMCE DaskHub\",\"title\":\"Time series using STAC API statistics endpoints\"},{\"url\":\"https://github.com/NASA-IMPACT/veda-docs\",\"label\":\"All the docs for the site\",\"title\":\"Documentaion repo\"},{\"url\":\"https://d36s2ep3ahcq5b.cloudfront.net/browseui/index.html#ch4_inverse_flux\",\"label\":\"Data Browser\",\"title\":\"Download data\"}],\"media\":{\"src\":require('../mock/datasets/no2--dataset-cover.jpg'),\"alt\":\"Power plant shooting steam at the sky.\",\"author\":{\"name\":\"Mick Truyts\",\"url\":\"https://unsplash.com/photos/x6WQeNYJC1w\"}},\"taxonomy\":[{\"name\":\"Grade\",\"values\":[{\"id\":\"research\",\"name\":\"Research\"}]},{\"name\":\"Uncertainty\",\"values\":[{\"id\":\"low\",\"name\":\"Low\"}]},{\"name\":\"Topics\",\"values\":[{\"id\":\"covid-19\",\"name\":\"Covid 19\"},{\"id\":\"agriculture\",\"name\":\"Agriculture\"},{\"id\":\"air-quality\",\"name\":\"Air Quality\"}]},{\"name\":\"Sector\",\"values\":[{\"id\":\"electricity\",\"name\":\"Electricity\"}]},{\"name\":\"Producer\",\"values\":[{\"id\":\"nasa\",\"name\":\"NASA\"}]},{\"name\":\"Gas Emission\",\"values\":[{\"id\":\"dos\",\"name\":\"DOS\"}]},{\"name\":\"Source\",\"values\":[{\"id\":\"mock\",\"name\":\"Mock\"}]}],\"infoDescription\":\"<ul><li>Temporal Extent: January 2000 - December 2021</li><li>Temporal Resolution: Monthly</li><li>Spatial Extent: Global</li><li>Spatial Resolution: 1 km x 1 km</li><li>Data Units: Tons of carbon per 1 km x 1 km cell (monthly total)</li><li>Data Type: Research</li><li>Data Latency: Updated annually, following the release of an updated <a href=\\\"https://www.bp.com/en/global/corporate/energy-economics.html\\\">BP Statistical Review of World Energy report</a></li></ul>\",\"layers\":[{\"id\":\"no2-monthly\",\"stacCol\":\"no2-monthly\",\"name\":\"No2 PT\",\"media\":{\"src\":require('../mock/datasets/img-placeholder-3.jpg'),\"alt\":\"Placeholder Image\"},\"type\":\"raster\",\"projection\":{\"id\":\"polarNorth\"},\"bounds\":[-10,36,-5,42],\"description\":\"Levels in 10¹⁵ molecules cm⁻². Darker colors indicate higher nitrogen dioxide (NO₂) levels associated and more activity. Lighter colors indicate lower levels of NO₂ and less activity.\",\"zoomExtent\":[0,20],\"sourceParams\":{\"resampling_method\":\"bilinear\",\"bidx\":1,\"color_formula\":\"gamma r 1.05\",\"colormap_name\":\"coolwarm\",\"rescale\":[0,15000000000000000]},\"compare\":{\"datasetId\":\"nighttime-lights\",\"layerId\":\"nightlights-hd-monthly\",\"mapLabel\":({ dateFns, datetime, compareDatetime }) => {\nreturn `${dateFns.format(datetime, 'LLL yyyy')} VS ${dateFns.format(compareDatetime, 'LLL yyyy')}`;\n}\n},\"legend\":{\"unit\":{\"label\":\"Molecules cm3\"},\"type\":\"gradient\",\"min\":\"Less\",\"max\":\"More\",\"stops\":[\"#99c5e0\",\"#f9eaa9\",\"#f7765d\",\"#c13b72\",\"#461070\",\"#050308\"]},\"analysis\":{\"metrics\":[\"min\",\"max\",\"non-existent\"]},\"info\":{\"source\":\"NASA\",\"spatialExtent\":\"Global\",\"temporalResolution\":\"Monthly\",\"unit\":\"10¹⁵ molecules cm⁻²\"}},{\"id\":\"no2-monthly-2\",\"stacCol\":\"no2-monthly\",\"name\":\"No2 US\",\"bounds\":[-124,29,-65,49],\"type\":\"raster\",\"description\":\"Levels in 10¹⁵ molecules cm⁻². Darker colors indicate higher nitrogen dioxide (NO₂) levels associated and more activity. Lighter colors indicate lower levels of NO₂ and less activity.\",\"basemapId\":\"dark\",\"zoomExtent\":[0,20],\"sourceParams\":{\"resampling_method\":\"bilinear\",\"bidx\":1,\"color_formula\":\"gamma r 1.05\",\"colormap_name\":\"coolwarm\",\"rescale\":[0,15000000000000000]},\"legend\":{\"unit\":{\"label\":\"Molecules cm3\"},\"type\":\"gradient\",\"min\":\"Less\",\"max\":\"More\",\"stops\":[\"#99c5e0\",\"#f9eaa9\",\"#f7765d\",\"#c13b72\",\"#461070\",\"#050308\"]},\"analysis\":{\"exclude\":true}},{\"id\":\"no2-monthly-diff\",\"stacCol\":\"no2-monthly-diff\",\"name\":\"No2 (Diff) - let's make this title reaaaaaaly long\",\"type\":\"raster\",\"description\":\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc sodales semper risus, suscipit varius diam facilisis non.\",\"zoomExtent\":[0,20],\"sourceParams\":{\"resampling_method\":\"bilinear\",\"bidx\":1,\"colormap_name\":\"rdbu_r\",\"rescale\":[-8000000000000000,8000000000000000]},\"compare\":{\"datasetId\":\"no2\",\"layerId\":\"no2-monthly-diff\",\"mapLabel\":({ dateFns, datetime, compareDatetime }) => {\nreturn `${dateFns.format(datetime, 'LLL yyyy')} VS ${dateFns.format(compareDatetime, 'LLL yyyy')}`;\n}\n},\"legend\":{\"unit\":{\"label\":\"molecules/cm3\"},\"type\":\"gradient\",\"min\":\"-3934857984753\",\"max\":\"3348573489573\",\"stops\":[\"#3A88BD\",\"#C9E0ED\",\"#E4EEF3\",\"#FDDCC9\",\"#DD7059\"]}}]},\n        content: () => import('../mock/datasets/no2.data.mdx')\n      },\n'sandbox': {\n        data: {\"featured\":false,\"id\":\"sandbox\",\"name\":\"Sandbox\",\"description\":\"Travel restrictions and lockdown measures have disrupted the shipping industry and the global economy broadly. NASA researchers are using artificial intelligence to track shipping activities across major ports in the U.S.\",\"media\":{\"src\":require('../mock/datasets/img-placeholder-4.jpg'),\"alt\":\"Generic placeholder by Unsplash\",\"author\":{\"name\":\"Unsplash\",\"url\":\"https://unsplash.com/\"}},\"taxonomy\":[{\"name\":\"Topics\",\"values\":[{\"id\":\"covid-19\",\"name\":\"Covid 19\"},{\"id\":\"agriculture\",\"name\":\"Agriculture\"},{\"id\":\"our-planet\",\"name\":\"Our Planet\"},{\"id\":\"experimental\",\"name\":\"Experimental\"},{\"id\":\"untested\",\"name\":\"Untested\"}]}],\"layers\":[{\"id\":\"combined_CMIP6_daily_GISS-E2-1-G_tas_kerchunk_DEMO\",\"stacCol\":\"combined_CMIP6_daily_GISS-E2-1-G_tas_kerchunk_DEMO\",\"name\":\"CMIP6 Daily GISS-E2-1-G Near-Surface Air Temperature (demo subset)\",\"type\":\"zarr\",\"tileApiEndpoint\":\"https://prod-titiler-xarray.delta-backend.com/tilejson.json\",\"description\":\"Historical (1950-2014) daily-mean near-surface (usually, 2 meter) air temperature in Kelvin.\",\"zoomExtent\":[0,20],\"sourceParams\":{\"reference\":\"true\",\"resampling_method\":\"bilinear\",\"variable\":\"tas\",\"colormap_name\":\"coolwarm\",\"rescale\":\"232,312\",\"maxzoom\":12},\"legend\":{\"unit\":{\"label\":\"K\"},\"type\":\"gradient\",\"min\":232,\"max\":312,\"stops\":[\"#3b4cc0\",\"#7b9ff9\",\"#c0d4f5\",\"#f2cbb7\",\"#ee8468\",\"#b40426\"]}},{\"id\":\"blue-tarp-planetscope\",\"stacCol\":\"blue-tarp-planetscope\",\"name\":\"Blue tarp test\",\"type\":\"raster\",\"description\":\"Blue tarp tests\",\"zoomExtent\":[10,20]},{\"id\":\"hls-s30-002-ej\",\"stacCol\":\"hls-s30-002-ej\",\"name\":\"HLS\",\"type\":\"raster\",\"description\":\"Testing HLS\",\"zoomExtent\":[10,16],\"sourceParams\":{\"post_process\":\"swir\",\"assets\":[\"B12\",\"B8A\",\"B04\"]}},{\"id\":\"social-vul-1\",\"stacCol\":\"social-vulnerability-index-household\",\"name\":\"Household and Disability Score\",\"type\":\"raster\",\"description\":\"Household Composition & Disability (Aged 65 or Older, Aged 17 or Younger, Civilian with a Disability, Single-Parent Households) - Percentile ranking\",\"projection\":{\"name\":\"lambertConformalConic\",\"center\":[0,30],\"parallels\":[30,30]},\"zoomExtent\":[2,16],\"sourceParams\":{\"resampling_method\":\"bilinear\",\"bidx\":1,\"colormap_name\":\"oranges\",\"rescale\":[0,1]},\"compare\":{\"datasetId\":\"sandbox\",\"layerId\":\"social-vul-1\",\"mapLabel\":({ dateFns, datetime, compareDatetime }) => {\nreturn `${dateFns.format(datetime, 'LLL yyyy')} VS ${dateFns.format(compareDatetime, 'LLL yyyy')}`;\n}\n},\"legend\":{\"type\":\"gradient\",\"min\":\"0\",\"max\":\"1\",\"stops\":[\"#fff5eb\",\"#fdd9b4\",\"#fda762\",\"#f3701b\",\"#c54102\",\"#7f2704\"]}},{\"id\":\"social-vul-2\",\"stacCol\":\"social-vulnerability-index-household\",\"name\":\"Household and Disability Score 2\",\"type\":\"raster\",\"description\":\"Household Composition & Disability (Aged 65 or Older, Aged 17 or Younger, Civilian with a Disability, Single-Parent Households) - Percentile ranking\",\"zoomExtent\":[2,16],\"sourceParams\":{\"resampling_method\":\"bilinear\",\"bidx\":1,\"colormap_name\":\"blues\",\"rescale\":[0,0.5]},\"legend\":{\"type\":\"gradient\",\"min\":\"0\",\"max\":\"1\",\"stops\":[\"#ffffff\",\"#0000ff\"]}},{\"id\":\"epa-annual-emissions_1b1a_coal_mining_underground\",\"stacCol\":\"EPA-annual-emissions_1B1a_Coal_Mining_Underground\",\"name\":\"Underground Coal Mines\",\"type\":\"raster\",\"description\":\"Emissions from sector 1B1a from underground coal mining.\",\"zoomExtent\":[0,20],\"sourceParams\":{\"colormap_name\":\"rainbow\",\"rescale\":[0,2022634652958],\"nodata\":0},\"legend\":{\"type\":\"gradient\",\"min\":0,\"max\":2022634652958,\"stops\":[\"#60007d\",\"#30137d\",\"#1960ae\",\"#7ac300\",\"#f2ce00\",\"#ef6a01\",\"#cc0019\"]}},{\"id\":\"dev-fail\",\"stacCol\":\"dev-fail\",\"name\":\"Failing layer\",\"description\":\"failing\",\"type\":\"raster\"},{\"id\":\"geoglam\",\"stacCol\":\"geoglam\",\"name\":\"GEOGLAM Crop Conditions\",\"type\":\"raster\",\"description\":\"Combined crop conditions across both the Crop Monitor for AMIS and Crop Monitor for Early Warning\",\"zoomExtent\":[0,16],\"sourceParams\":{\"colormap\":\"{\\\"1\\\": [120, 120, 120], \\\"2\\\": [130, 65, 0], \\\"3\\\": [66, 207, 56], \\\"4\\\": [245, 239, 0], \\\"5\\\": [241, 89, 32], \\\"6\\\": [168, 0, 0], \\\"7\\\": [0, 143, 201]}\",\"bidx\":1,\"unscale\":false,\"resampling\":\"nearest\",\"max_size\":1024,\"return_mask\":true},\"legend\":{\"type\":\"categorical\",\"stops\":[{\"color\":\"#3A8DC6\",\"label\":\"Exceptional\"},{\"color\":\"#62D246\",\"label\":\"Favourable\"},{\"color\":\"#FFFF00\",\"label\":\"Watch\"},{\"color\":\"#EC5830\",\"label\":\"Poor\"},{\"color\":\"#891911\",\"label\":\"Failure\"},{\"color\":\"#787878\",\"label\":\"Out of season\"},{\"color\":\"#804115\",\"label\":\"No data\"}]}},{\"id\":\"facebook_population_density\",\"stacCol\":\"facebook_population_density\",\"name\":\"Facebook Population Density\",\"type\":\"raster\",\"description\":\"Facebook high-resolution population density with a 30m² resolution\",\"zoomExtent\":[0,20],\"sourceParams\":{\"resampling\":\"bilinear\",\"bidx\":1,\"colormap_name\":\"ylorrd\",\"rescale\":[0,69]},\"legend\":{\"type\":\"gradient\",\"min\":\"0\",\"max\":\"69\",\"stops\":[\"#ffffcc\",\"#fee187\",\"#feab49\",\"#fc5b2e\",\"#d41020\",\"#800026\"]}}],\"related\":[{\"type\":\"dataset\",\"id\":\"no2\"},{\"type\":\"story\",\"id\":\"air-quality-and-covid-19\"}]},\n        content: () => import('../mock/datasets/sandbox.data.mdx')\n      }\n  };\n      export const stories = {\n    'air-quality-and-covid-19': {\n        data: {\"featured\":true,\"id\":\"air-quality-and-covid-19\",\"name\":\"Air Quality and COVID-19\",\"description\":\"When governments began implementing shutdowns at the start of the COVID-19 pandemic, scientists wondered how the atmosphere would respond to the sudden change in human behavior.\",\"media\":{\"src\":require('../mock/stories/air-quality-and-covid-19--story-cover.jpg'),\"alt\":\"Clear nightsky with crescent moon above the mountains\",\"author\":{\"name\":\"Benjamin Voros\",\"url\":\"https://unsplash.com/photos/U-Kty6HxcQc\"}},\"pubDate\":\"2020-12-01T00:00:00.000Z\",\"taxonomy\":[{\"name\":\"Topics\",\"values\":[{\"id\":\"air-quality\",\"name\":\"Air Quality\"},{\"id\":\"covid-19\",\"name\":\"Covid 19\"}]}]},\n        content: () => import('../mock/stories/air-quality-and-covid-19.stories.mdx')\n      },\n'external-link-test': {\n        data: {\"featured\":true,\"id\":\"external-link-test\",\"name\":\"External Link Test\",\"description\":\"Story to test external link\",\"media\":{\"src\":require('../mock/stories/img-placeholder-6.jpg'),\"alt\":\"Generic placeholder by Unsplash\",\"author\":{\"name\":\"Unsplash\",\"url\":\"https://unsplash.com/\"}},\"pubDate\":\"2023-02-09T00:00:00.000Z\",\"taxonomy\":[{\"name\":\"Topics\",\"values\":[{\"id\":\"agriculture\",\"name\":\"Agriculture\"}]},{\"name\":\"Source\",\"values\":[{\"id\":\"development-seed\",\"name\":\"Development Seed\"}]}],\"related\":[{\"type\":\"dataset\",\"id\":\"no2\"},{\"type\":\"story\",\"id\":\"air-quality-and-covid-19\"}],\"asLink\":{\"url\":\"https://developmentseed.org\"}},\n        content: () => import('../mock/stories/external-link-example.stories.mdx')\n      },\n'internal-link-test': {\n        data: {\"featured\":true,\"id\":\"internal-link-test\",\"name\":\"Internal Link Test\",\"description\":\"Story to test internal link. Link to cata catalog.\",\"media\":{\"src\":require('../mock/stories/img-placeholder-6.jpg'),\"alt\":\"Generic placeholder by Unsplash\",\"author\":{\"name\":\"Unsplash\",\"url\":\"https://unsplash.com/\"}},\"pubDate\":\"2023-02-09T00:00:00.000Z\",\"taxonomy\":[{\"name\":\"Topics\",\"values\":[{\"id\":\"agriculture\",\"name\":\"Agriculture\"}]},{\"name\":\"Source\",\"values\":[{\"id\":\"development-seed\",\"name\":\"Development Seed\"}]}],\"related\":[{\"type\":\"dataset\",\"id\":\"no2\"},{\"type\":\"story\",\"id\":\"air-quality-and-covid-19\"}],\"asLink\":{\"url\":\"/data-catalog\"}},\n        content: () => import('../mock/stories/internal-link-example.stories.mdx')\n      },\n'life-of-water': {\n        data: {\"featured\":true,\"id\":\"life-of-water\",\"name\":\"This is the life of water\",\"description\":\"Sed sed lectus vitae odio vestibulum mattis. Integer iaculis nisl lectus, vel aliquet nulla imperdiet in.\",\"media\":{\"src\":require('../mock/stories/img-placeholder-6.jpg'),\"alt\":\"Generic placeholder by Unsplash\",\"author\":{\"name\":\"Unsplash\",\"url\":\"https://unsplash.com/\"}},\"pubDate\":\"2022-02-09T00:00:00.000Z\",\"taxonomy\":[{\"name\":\"Topics\",\"values\":[{\"id\":\"agriculture\",\"name\":\"Agriculture\"}]},{\"name\":\"Source\",\"values\":[{\"id\":\"development-seed\",\"name\":\"Development Seed\"}]}],\"related\":[{\"type\":\"dataset\",\"id\":\"no2\"},{\"type\":\"story\",\"id\":\"external-link-test\"}]},\n        content: () => import('../mock/stories/life-of-water.stories.mdx')\n      }\n  };","export const S_IDLE = 'idle';\nexport const S_LOADING = 'loading';\nexport const S_SUCCEEDED = 'success';\nexport const S_FAILED = 'error';\n\nexport type ActionStatus = typeof S_IDLE | typeof S_LOADING | typeof S_SUCCEEDED | typeof S_FAILED;\n","import React, { ReactNode } from 'react';\nimport styled, { keyframes, css } from 'styled-components';\nimport { glsp, themeVal, visuallyHidden } from '@devseed-ui/theme-provider';\nimport { CollecticonChartLine } from '@devseed-ui/collecticons';\n\nimport { variableGlsp } from '$styles/variable-utils';\n\nconst pulse = keyframes`\n  0% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n`;\n\nexport const pulsingAnimation = css`\n  animation: ${pulse} 0.8s ease 0s infinite alternate;\n`;\n\ninterface LoadingSkeletonProps {\n  inline?: boolean;\n  width?: number;\n  height?: string;\n  size?: 'large';\n  variation?: 'light';\n  type?: 'heading';\n}\n\nexport const LoadingSkeleton = styled.span<LoadingSkeletonProps>`\n  display: ${({ inline }) => (inline ? 'inline-block' : 'block')};\n  background: ${themeVal('color.base-100')};\n  height: ${({ height }) => (height ? height : '1rem')};\n  width: ${({ width }) => (width || 1) * 100}%;\n  ${pulsingAnimation}\n\n  /* Size modifier */\n  ${({ size }) => size === 'large' && 'height: 2.25rem;'}\n\n  /* Color modifier */\n  ${({ variation }) => variation === 'light' && 'background: rgba(#fff, 0.48);'}\n\n  /* type modifier */\n  ${({ type, variation }) =>\n    type === 'heading' &&\n    css`\n      background: ${themeVal('color.base-200')};\n      ${variation === 'light' && 'background: rgba(#fff, 0.80);'}\n    `}\n`;\n\nexport const LoadingSkeletonGroup = styled.div`\n  display: flex;\n  flex-flow: column;\n  gap: ${glsp(0.5)};\n`;\n\ninterface MapLoadingProps {\n  position?: 'left' | 'right' | 'center';\n}\n\nconst MapLoadingWrapper = styled.div<MapLoadingProps>`\n  position: absolute;\n  z-index: 1;\n  display: grid;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  grid-template-columns: repeat(1fr, 3);\n  grid-template-rows: repeat(1fr, 3);\n  width: 8rem;\n  aspect-ratio: 1;\n  gap: ${glsp(0.5)};\n\n  ${({ position }) => {\n    if (position === 'left') return 'left: 25%;';\n    if (position === 'right') return 'left: 75%;';\n    return 'left: 50%;';\n  }}\n\n  > * {\n    height: auto;\n  }\n\n  > *:nth-child(1) {\n    grid-column: 1 / span 2;\n    grid-row: 1 / span 2;\n  }\n\n  > *:nth-child(2) {\n    grid-column: 3 / span 1;\n    grid-row: 2 / span 1;\n  }\n\n  > *:nth-child(3) {\n    grid-column: 2 / span 1;\n    grid-row: 3 / span 1;\n  }\n`;\n\nconst ContentLoadingSelf = styled.div`\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  grid-template-rows: repeat(2, 24vh);\n  gap: ${variableGlsp()};\n  padding: ${variableGlsp()};\n  background: ${themeVal('color.surface')};\n\n  > div {\n    background: ${themeVal('color.base-100')};\n    ${pulsingAnimation}\n  }\n\n  > div:nth-child(1) {\n    grid-column: 1 / span 1;\n  }\n\n  > div:nth-child(2) {\n    grid-column: 2 / span 3;\n  }\n\n  > div:nth-child(3) {\n    grid-column: 1 / span 3;\n    grid-row: 2;\n  }\n\n  > div:nth-child(4) {\n    grid-column: 4 / span 1;\n    grid-row: 2;\n  }\n\n  p {\n    ${visuallyHidden()}\n  }\n`;\n\nconst ChartLoadingWrapper = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-flow: column;\n  text-align: center;\n  padding: ${variableGlsp()};\n  gap: ${glsp()};\n  aspect-ratio: 16/9;\n  color: ${themeVal('color.base-400')};\n\n  &::before {\n    position: absolute;\n    inset: 0;\n    display: flex;\n    content: '';\n    z-index: -1;\n    padding: ${variableGlsp()};\n    background: ${themeVal('color.base-100')};\n    ${pulsingAnimation}\n  }\n`;\n\nexport function ContentLoading() {\n  return (\n    <ContentLoadingSelf>\n      <div />\n      <div />\n      <div />\n      <div />\n      <p>Loading contents...</p>\n    </ContentLoadingSelf>\n  );\n}\n\nconst PageLoadingSelf = styled.div`\n  display: flex;\n  flex-flow: column nowrap;\n  gap: ${variableGlsp()};\n  height: 100vh;\n  padding: ${variableGlsp()};\n  background: ${themeVal('color.surface')};\n\n  > div {\n    background: ${themeVal('color.base-100')};\n    ${pulsingAnimation}\n  }\n\n  > div:nth-child(1) {\n    height: 10%;\n  }\n\n  > div:nth-child(2) {\n    height: 25%;\n  }\n\n  > div:nth-child(3) {\n    flex-grow: 1;\n  }\n\n  p {\n    ${visuallyHidden()}\n  }\n`;\n\nexport function PageLoading() {\n  return (\n    <PageLoadingSelf>\n      <div />\n      <div />\n      <div />\n      <p>Loading page...</p>\n    </PageLoadingSelf>\n  );\n}\n\nexport const MapLoading = (props) => {\n  return (\n    <MapLoadingWrapper {...props}>\n      <LoadingSkeleton />\n      <LoadingSkeleton />\n      <LoadingSkeleton />\n    </MapLoadingWrapper>\n  );\n};\n\nexport const ChartLoading = (props: { message: ReactNode }) => {\n  return (\n    <ChartLoadingWrapper>\n      <CollecticonChartLine size='xlarge' />\n      <p>{props.message}</p>\n    </ChartLoadingWrapper>\n  );\n};\n","import { themeVal } from '@devseed-ui/theme-provider';\nimport { css as cssNoHighlight } from 'styled-components';\n\nconst variableType = (base, variable) => {\n  return cssNoHighlight`calc(${base} + var(${variable}, 0rem))`;\n};\n\n/**\n * Returns the correct type size taking into account the provided value and the\n * increment (for the base text) for the current media query.\n *\n * @param {string} base The base size to use. This will be the size on top of\n * which the increment defined in the theme is added.\n *\n * @returns CSS expression\n *          like calc(base * var(--base-text-increment))\n */\nexport const variableBaseType = (base) =>\n  variableType(base, '--base-text-increment');\n\n/**\n * Returns the correct vertical space for prose contexts, taking into account\n * the font-size for each media breakpoint. The result is the space scaling\n * together with the font size.\n *\n * @returns CSS expression like calc(1rem + 0.5rem var(--base-text-increment))\n */\nexport const variableProseVSpace = () => {\n  return cssNoHighlight`calc(\n    ${variableBaseType(themeVal('type.base.size'))} + 0.5rem\n  )`;\n};\n\n/**\n * Similar behavior to glsp but varies according to the current media query. The\n * layout.space is scaled taking into account the multipliers in\n * layout.glspMultiplier. Parameters can be provided to further scale the value.\n *\n * @see glsp()\n *\n * @param {...number} m multiplier\n */\nexport const variableGlsp = (...args) => {\n  args = args.length ? args : [1];\n  const fns = args.map(\n    (m) =>\n      cssNoHighlight`calc(${themeVal(\n        'layout.space'\n      )} * var(--base-space-multiplier, 1) * ${m})`\n  );\n\n  const spaces = Array(args.length - 1).fill(' ');\n  return cssNoHighlight(['', ...spaces, ''] as any, ...fns);\n};\n","import React, {\n  Children,\n  Component,\n  ReactElement,\n  ReactNode,\n  createElement\n} from 'react';\nimport styled from 'styled-components';\nimport { media } from '@devseed-ui/theme-provider';\n\nimport { FigcaptionInner } from '../figure';\nimport {\n  defaultBlockName,\n  wideBlockName,\n  fullBlockName,\n  generalErrorMessage,\n  blockTypeErrorMessage,\n  contentTypeErrorMessage,\n  figureDisplayName,\n  proseDisplayName\n} from './block-constant';\nimport ContentBlockFigure from './figure';\nimport { ContentBlock, ContentBlockProse } from '$styles/content-block';\n\nimport { variableGlsp } from '$styles/variable-utils';\nimport {\n  HintedError,\n  HintedErrorDisplay,\n  docsMessage\n} from '$utils/hinted-error';\n\nexport const ContentBlockPAlpha = styled(ContentBlock)`\n  ${ContentBlockProse} {\n    grid-column: content-start / content-end;\n\n    ${media.largeUp`\n      grid-column:  content-3 / content-11;\n    `}\n  }\n`;\n\nexport const ContentBlockPBeta = styled(ContentBlock)`\n  ${ContentBlockProse} {\n    grid-column: content-start / content-end;\n\n    ${media.mediumUp`\n      column-count: 2;\n    `}\n  }\n`;\n\nexport const ContentBlockFAlpha = styled(ContentBlock)`\n  ${ContentBlockFigure} {\n    grid-column: content-start / content-end;\n\n    ${media.largeUp`\n      grid-column:  content-3 / content-11;\n    `}\n  }\n`;\n\nexport const ContentBlockFBeta = styled(ContentBlock)`\n  ${ContentBlockFigure} {\n    grid-column: content-start / content-end;\n  }\n`;\n\nexport const ContentBlockFGama = styled(ContentBlock)`\n  ${ContentBlockFigure} {\n    grid-column: full-start / full-end;\n  }\n\n  ${FigcaptionInner} {\n    padding: ${variableGlsp(0.5, 1, 0, 1)};\n  }\n`;\n\nexport const ContentBlockPFAlpha = styled(ContentBlock)`\n  ${ContentBlockProse} {\n    grid-column: content-start / content-end;\n\n    ${media.largeUp`\n      grid-column:  content-start / content-7;\n    `}\n\n    ${media.xlargeUp`\n      grid-column:  content-start / content-6;\n    `}\n  }\n\n  ${ContentBlockFigure} {\n    grid-column: content-start / content-end;\n    grid-row: 2;\n\n    ${media.mediumUp`\n      grid-column: content-2 / content-8;\n    `}\n\n    ${media.largeUp`\n      grid-column: content-7 / content-end;\n      grid-row: 1;\n    `}\n  }\n`;\n\nexport const ContentBlockPFBeta = styled(ContentBlock)`\n  ${ContentBlockProse} {\n    grid-column: content-start / content-end;\n\n    ${media.largeUp`\n      grid-column: content-7 / content-end;\n    `}\n\n    ${media.xlargeUp`\n      grid-column: content-8 / content-end;\n    `}\n  }\n\n  ${ContentBlockFigure} {\n    grid-column: content-start / content-end;\n    grid-row: 2;\n\n    ${media.mediumUp`\n      grid-column: content-2 / content-8;\n    `}\n\n    ${media.largeUp`\n      grid-column:  content-start / content-7;\n      grid-row: 1;\n    `}\n  }\n`;\n\nexport const ContentBlockPFGama = styled(ContentBlock)`\n  ${ContentBlockProse} {\n    grid-column: content-start / content-end;\n\n    ${media.mediumUp`\n      grid-column:  content-2 / content-8;\n    `}\n\n    ${media.largeUp`\n      grid-column:  content-start / content-7;\n    `}\n\n    ${media.xlargeUp`\n      grid-column:  content-start / content-6;\n    `}\n  }\n\n  ${ContentBlockFigure} {\n    grid-column: content-start / full-end;\n    grid-row: 2;\n\n    ${media.smallUp`\n      grid-column: content-2 / full-end;\n    `}\n\n    ${media.mediumUp`\n      grid-column: content-3 / full-end;\n    `}\n\n    ${media.largeUp`\n      grid-column: content-7 / full-end;\n      grid-row: 1;\n    `}\n  }\n\n  ${FigcaptionInner} {\n    padding: ${variableGlsp(0.5, 1, 0, 1)};\n  }\n`;\n\nexport const ContentBlockPFDelta = styled(ContentBlock)`\n  ${ContentBlockProse} {\n    grid-column: content-start / content-end;\n\n    ${media.mediumUp`\n      grid-column:  content-2 / content-8;\n    `}\n\n    ${media.largeUp`\n      grid-column:  content-7 / content-end;\n    `}\n\n    ${media.xlargeUp`\n      grid-column:  content-8 / content-end;\n    `}\n  }\n\n  ${ContentBlockFigure} {\n    grid-column: full-start / content-end;\n    grid-row: 2;\n\n    ${media.smallUp`\n      grid-column: full-start / content-4;\n    `}\n\n    ${media.mediumUp`\n      grid-column: full-start / content-7;\n    `}\n\n    ${media.largeUp`\n      grid-row: 1;\n    `}\n  }\n\n  ${FigcaptionInner} {\n    padding: ${variableGlsp(0.5, 1, 0, 1)};\n  }\n`;\n\n// This will result an object like below\n// { defaultProse: ContentBlockPAlpha,\n// wideProse: ContentBlockPBeta,\n// defaultFigure; ContentBlockFAlpha,\n// ...\n// fullProseFigure: ContentBlockPFGama\n// fullFigureProse: ContentBlockPFDelta }\nconst matchingBlocks = {\n  [`${defaultBlockName}${proseDisplayName}`]: ContentBlockPAlpha,\n  [`${wideBlockName}${proseDisplayName}`]: ContentBlockPBeta,\n  [`${defaultBlockName}${figureDisplayName}`]: ContentBlockFAlpha,\n  [`${wideBlockName}${figureDisplayName}`]: ContentBlockFBeta,\n  [`${fullBlockName}${figureDisplayName}`]: ContentBlockFGama,\n  [`${defaultBlockName}${proseDisplayName}${figureDisplayName}`]:\n    ContentBlockPFAlpha,\n  [`${defaultBlockName}${figureDisplayName}${proseDisplayName}`]:\n    ContentBlockPFBeta,\n  [`${fullBlockName}${proseDisplayName}${figureDisplayName}`]:\n    ContentBlockPFGama,\n  [`${fullBlockName}${figureDisplayName}${proseDisplayName}`]:\n    ContentBlockPFDelta\n};\n\ninterface BlockComponentProps {\n  type?: string;\n  children: ReactElement[];\n}\n\nexport function BlockComponent(props: BlockComponentProps) {\n  const { children, type } = props;\n\n  // Concat block type name (default, wide, full)\n  // and children component type name (Figure, Prose)\n  // to return matching block type\n  // ex. <Block type='wide'><Figure /></Block> will result in 'wideFigure'\n  const typeName = type ? type : 'default';\n  const childrenAsArray = Children.toArray(children);\n\n  const childrenComponents: string[] = childrenAsArray.map(\n    // @ts-expect-error type may not exist depending on the node, but the error\n    // will be caught and this won't break.\n    (e) => e.type?.displayName ?? 'undefined'\n  );\n  const childrenNames = childrenComponents.reduce(\n    (acc, curr) => acc + curr,\n    ''\n  );\n\n  if (![defaultBlockName, wideBlockName, fullBlockName].includes(typeName)) {\n    throw new HintedError(`${blockTypeErrorMessage} '${typeName}'`, [\n      `Supported block types: 'wide', 'full'`\n    ]);\n  }\n\n  if (!matchingBlocks[`${typeName}${childrenNames}`]) {\n    let hints = [\n      'The only direct children that blocks can have are Figure and Prose.',\n      'Example:',\n      <pre key='block-1'>\n        {`<Block>\n  <Figure><Image/></Figure>\n  <Prose>\n    This is some text.\n  </Prose>\n</Block>\n`}\n      </pre>\n    ];\n\n    if (childrenComponents.filter((e) => e == 'Figure').length > 1) {\n      hints = [\n        ...hints,\n        'Block cannot have more than one Figure. Try to wrap Figures with Blocks.',\n        'Before:',\n        <pre key='block-1'>\n          {`<Block>\n  <Figure><Image/></Figure>\n  <Figure><Image/></Figure>\n</Block>\n`}\n        </pre>,\n        'After:',\n        <pre key='block-2'>\n          {`<Block>\n  <Figure><Image/></Figure>\n</Block>\n<Block>\n  <Figure><Image/></Figure>\n</Block>\n`}\n        </pre>,\n        '--',\n        'If you want your image to be inline, you can drop the Figure and use the images inside a Prose.',\n        'Before:',\n        <pre key='block-3'>\n          {`<Block>\n  <Figure><Image/></Figure>\n  <Figure><Image/></Figure>\n</Block>\n`}\n        </pre>,\n        'After:',\n        <pre key='block-4'>\n          {`<Block>\n  <Prose>\n    <Image/>\n    Some more text...\n  </Prose>\n</Block>\n`}\n        </pre>\n      ];\n    }\n\n    throw new HintedError(contentTypeErrorMessage, hints);\n  }\n\n  return createElement(matchingBlocks[`${typeName}${childrenNames}`], props);\n}\n\ninterface BlockErrorBoundaryProps {\n  childToRender: any;\n  passErrorToChild?: boolean;\n  className?: string;\n  children?: ReactNode;\n}\n\nexport class BlockErrorBoundary extends Component<\n  BlockErrorBoundaryProps,\n  { error: any }\n> {\n  static getDerivedStateFromError(error) {\n    error.CRAOverlayIgnore = true;\n    return { error: error };\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = { error: null };\n    this.clearError = this.clearError.bind(this);\n  }\n\n  clearError() {\n    this.setState({ error: null });\n  }\n\n  render() {\n    const { error } = this.state;\n    const { childToRender: Block, passErrorToChild, ...rest } = this.props;\n\n    if (error && !passErrorToChild) {\n      return (\n        <HintedErrorDisplay\n          title={generalErrorMessage}\n          subtitle={docsMessage}\n          message={error.message}\n          className={rest.className}\n          hints={error.hints}\n        />\n      );\n    }\n\n    return <Block error={error} clearError={this.clearError} {...rest} />;\n  }\n}\n\ninterface BlockWithErrorProps {\n  title?: ReactNode;\n  subtitle?: ReactNode;\n  className?: string;\n  children?: ReactNode;\n}\n\nexport default function BlockWithError(props: BlockWithErrorProps) {\n  return <BlockErrorBoundary {...props} childToRender={BlockComponent} />;\n}\n","import React from 'react';\nimport T from 'prop-types';\nimport styled, { css } from 'styled-components';\n\nimport { glsp, themeVal, truncated } from '@devseed-ui/theme-provider';\nimport { Subtitle } from '@devseed-ui/typography';\nimport { CollecticonCircleInformation } from '@devseed-ui/collecticons';\n\nimport { variableBaseType, variableGlsp } from '$styles/variable-utils';\n\nexport const Figure = styled.figure`\n  position: relative;\n  display: inline-block;\n  vertical-align: top;\n\n  > a {\n    display: block;\n  }\n`;\n\nexport const Figcaption = styled.figcaption`\n  clear: both;\n  display: flex;\n  flex-flow: row nowrap;\n`;\n\nexport const FigcaptionInner = styled(Subtitle).attrs({\n  as: 'span'\n})`\n  padding: ${variableGlsp(0.5, 0, 0, 0)};\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: start;\n  font-size: ${variableBaseType('0.75rem')};\n  text-align: left;\n  max-width: 52rem;\n\n  &::after {\n    content: '';\n    width: ${glsp(2)};\n    height: ${themeVal('layout.border')};\n    margin-top: calc(${variableGlsp(0.5)} - ${themeVal('layout.border')});\n    background: ${themeVal('color.base-100a')};\n  }\n`;\n\nfunction renderAttributionPosition(props) {\n  const { position } = props;\n\n  switch (position) {\n    case 'top-left':\n      return css`\n        top: ${variableGlsp()};\n        left: ${variableGlsp()};\n      `;\n    case 'bottom-left':\n      return css`\n        bottom: ${variableGlsp()};\n        left: ${variableGlsp()};\n      `;\n    case 'bottom-right':\n      return css`\n        bottom: ${variableGlsp()};\n        right: ${variableGlsp()};\n      `;\n    // top-right\n    default:\n      return css`\n        top: ${variableGlsp()};\n        right: ${variableGlsp()};\n      `;\n  }\n}\n\nexport const FigureAttributionSelf = styled.p`\n  position: absolute;\n  z-index: 40;\n  max-width: calc(100% - ${glsp(2)}); /* stylelint-disable-line */\n  height: 1.5rem;\n  display: inline-flex;\n  color: ${themeVal('color.surface')};\n  border-radius: ${themeVal('shape.ellipsoid')};\n  padding: ${glsp(0, 0.25)};\n  font-size: 0.75rem;\n  background: ${themeVal('color.base-400a')};\n  overflow: hidden;\n\n  ${renderAttributionPosition}\n\n  a,\n  a:visited {\n    color: inherit;\n    text-decoration: none;\n  }\n`;\n\nconst FigureAttributionInner = styled.span`\n  display: flex;\n  flex-flow: nowrap;\n  align-items: center;\n\n  svg {\n    flex-shrink: 0;\n  }\n\n  strong {\n    display: block;\n    width: 100%;\n    max-width: 0;\n    overflow: hidden;\n    font-weight: normal;\n    white-space: nowrap;\n    padding: ${glsp(0)};\n    opacity: 0;\n    transition: all 0.24s ease-in-out 0s;\n  }\n\n  &:hover {\n    strong {\n      ${truncated()}\n      max-width: 64vw;\n      padding: ${glsp(0, 0.5, 0, 0.25)};\n      opacity: 1;\n    }\n  }\n`;\n\nfunction FigureAttributionCmp(props) {\n  const { author, url, position, ...rest } = props;\n\n  if (!author) return null;\n\n  const innerProps = url\n    ? {\n        as: 'a',\n        href: url,\n        target: '_blank',\n        rel: 'noreferrer noopener'\n      }\n    : {};\n\n  return (\n    <FigureAttributionSelf position={position} {...rest}>\n      <FigureAttributionInner {...innerProps}>\n        <CollecticonCircleInformation />\n        <strong>Figure by {author}</strong>\n      </FigureAttributionInner>\n    </FigureAttributionSelf>\n  );\n}\n\nexport const FigureAttribution = styled(FigureAttributionCmp)`\n  /* Convert to styled-component: https://styled-components.com/docs/advanced#caveat */\n`;\n\nFigureAttributionCmp.propTypes = {\n  author: T.string,\n  url: T.string,\n  position: T.oneOf(['top-left', 'top-right', 'bottom-left', 'bottom-right'])\n};\n","export const defaultBlockName = 'default';\nexport const wideBlockName = 'wide';\nexport const fullBlockName = 'full';\n\nexport const generalErrorMessage = 'There is an error in this block';\nexport const blockTypeErrorMessage = 'We do not support block type';\nexport const contentTypeErrorMessage =\n  'We do not support this composition of contents';\n\nexport const figureDisplayName = 'Figure';\nexport const proseDisplayName = 'Prose';\nexport const captionDisplayName = 'Caption';\n","import React from 'react';\nimport styled from 'styled-components';\nimport T from 'prop-types';\nimport { figureDisplayName, captionDisplayName } from './block-constant';\nimport { Figure } from '$components/common/figure';\n\nconst ContentBlockFigure = (props) => {\n  const { children } = props;\n  // Figure can be empty\n  if (children && children.length) {\n    const captionChild = children.filter(\n      (e) => e.type.displayName === captionDisplayName\n    );\n    if (captionChild.length > 1)\n      throw Error('More than one caption for a figure');\n  }\n  return <Figure {...props} />;\n};\n\nContentBlockFigure.propTypes = {\n  children: T.node\n};\n\nconst StyledContentBlockFigure = styled(ContentBlockFigure)`\n  img {\n    width: 100%;\n  }\n`;\nStyledContentBlockFigure.displayName = figureDisplayName;\n\nexport default StyledContentBlockFigure;\n","import styled from 'styled-components';\n\nimport { glsp, themeVal } from '@devseed-ui/theme-provider';\n\nimport { variableGlsp, variableProseVSpace } from './variable-utils';\nimport { VarProse } from './variable-components';\n\nimport Hug from './hug/index.ts';\n\nimport {\n  FigcaptionInner,\n  Figure,\n  FigureAttributionSelf\n} from '$components/common/figure';\n\nimport { proseDisplayName } from '$components/common/blocks/block-constant';\n\nexport const ContentBlock = styled(Hug)`\n  padding-top: ${variableGlsp(2)};\n  padding-bottom: ${variableGlsp(2)};\n  align-items: center;\n\n  & + & {\n    padding-top: 0;\n  }\n`;\n\nconst ContentBlockProse = styled(VarProse)`\n  gap: ${variableGlsp()};\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    &:first-child {\n      column-span: all;\n      max-width: 52rem;\n      display: flex;\n      flex-direction: column;\n      gap: calc(${glsp()} - ${glsp(0.25)});\n      margin-bottom: ${variableProseVSpace()};\n\n      &::before {\n        content: '';\n        width: ${glsp(2)};\n        height: ${glsp(0.25)};\n        border-radius: ${themeVal('shape.rounded')};\n        background: ${themeVal('color.primary')};\n      }\n    }\n  }\n\n  * {\n    break-inside: avoid;\n  }\n\n  ${FigcaptionInner} {\n    padding: ${glsp(1, 0, 0, 0)};\n\n    &::after {\n      display: none;\n    }\n  }\n\n  ${FigureAttributionSelf} {\n    top: ${glsp()};\n    right: ${glsp()};\n  }\n\n  [class*='align-'] {\n    figcaption {\n      padding: 0;\n    }\n  }\n\n  .align-left {\n    float: left;\n    margin-right: ${variableProseVSpace()};\n  }\n\n  .align-right {\n    float: right;\n    margin-left: ${variableProseVSpace()};\n\n    ${FigcaptionInner} {\n      align-items: end;\n      text-align: right;\n    }\n  }\n\n  .align-center {\n    margin-left: 50%;\n    transform: translate(-50%, 0);\n\n    ${FigcaptionInner} {\n      align-items: center;\n      text-align: center;\n    }\n  }\n\n  .img-align-right {\n    margin-left: auto;\n  }\n\n  .img-align-center {\n    margin-left: auto;\n    margin-right: auto;\n  }\n`;\n\n// assign displayName that a block can tell\nContentBlockProse.displayName = proseDisplayName;\n\nconst ContentBlockFigure = styled(Figure)`\n  img {\n    width: 100%;\n  }\n`;\n\nexport { ContentBlockFigure, ContentBlockProse };\n","import styled, { css } from 'styled-components';\nimport { themeVal, media } from '@devseed-ui/theme-provider';\nimport { Heading, Lead, Prose } from '@devseed-ui/typography';\n\nimport { variableBaseType, variableProseVSpace } from './variable-utils';\n\n//\n// Heading\n//\n\nconst sizeMapping = {\n  xxsmall: '0.75rem',\n  xsmall: '1rem',\n  small: '1.25rem',\n  medium: '1.5rem',\n  large: '1.75rem',\n  xlarge: '2rem',\n  xxlarge: '2.25rem',\n  jumbo: '3rem'\n};\n\ntype HeadingSizes = keyof typeof sizeMapping;\n\nconst renderHeadingSize = (props: { size?: HeadingSizes } = {}) => {\n  const { size = 'medium' } = props;\n\n  return css`\n    font-size: calc(${sizeMapping[size]} + var(--base-text-increment, 0rem));\n    ${size === 'xxsmall' && 'line-height: 1rem;'}\n  `;\n};\n\nexport const VarHeading = styled(Heading)<{ size?: HeadingSizes }>`\n  /* Size */\n  ${renderHeadingSize}\n`;\n\n//\n// Lead\n//\n\nexport const VarLead = styled(Lead)`\n  font-size: ${variableBaseType(themeVal('type.base.leadSize'))};\n`;\n\n//\n// Prose\n//\n\nexport const VarProse = styled(Prose)`\n  font-size: ${variableBaseType(themeVal('type.base.size'))};\n\n  h1 {\n    ${renderHeadingSize({ size: 'xxlarge' })}\n  }\n\n  h2 {\n    ${renderHeadingSize({ size: 'xlarge' })}\n  }\n\n  h3 {\n    ${renderHeadingSize({ size: 'large' })}\n  }\n\n  h4 {\n    ${renderHeadingSize({ size: 'medium' })}\n  }\n\n  h5 {\n    ${renderHeadingSize({ size: 'small' })}\n  }\n\n  h6 {\n    ${renderHeadingSize({ size: 'xsmall' })}\n  }\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    margin-bottom: calc(${variableProseVSpace()} / 2);\n\n    &:not(:first-child) {\n      margin-top: calc(${variableProseVSpace()} * 2);\n    }\n  }\n\n  > * {\n    margin-bottom: ${variableProseVSpace()};\n  }\n\n  > *:last-child {\n    margin-bottom: 0;\n  }\n\n  /* avoid long a tags breaking small screen layout */\n  ${media.mediumDown`\n    a {\n      word-break: break-word;\n    }\n  `}\n`;\n","/* eslint-disable prettier/prettier */\nimport styled, {\n  css,\n  DefaultTheme,\n  ThemedCssFunction\n} from 'styled-components';\nimport { themeVal, media } from '@devseed-ui/theme-provider';\n\nimport { variableGlsp } from '../variable-utils';\n\n// 🤗 Human Universal Gridder\n//\n// Grid:\n//   start    1    2    3    4    5    6    7    8    9   10   11   12     end\n// |      |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|      |\n// |      |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|      |\n// |      |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|      |\n// |      |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|      |\n// |      |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|  |*|      |\n//\n// The start and end take up 1 fraction and its size is fluid, depending on\n// window size.\n// Each column takes up a 12th of the max content width (defined in the theme).\n// Grid gaps are marked with an asterisk.\n// Each instance of Human Universal Gridder, nested inside another Human\n// Universal Gridder must define its grid for the different media queries,\n// through a grid prop.\n// If the grid for a given media query is not defined the previous one will be\n// used (<media query>Up pattern).\n// The value for each media query breakpoint is an array with a start and an end\n// column. It works much like the `grid-column` property of css.\n//    <Hug>\n//      <Hug\n//        grid={{\n//          smallUp: ['full-start', 'full-end'],\n//          mediumUp: ['content-2', 'content-4'],\n//          largeUp: ['content-2', 'content-5'],\n//        }}\n//      >\n//        Subgrid 1\n//      </Hug>\n//      <Hug\n//        grid={{\n//          smallUp: ['full-start', 'full-end'],\n//          // mediumUp is not defined, so smallUp will be used until largeUp.\n//          largeUp: ['content-6', 'full-end'],\n//        }}\n//      >\n//        Subgrid 2\n//      </Hug>\n//    </Hug>\n//\n// The Human Universal Gridder will define a grid whose line names are always\n// the same regardless of how many nested grids there are. Therefore an element\n// placed on `content-5` will be aligned with the top most `content-5`.\n\n// Line names to be used on the grid.\n// In a css grid, the lines are named, not the columns.\nconst gridLineNames = [\n  'full-start',\n  'content-start',\n  // content-2 to content-12\n  // content-1 does not exist as it is named content-start\n  'content-2',\n  'content-3',\n  'content-4',\n  'content-5',\n  'content-6',\n  'content-7',\n  'content-8',\n  'content-9',\n  'content-10',\n  'content-11',\n  'content-12',\n  'content-end',\n  'full-end'\n];\n\n// List of media queries from the smallest to the largest.\nconst mdQueryOrdered = ['xsmall', 'small', 'medium', 'large', 'xlarge'];\n\n// Util from https://stackoverflow.com/a/49725198\n// At least one key required in object.\ntype RequireAtLeastOne<T, Keys extends keyof T = keyof T> = Pick<\n  T,\n  Exclude<keyof T, Keys>\n> &\n  {\n    [K in Keys]-?: Required<Pick<T, K>> & Partial<Pick<T, Exclude<Keys, K>>>;\n  }[Keys];\n\n// Type from array\n// https://steveholgado.com/typescript-types-from-arrays/\ntype MdQuery = typeof mdQueryOrdered[number];\ntype GridLines = typeof gridLineNames[number];\n\ntype GridderRange = [GridLines, GridLines];\n\n// Remap the keys to <name>Up by creating an interface and then get the keys to have a union type.\ntype MdQueryUp = keyof { [K in MdQuery as `${K}Up`]: true };\n\ntype GridderDefinition = {\n  [K in MdQueryUp]?: GridderRange;\n};\n\ninterface HugProps {\n  // Remap the keys\n  // https://www.typescriptlang.org/docs/handbook/2/mapped-types.html#key-remapping-via-as\n  readonly grid?:\n    | RequireAtLeastOne<GridderDefinition, MdQueryUp>\n    | GridderRange;\n}\n\n/**\n * Check that the provided range is in the expected format which is an array\n * with the start and end grid lines.\n * For example: ['full-start', 'full-end']\n *\n * @throws Error if the value is not in correct format or names are invalid.\n *\n * @param {any} cols The grid range to validate\n */\nconst validateGridLineNames = (cols) => {\n  let error = '';\n\n  if (!Array.isArray(cols) || cols.length !== 2) {\n    error = `The grid definition format is not valid. Please use an array defining the start and end range. Example:\n  ['full-start', 'full-end']`;\n  }\n\n  if (cols.some((v) => gridLineNames.indexOf(v) === -1)) {\n    error = `The grid line names not valid. Please provide a valid name for the grid definition`;\n  }\n\n  // There was an error. Show the user info for debugging.\n  if (error) {\n    throw new Error(`🤗 Human Universal Gridder\n\n    ${JSON.stringify(cols)}\n\n${error}`);\n  }\n};\n\n/**\n * Creates the universal grid for this component.\n *\n * @param {number} columns Number of columns for the grid.\n * @param {string} mdQuery Media query at which this grid is shown\n * @returns css\n */\nfunction makeGrid(columns: number, mdQuery: MdQuery) {\n  return ({ grid }: HugProps) => {\n    const gridGap = variableGlsp();\n    const layoutMax = themeVal('layout.max');\n\n    // Discard the base padding to ensure that gridded folds have the same size as\n    // the constrainers.\n    const layoutMaxNoPadding = css`calc(${layoutMax} - ${gridGap})`;\n    // Calculate how much of the content block (with is the layoutMaxNoPadding)\n    // each column takes up.\n    const fullColumn = css`calc(${layoutMaxNoPadding} / ${columns})`;\n    // To get the usable size of each column we need to account for the gap.\n    const contentColWidth = css`calc(${fullColumn} - ${gridGap})`;\n\n    // Create the columns as:\n    // [content-<num>] minmax(0, <size>)\n    // Content columns start at index 2.\n    const contentColumns = Array(columns - 1)\n      .fill(0)\n      .map((_, i) => ({\n        name: `content-${i + 2}`,\n        value: css`\n          [content-${i + 2}] minmax(0, ${contentColWidth})\n          `\n      }));\n\n    // Create an array with all the columns definitions. It will be used to\n    // filter out the ones that are not needed when taking the user's grid\n    // definition into account.\n    const columnTemplate = [\n      { name: 'full-start', value: css`[full-start] minmax(0, 1fr)` },\n      {\n        name: 'content-start',\n        value: css`[content-start] minmax(0, ${contentColWidth})`\n      },\n      ...contentColumns,\n      { name: 'content-end', value: css`[content-end] minmax(0, 1fr)` },\n      { name: 'full-end', value: '[full-end]' }\n    ];\n\n    let gridTemplateColumns;\n    let gridColumn;\n\n    // If the user defined a grid property compute the subgrid.\n    // This does two things:\n    // - Set the start and end columns to what the user defined.\n    // - Set the template-columns of this element to a subset of the parent (columnTemplate list)\n    if (grid) {\n      const [start, end] = getGridProp(grid, mdQuery);\n      gridColumn = css`\n        grid-column: ${start} / ${end};\n      `;\n\n      const startIdx = columnTemplate.findIndex((col) => col.name === start);\n      const endIdx = columnTemplate.findIndex((col) => col.name === end);\n\n      if (startIdx === -1 || endIdx === -1) {\n        const line = startIdx === -1 ? start : end;\n        throw new Error(`🤗 Human Universal Gridder\n\nThe grid line \\`${line}\\` does not exist in the ${mdQuery} media query which has ${columns} columns.\nGrid lines for ${mdQuery}: ${columnTemplate.map(c => c.name).join(' | ')}`);\n      }\n\n      const lastColumn = columnTemplate[endIdx];\n      gridTemplateColumns = [\n        ...columnTemplate.slice(startIdx, endIdx),\n        // Add the name of the last column without a size so we can use it for\n        // naming purposes.\n        { name: lastColumn.name, value: `[${lastColumn.name}]` }\n      ];\n    } else {\n      // If we're not using a subset, just use all the columns.\n      gridTemplateColumns = columnTemplate;\n    }\n\n    // The grid-template-columns will be a subset of this, depending on the grid\n    // defined by the user.\n    // grid-template-columns:\n    //   [full-start] minmax(0, 1fr)\n    //   [content-start] minmax(0, 000px)\n    //   [content-2] minmax(0, 000px)\n    //   [content-3] minmax(0, 000px)\n    //   [content-4] minmax(0, 000px)\n    //   ...\n    //   [content-end] minmax(0, 1fr)\n    //   [full-end];\n    return css`\n      ${gridColumn}\n      grid-gap: ${gridGap};\n      grid-template-columns: ${gridTemplateColumns.map((col) => col.value)};\n    `;\n  };\n}\n\n/**\n * Get the correct grid range for the given media query. If the grid for a given\n * media query is not defined the previous one will be used (<media query>Up\n * pattern).\n *\n * @param {number} columns Number of columns for the grid.\n * @param {string} mdQuery Media query at which this grid is shown\n *\n * @returns array\n */\nconst getGridProp = (grid, mdQuery) => {\n  // If the user provided an array, assume it is the same on all media queries.\n  if (Array.isArray(grid)) {\n    validateGridLineNames(grid);\n    return grid;\n  }\n\n  // From the current media query go back until we find one defined by the user\n  // or reach the default. The replicates the behavior of <mediaQuery>Up\n  const mdIndex = mdQueryOrdered.findIndex((v) => v === mdQuery);\n\n  for (let i = mdIndex; i >= 0; i--) {\n    const m = mdQueryOrdered[i];\n    const key = `${m}Up`;\n    // Did the user provide an override for this media query?\n    if (grid[key]) {\n      validateGridLineNames(grid[key]);\n      return grid[key];\n    }\n    // No override. Check previous media range.\n  }\n\n  // content-start to content-end\n  return [gridLineNames[1], gridLineNames[gridLineNames.length - 2]];\n};\n\n// Redeclare the media function to fix the types defined in the UI library.\nconst _media = media as unknown as {\n  [K in keyof typeof media]: ThemedCssFunction<DefaultTheme>;\n};\n\nconst Hug = styled.div<HugProps>`\n  display: grid;\n  ${makeGrid(4, mdQueryOrdered[0])}\n\n  ${_media.smallUp`\n    ${makeGrid(4, mdQueryOrdered[1])}\n  `}\n\n  ${_media.mediumUp`\n    ${makeGrid(8, mdQueryOrdered[2])}\n  `}\n\n  ${_media.largeUp`\n    ${makeGrid(12, mdQueryOrdered[3])}\n  `}\n\n  ${_media.xlargeUp`\n    ${makeGrid(12, mdQueryOrdered[4])}\n  `}\n`;\n\nexport default Hug;\n","import React, { Fragment, ReactNode } from 'react';\nimport styled from 'styled-components';\nimport { themeVal, glsp } from '@devseed-ui/theme-provider';\n\nexport class HintedError extends Error {\n  hints?: ReactNode[];\n\n  constructor(message, hints: ReactNode[] = []) {\n    super(message);\n    this.hints = hints;\n  }\n}\n\nexport const ErrorBlock = styled.div`\n  margin: ${glsp(1, 0)};\n  padding: ${glsp(0, 1)};\n`;\n\nexport const ErrorBlockInner = styled.div`\n  width: 100%;\n  color: ${themeVal('color.danger')};\n  border: 3px solid ${themeVal('color.danger')};\n  padding: ${glsp(3)};\n\n  > div {\n    max-width: 48rem;\n    margin: 0 auto;\n\n    > * {\n      display: block;\n    }\n  }\n`;\n\nexport const ErrorHints = styled.div`\n  margin-top: ${glsp()};\n  color: ${themeVal('color.base')};\n\n  pre {\n    font-size: 0.875rem;\n  }\n`;\n\nconst ErrorSubtitle = styled.div`\n  color: ${themeVal('color.base')};\n  font-size: 0.875rem;\n`;\n\ninterface HintedErrorDisplayProps {\n  title: string;\n  message: string;\n  className?: string;\n  hints?: ReactNode[];\n  subtitle?: ReactNode;\n}\n\nexport function HintedErrorDisplay(props: HintedErrorDisplayProps) {\n  const { className, hints, message, title, subtitle } = props;\n\n  return (\n    <ErrorBlock className={className}>\n      <ErrorBlockInner>\n        <div>\n          <small>{title}</small>\n          <strong>{message}</strong>\n          {subtitle && <ErrorSubtitle>{subtitle}</ErrorSubtitle>}\n          {!!hints?.length && (\n            <ErrorHints>\n              <p>\n                <strong>Hints:</strong>\n              </p>\n              {hints.map((e, i) =>\n                typeof e === 'string' ? (\n                  /* eslint-disable-next-line react/no-array-index-key */\n                  <p key={i}>{e}</p>\n                ) : (\n                  /* eslint-disable-next-line react/no-array-index-key */\n                  <Fragment key={i}>{e}</Fragment>\n                )\n              )}\n            </ErrorHints>\n          )}\n        </div>\n      </ErrorBlockInner>\n    </ErrorBlock>\n  );\n}\n\nexport const docsMessage = (\n  <p>\n    📜 Find all documentation in our{' '}\n    <a\n      href='https://github.com/NASA-IMPACT/veda-config/blob/main/docs/MDX_BLOCKS.md'\n      target='_blank'\n      rel='noreferrer nofollow'\n    >\n      <strong>Github repo</strong>\n    </a>\n    .\n  </p>\n);\n","import React from 'react';\nimport T from 'prop-types';\nimport {\n  Figure,\n  Figcaption,\n  FigcaptionInner,\n  FigureAttribution\n} from '$components/common/figure';\n\nimport { captionDisplayName } from '$components/common/blocks/block-constant';\n\nexport function Caption({ children, attrAuthor, attrUrl }) {\n  return (\n    <Figcaption>\n      {children && <FigcaptionInner>{children}</FigcaptionInner>}\n      <FigureAttribution author={attrAuthor} url={attrUrl} forwardedAs='span' />\n    </Figcaption>\n  );\n}\n\nCaption.displayName = captionDisplayName;\n\nCaption.propTypes = {\n  attrAuthor: T.string,\n  attrUrl: T.string,\n  children: T.node\n};\n\nexport default function Image(props) {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const { align, caption, attrAuthor, ...propsWithoutAttrs } = props;\n  if (caption || attrAuthor) {\n    const imageAlign = align ? align : 'center';\n    return (\n      // if it is an inline image with a caption\n      <Figure className={`align-${imageAlign}`}>\n        <img loading='lazy' {...propsWithoutAttrs} />\n        <Caption attrAuthor={attrAuthor} attrUrl={props.attrUrl}>\n          {caption}\n        </Caption>\n      </Figure>\n    );\n  }\n\n  const imageAlign = align ? align : 'left';\n  return (\n    <img\n      className={`img-align-${imageAlign}`}\n      loading='lazy'\n      {...propsWithoutAttrs}\n    />\n  );\n}\n\nImage.propTypes = {\n  src: T.string,\n  alt: T.string,\n  align: T.string,\n  caption: T.string,\n  attrAuthor: T.string,\n  attrUrl: T.string\n};\n","import React, { ReactNode } from 'react';\nimport styled from 'styled-components';\nimport { themeVal, media, multiply } from '@devseed-ui/theme-provider';\nimport { ProjectionOptions } from 'veda';\n\nimport { variableGlsp } from '$styles/variable-utils';\nimport { ContentBlockProse } from '$styles/content-block';\nimport { utcString2userTzDate } from '$utils/date';\nimport { validateRangeNum } from '$utils/utils';\nimport { validateProjectionBlockProps } from '$components/common/mapbox/map-options/utils';\n\n/* eslint-disable react/no-unused-prop-types */\nexport interface ChapterProps {\n  center: [number, number];\n  zoom: number;\n  datasetId: string;\n  layerId: string;\n  datetime?: string;\n  showBaseMap?: boolean;\n  projectionId?: ProjectionOptions['id'];\n  projectionCenter?: ProjectionOptions['center'];\n  projectionParallels?: ProjectionOptions['parallels'];\n  children: ReactNode;\n}\n/* eslint-enable react/no-unused-prop-types */\n\nexport interface ScrollyChapter extends Omit<ChapterProps, 'datetime'> {\n  datetime?: Date;\n}\n\nexport const chapterDisplayName = 'Chapter';\n\nconst ChapterSelf = styled.div`\n  padding-bottom: 80vh;\n  grid-column: content-start / content-end;\n\n  ${media.mediumUp`\n    grid-column: content-start / content-7;\n  `}\n\n  > ${ContentBlockProse} {\n    background: ${themeVal('color.surface')};\n    padding: ${variableGlsp()};\n    border-radius: ${multiply(themeVal('shape.rounded'), 2)};\n    box-shadow: ${themeVal('boxShadow.elevationD')};\n    pointer-events: auto;\n  }\n`;\n\nexport function Chapter(props: ChapterProps) {\n  const { children } = props;\n  return (\n    <ChapterSelf data-step>\n      <ContentBlockProse>{children}</ContentBlockProse>\n    </ChapterSelf>\n  );\n}\n\nChapter.displayName = chapterDisplayName;\n\nconst lngValidator = validateRangeNum(-180, 180);\nconst latValidator = validateRangeNum(-90, 90);\n\nexport function validateChapter(chapter: ChapterProps, index) {\n  const dataProperties = ['layerId', 'datasetId'];\n  const mapProperties = ['center', 'zoom'];\n\n  const missingDataProps = dataProperties.filter((p) => {\n    // When showBaseMap is set the layer related properties are not needed.\n    return chapter.showBaseMap ? false : chapter[p] === undefined;\n  });\n  const missingMapProps = mapProperties.filter((p) => chapter[p] === undefined);\n\n  const missing = [...missingDataProps, ...missingMapProps];\n\n  const missingError =\n    !!missing.length &&\n    `- Missing some properties: ${missing.map((p) => `[${p}]`).join(', ')}`;\n\n  const dateError =\n    chapter.datetime &&\n    isNaN(utcString2userTzDate(chapter.datetime).getTime()) &&\n    '- Invalid datetime. Use YYYY-MM-DD format';\n\n  const contentError =\n    !chapter.children &&\n    '- Missing content. Add some between <Chapter ...props>content here</Chapter>';\n\n  const centerValid =\n    lngValidator(chapter?.center?.[0]) && latValidator(chapter?.center?.[1]);\n  const centerError =\n    !centerValid && '- Invalid center coordinates. Use [longitude, latitude]';\n\n  const projectionErrors = validateProjectionBlockProps({\n    id: chapter.projectionId,\n    center: chapter.projectionCenter,\n    parallels: chapter.projectionParallels\n  });\n\n  const errors = [\n    missingError,\n    dateError,\n    contentError,\n    centerError,\n    ...projectionErrors\n  ].filter(Boolean) as string[];\n\n  return errors.length ? [`Chapter ${index + 1}:`, ...errors] : [];\n}\n","import {\n  format,\n  isSameMonth,\n  isSameYear,\n  parse,\n  startOfYear,\n  sub\n} from 'date-fns';\n\n/**\n * Create a date which matches the input date offsetting the timezone to match\n * the user's.\n * If the user is in UTC-5 time and the date string is in UTC the date will be\n * constructed disregarding the input date's timezone.\n * Ex:\n * input: 2019-01-01T00:00:00Z\n * normal output: 2018-12-31T19:00:00 -05:00\n * utcDate output: 2019-01-01T00:00:00 -05:00\n *\n * Basically it parses the date ignoring the timezone and treats it as if the\n * date is already in the user's Tz.\n * Times I had timezone related bugs and this fn saved me: 7\n *\n * Reverse function of userTzDate2utcString()\n *\n * @param {string} str Date String\n * @returns Date\n */\nexport function utcString2userTzDate(str?: string | null) {\n  // Always return a Date even if invalid\n  if (typeof str !== 'string') {\n    return new Date('invalid');\n  }\n\n  // The date should always be in the user's TZ but the input string affects\n  // how the date is constructed.\n  // An input string of only year or with `-` (2020-01 | 2020-1-1) will be\n  // considered to be in ISO format, meaning that the user date will be this\n  // date +- the TZ offset. For example:\n  // 2020-01-01\n  //   Tue Dec 31 2019 19:00:00 GMT-0500 (Eastern Standard Time)\n  //   Wed Jan 01 2020 01:00:00 GMT+0100 (Central European Time)\n  //\n  // whereas 2020/01/01\n  //   Wed Jan 01 2020 00:00:00 GMT-0500 (Eastern Standard Time)\n  //   Wed Jan 01 2020 00:00:00 GMT+0100 (Central European Time)\n  // and if converted to ISO\n  //   2020-01-01T05:00:00.000Z\n  //   2020-01-01T01:00:00.000Z\n  //\n  // The code below ensures that all dates behave the same.\n  //\n  const isoYearOrMonth = str.match(/^([0-9]{4})(?:-([0-9]{1,2}))?$/);\n  const isoMatch = str.match(/^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})/);\n\n  if (isoYearOrMonth || isoMatch) {\n    const date = new Date(str);\n    // If the date is not valid, return it and be done.\n    if (isNaN(date.getTime())) return date;\n    const offset = date.getTimezoneOffset();\n    date.setTime(date.getTime() + offset * 60 * 1000);\n    return date;\n  } else {\n    // For the full date view Date does a good job, except with the ordinal\n    // numbers. Remove those from the date before parsing.\n    return new Date(str.replace(/([0-9])(st|nd|rd|th)/g, '$1'));\n  }\n}\n\n/**\n * Converts the date to a ISO string offsetting the timezone.\n *\n * Basically it coverts the date to a string ignoring the timezone and treating\n * it as if the date is already in UTC.\n *\n * Reverse function of utcString2userTzDate()\n *\n * @param date The Date\n * @returns string\n */\nexport function userTzDate2utcString(date) {\n  const tz = date.getTimezoneOffset();\n  const d = new Date(date.getTime() - tz * 60000);\n  return d.toISOString();\n}\n\n/**\n * Check if the date is yyyy-mm-dd format\n * Ex. 2019/10-03 : invalid\n * 2019/01/02: invalid\n * 2019/13/01: invalid\n */\nexport function isValidDate(dateString?: string | null) {\n  const date = utcString2userTzDate(dateString);\n  return !isNaN(date.getTime());\n}\n\n/**\n * Format the date in a pretty way as to not repeat values if the month or\n * year are the same.\n * Examples:\n * Jan 1st, 2020 to Dec 31st, 2021\n * Jan 1st - Dec 31st, 2020\n * Dec 01-31, 2020\n * Dec 31st, 2020\n *\n * @param {object} start Start date to format\n * @param {object} end End date to format\n * @param {string} datesSeparator Separator to use with dates without any common\n * element. Defaults to \" to \"\n * @param {boolean} useOrdinalDays Whether or not to use ordinal days: 1st, 2nd\n */\nexport function formatDateRange(\n  start: Date,\n  end: Date,\n  datesSeparator = ' to ',\n  useOrdinalDays = true\n) {\n  const DATE_FORMAT_FULL = useOrdinalDays ? 'MMM do, yyyy' : 'MMM dd, yyyy';\n\n  // Format the label in a pretty way as to not repeat values if the month or\n  // year are the same.\n  // Examples:\n  // Jan 1st, 2020 to Dec 31st, 2021\n  // Jan 1st — Dec 31st, 2020\n  // Dec 01-31, 2020\n  // Dec 31st, 2020\n\n  const startStr = format(start, DATE_FORMAT_FULL);\n  const endStr = format(end, DATE_FORMAT_FULL);\n\n  if (startStr === endStr) {\n    return startStr;\n  }\n\n  // Things get trickier when we have to compare dates. Here the range plays a\n  // role.\n  if (isSameMonth(start, end) && isSameYear(start, end)) {\n    return `${format(start, 'MMM dd')}-${format(end, 'dd, yyyy')}`;\n  } else if (isSameYear(start, end)) {\n    const monthDayFormat = useOrdinalDays ? 'MMM do' : 'MMM dd';\n    return `${format(start, monthDayFormat)}${datesSeparator}${endStr}`;\n  } else {\n    return `${startStr}${datesSeparator}${endStr}`;\n  }\n}\n\n/**\n * Converts a native JS date to the format accepted by HTML inputs\n * @param date\n * @returns string\n */\nexport function dateToInputFormat(date?: Date) {\n  if (!date) return undefined;\n  return format(date, 'yyyy-MM-dd');\n}\n\nexport function inputFormatToDate(inputFormat: string) {\n  const d = parse(inputFormat, 'yyyy-MM-dd', new Date());\n  return isNaN(d.getTime()) ? null : d;\n}\n\nexport type DateRangePreset =\n  | 'yearToDate'\n  | 'last30Days'\n  | 'lastYear'\n  | 'last10Years'\n  | '2018-2022';\n\nexport function getRangeFromPreset(preset: DateRangePreset): {\n  start: Date;\n  end: Date;\n} {\n  let end = new Date();\n  let start = startOfYear(new Date());\n  if (preset === 'last30Days') {\n    start = sub(end, { days: 30 });\n  } else if (preset === 'lastYear') {\n    start = sub(end, { years: 1 });\n  } else if (preset === 'last10Years') {\n    start = sub(end, { years: 10 });\n  } else if (preset === '2018-2022') {\n    start = new Date(2018, 0, 1);\n    end = new Date(2022, 11, 31);\n  }\n  return {\n    start,\n    end\n  };\n}\n","import styled, { css, FlattenSimpleInterpolation } from 'styled-components';\nimport { visuallyDisabled } from '@devseed-ui/theme-provider';\n\n/**\n * Calculates the integer remainder of a division of a by n, handling negative\n * modulo in the mathematically expected way.\n *\n * This is very helpful for cycling array indexes.\n * If the current index is the first, the last is returned, and vice-versa.\n *\n * Given an index if we want to know the previous:\n * @example\n *   const arr = [1, 2, 3];\n *   const arrIdx = 0;\n *   const newIdx = mod(arrIdx - 1, arr.length); // 2\n *\n * @param {number} a Dividend\n * @param {number} n Divisor\n */\nexport function mod(a: number, n: number) {\n  return ((a % n) + n) % n;\n}\n\n/**\n * Created a validator function that ensures a number is within the given range.\n *\n * @param {number} min Range lower bound (inclusive)\n * @param {number} max Range upper bound (inclusive)\n *\n * @returns {function} Validator function.\n */\nexport function validateRangeNum(min: number, max: number) {\n  return (raw) => {\n    const value = Number(raw);\n    return !isNaN(value) && raw !== '' && value >= min && value <= max;\n  };\n}\n\n/**\n * Compares two values using JSON stringification.\n *\n * @param {mixed} a Data to compare\n * @param {mixed} b Data to compare\n */\nexport function isEqualObj(a, b) {\n  // Exist early if they're the same.\n  if (a === b) return true;\n  return JSON.stringify(a) === JSON.stringify(b);\n}\n\n/**\n * Adds a visuallyDisabled prop to the component that when set to true visually\n * disables the component (through css) and prevents a click.\n *\n * @param Comp React Component to enhance\n * @param additionalStyles Additional styles to apply when visually disabled.\n * @returns Enhanced styled component.\n */\nexport function composeVisuallyDisabled(\n  Comp,\n  additionalStyles?: FlattenSimpleInterpolation\n) {\n  return styled(Comp).attrs((props) => {\n    const onClickOriginal = props.onClick;\n    return {\n      onClick: (e) => {\n        if (props.visuallyDisabled) {\n          e.preventDefault();\n          return;\n        }\n        return onClickOriginal?.(e);\n      }\n    };\n  })`\n    ${({ visuallyDisabled: vd }) =>\n      vd &&\n      css`\n        ${visuallyDisabled()}\n\n        &&&:hover {\n          ${visuallyDisabled()}\n          background: inherit;\n        }\n\n        ${additionalStyles}\n      `}\n  `;\n}\n\n\n/**\n * Checks if the given environment variable is set to 'true', ignoring case.\n * @param value - The value of the environment variable.\n * @returns A boolean indicating whether the flag is true.\n */\nexport function checkEnvFlag(value?: string) {\n  return (value ?? '').toLowerCase() === 'true';\n}\n","import { MbProjectionOptions, ProjectionOptions } from 'veda';\n\nimport { ProjectionListItem } from './types';\nimport { validateRangeNum } from '$utils/utils';\n\n// The id is internal to the app.\n// The mbId is the projection name to use with mapbox. This is needed because\n// multiple projections can be made from the same mapbox Id just by tweaking the\n// parallels and center values\nexport const projectionsList: ProjectionListItem[] = [\n  { id: 'globe', mbId: 'globe', label: 'Globe' },\n  {\n    id: 'albers',\n    mbId: 'albers',\n    label: 'Albers',\n    conicValues: {\n      center: [-96, 37.5],\n      parallels: [29.5, 45.5]\n    }\n  },\n  { id: 'equalEarth', mbId: 'equalEarth', label: 'Equal Earth' },\n  { id: 'equirectangular', mbId: 'equirectangular', label: 'Equirectangular' },\n  {\n    id: 'lambertConformalConic',\n    mbId: 'lambertConformalConic',\n    label: 'Lambert Conformal Conic',\n    conicValues: {\n      center: [0, 30],\n      parallels: [30, 30]\n    }\n  },\n  { id: 'mercator', mbId: 'mercator', label: 'Mercator' },\n  { id: 'naturalEarth', mbId: 'naturalEarth', label: 'Natural Earth' },\n  { id: 'winkelTripel', mbId: 'winkelTripel', label: 'Winkel Tripel' },\n  {\n    id: 'polarNorth',\n    mbId: 'lambertConformalConic',\n    label: 'Polar North',\n    isCustom: true,\n    conicValues: {\n      center: [-40, 0],\n      parallels: [90, 90]\n    }\n  },\n  {\n    id: 'polarSouth',\n    mbId: 'lambertConformalConic',\n    label: 'Polar South',\n    isCustom: true,\n    conicValues: {\n      center: [-40, 0],\n      parallels: [-89.99, -89.99]\n    }\n  }\n];\n\n// Default value for the projection state.\nexport const projectionDefault: ProjectionOptions = {\n  id: 'mercator'\n};\n\n/**\n * Return the correct format needed by mapbox to display the projection. We use\n * custom projections that do not exist in mapbox and therefore we need to get\n * the correct name and parallels and center values.\n * For example the projection with id polarNorth is actually named\n * lambertConformalConic\n */\nexport const convertProjectionToMapbox = (\n  projection: ProjectionOptions\n): MbProjectionOptions => {\n  const p = projectionsList.find((proj) => proj.id === projection.id);\n\n  if (!p) {\n    /* eslint-disable-next-line no-console */\n    console.error('projection', projection);\n    throw new Error(`Invalid projection with id: ${projection.id}`);\n  }\n\n  return {\n    center: p.conicValues?.center || projection.center,\n    parallels: p.conicValues?.parallels || projection.parallels,\n    name: p.mbId\n  };\n};\n\nexport const validateLon = validateRangeNum(-180, 180);\nexport const validateLat = validateRangeNum(-90, 90);\n\nexport function validateProjectionBlockProps({\n  id,\n  center,\n  parallels\n}: Partial<ProjectionOptions>) {\n  // Projections\n  const projectionErrors: string[] = [];\n  if (id) {\n    const allowedProjections = projectionsList.map((p) => p.id);\n    const projectionsConic = projectionsList\n      .filter((p) => !p.isCustom && !!p.conicValues)\n      .map((p) => p.id);\n\n    if (!allowedProjections.includes(id)) {\n      const a = allowedProjections.join(', ');\n      projectionErrors.push(`- Invalid projectionId. Must be one of: ${a}.`);\n    }\n\n    if (projectionsConic.includes(id)) {\n      if (!center || !validateLon(center[0]) || !validateLat(center[1])) {\n        const o = projectionsConic.join(', ');\n        projectionErrors.push(\n          `- Invalid projectionCenter. This property is required for ${o} projections. Use [longitude, latitude].`\n        );\n      }\n\n      if (\n        !parallels ||\n        !validateLat(parallels[0]) ||\n        !validateLat(parallels[1])\n      ) {\n        const o = projectionsConic.join(', ');\n        projectionErrors.push(\n          `- Invalid projectionParallels. This property is required for ${o} projections. Use [Southern parallel latitude, Northern parallel latitude].`\n        );\n      }\n    }\n  }\n\n  return projectionErrors;\n}\n","import React from 'react';\nimport T from 'prop-types';\nimport LazyLoad from 'react-lazyload';\n\nimport Chart from '$components/common/chart/block';\nimport { chartMaxHeight } from '$components/common/chart/constant';\n\nimport Table, { tableHeight } from '$components/common/table';\nimport CompareImage from '$components/common/blocks/images/compare';\n\nimport Map, { mapHeight } from '$components/common/blocks/block-map';\nimport Embed from '$components/common/blocks/embed';\nimport {\n  ScrollytellingBlock,\n  scrollyMapHeight\n} from '$components/common/blocks/scrollytelling';\n\nimport { LoadingSkeleton } from '$components/common/loading-skeleton';\n\nexport function LazyChart(props) {\n  return (\n    <LazyLoad\n      placeholder={<LoadingSkeleton height={`${chartMaxHeight}px`} />}\n      offset={50}\n      once\n    >\n      <Chart {...props} />\n    </LazyLoad>\n  );\n}\n\nexport function LazyScrollyTelling(props) {\n  return (\n    <LazyLoad\n      placeholder={<LoadingSkeleton height={scrollyMapHeight} />}\n      offset={100}\n      once\n    >\n      <ScrollytellingBlock {...props} />\n    </LazyLoad>\n  );\n}\n\nexport function LazyMap(props) {\n  return (\n    <LazyLoad\n      placeholder={<LoadingSkeleton height={mapHeight} />}\n      offset={100}\n      once\n    >\n      <Map {...props} />\n    </LazyLoad>\n  );\n}\n\nexport function LazyCompareImage(props) {\n  return (\n    // We don't know the height of image, passing an arbitrary number (200) for placeholder height\n    <LazyLoad placeholder={<LoadingSkeleton height={200} />} offset={50} once>\n      <CompareImage {...props} />\n    </LazyLoad>\n  );\n}\n\nexport function LazyTable(props) {\n  return (\n    <LazyLoad\n      placeholder={<LoadingSkeleton height={tableHeight} />}\n      offset={50}\n      once\n    >\n      <Table {...props} />\n    </LazyLoad>\n  );\n}\n\nexport function LazyEmbed(props) {\n  return (\n    <LazyLoad\n      // eslint-disable-next-line react/prop-types\n      placeholder={<LoadingSkeleton height={props.height} />}\n      offset={50}\n      once\n    >\n      <Embed {...props} />\n    </LazyLoad>\n  );\n}\n\nLazyEmbed.propTypes = {\n  src: T.string,\n  height: T.number\n};\n","import React, { useState, useEffect } from 'react';\nimport { csv, json, DSVRowArray } from 'd3';\n\nimport { FormattedTimeSeriesData, getFData } from './utils';\nimport { fileExtensionRegex } from './constant';\nimport Chart, { CommonLineChartProps, UniqueKeyUnit } from '.';\n\nimport useAsyncError from '$utils/use-async-error';\ninterface BlockChartProp extends CommonLineChartProps {\n  dataPath: string;\n  idKey?: string;\n  xKey: string;\n  yKey: string;\n}\n\nconst subIdKey = 'subIdeKey';\n\nfunction BlockChart(props: BlockChartProp) {\n  const { dataPath, idKey, xKey, yKey, dateFormat } = props;\n\n  const [chartData, setChartData] = useState<FormattedTimeSeriesData[]>([]);\n  const [uniqueKeys, setUniqueKeys] = useState<UniqueKeyUnit[]>([]);\n\n  const newDataPath = dataPath.split('?')[0];\n  const extension = fileExtensionRegex.exec(newDataPath)[1];\n\n  const throwAsyncError = useAsyncError();\n\n  useEffect(() => {\n    const getData = async () => {\n      try {\n      const data =\n      extension === 'csv'\n        ? (await csv(dataPath)) as DSVRowArray\n        : (await json(dataPath).then(d => [d].flat())) as object[];\n      \n        // if no idKey is provided (when there are only two columns in the data), sub it with empty data\n        const dataToUse = idKey? data: data.map(e => ({...e, [subIdKey]: ''}));\n        \n        const { fData, uniqueKeys } = getFData({  \n          data: dataToUse,\n          idKey: idKey? idKey: subIdKey,\n          xKey,\n          yKey,\n          dateFormat\n        });\n  \n        const formattedUniqueKeys = uniqueKeys.map((e) => ({\n          label: e,\n          value: e,\n          active: true\n        }));\n        setChartData(fData);\n        setUniqueKeys(formattedUniqueKeys);\n      } catch(e) {\n        throwAsyncError(e);\n      }\n      \n    };\n\n    getData();\n  }, [\n    setChartData,\n    setUniqueKeys,\n    throwAsyncError,\n    extension,\n    idKey,\n    xKey,\n    yKey,\n    dataPath,\n    dateFormat\n  ]);\n\n  return (\n    <Chart\n      {...props}\n      chartData={chartData}\n      uniqueKeys={uniqueKeys}\n      renderLegend={true}\n    />\n  );\n}\n\nexport default BlockChart;\n","import { timeFormat, timeParse } from 'd3';\nimport * as d3ScaleChromatic from 'd3-scale-chromatic';\nimport { UniqueKeyUnit } from '.';\nimport { formatAsScientificNotation, round } from '$utils/format';\nimport { HintedError } from '$utils/hinted-error';\n\nexport const timeFormatter = (time: number, dateFormat: string) => {\n  return dateFormatter(new Date(time), dateFormat);\n};\n\nexport const dateFormatter = (date: Date, dateFormat: string) => {\n  const format = timeFormat(dateFormat);\n  return format(date);\n};\n\nexport const convertToTime = ({\n  timeString,\n  dateFormat\n}: {\n  timeString: string | undefined;\n  dateFormat: string;\n}) => {\n  if (!timeString) return undefined;\n  const parseDate = timeParse(dateFormat);\n  if (!parseDate(timeString))\n    throw new HintedError(\n      `Failed to parse time with the dateFormat provided: ${dateFormat}.`,\n      [\n        `The data has \"${timeString}\" as value.`,\n        `Please check if you are using the right time format: https://github.com/d3/d3-time-format.`\n      ]\n    );\n  return parseDate(timeString)?.getTime();\n};\n\nexport type FormattedTimeSeriesData = Record<string, number | string> & {\n  date: number;\n  dateFormat: string;\n};\n/**\n * Returns data to feed chart. one unit looks like: { xKeyValue: Date, otherPropertiesDrivenFromUniqueKeys }\n * ex. If uniqueKeys are =['no2', 'so2'], xKey is Year, the unit will look like { Year: Date, no2: value, so2: value}\n *\n * @param {object[]} timeSeriesData\n * @param {string[]} dates\n * @param {string} dateFormat How the date was formatted (following d3-date-format ex. %m/%d/%Y)\n * @param {string[]} uniqueKeys\n */\nexport function formatTimeSeriesData({\n  timeSeriesData,\n  dates,\n  dateFormat,\n  uniqueKeys\n}: {\n  timeSeriesData: Record<string, any>[];\n  dates: string[]; // 202205, 202206,...\n  dateFormat: string; // %y/%m/%d..\n  uniqueKeys: UniqueKeyUnit[]; // min,max,,\n}): FormattedTimeSeriesData[] {\n  /* eslint-disable-next-line fp/no-mutating-methods */\n  return timeSeriesData\n    .map((e, idx) => {\n      const currentStat = e;\n      const date: number =\n        convertToTime({ timeString: dates[idx], dateFormat }) ?? 0;\n\n      return {\n        date,\n        dateFormat,\n        ...uniqueKeys.reduce((acc, curr) => {\n          return { ...acc, [curr.label]: currentStat[curr.value] };\n        }, {})\n      };\n    })\n    .sort((a, b) => a.date - b.date);\n}\n\n/**\n * Returns\n * {\n *    uniqueKeys: an array of unique keys to represent each line of the chart (and accompanying components such as legend, tooltip)\n *    fData: data to feed chart. one unit looks like: { xKeyValue: Date, otherPropertiesDrivenFromUniqueKeys }\n * }\n * ex. If uniqueKeys are =['no2', 'so2'], xKey is Year, the unit will look like { Year: Date, no2: value, so2: value}\n *\n * @param {object[]} data\n * @param {string} idKey The key or getter of a group of data which should be unique in a Chart\n * @param {string} xKey The key or getter for x-axis which is corresponding to the data.\n * @param {string} yKey The key or getter for y-axis which is corresponding to the data.\n * @param {string} dateFormat How the date was formatted (following d3-date-format ex. %m/%d/%Y)\n */\nexport function getFData({\n  data,\n  idKey,\n  xKey,\n  yKey,\n  dateFormat\n}: {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  data: any[]; // This type should get specified once the chart is put together\n  idKey: string;\n  xKey: string;\n  yKey: string;\n  dateFormat: string;\n}): { uniqueKeys: any[]; fData: FormattedTimeSeriesData[] } {\n  // Throw an error if no key is found.\n  const columnErrors = [xKey, yKey, idKey]\n    .map((key) => ({ key, noErr: Object.keys(data[0]).includes(key) }))\n    .filter((e) => !e.noErr)\n    .map(\n      (e) =>\n        `\"${e.key}\" is not found in columns. Please check if the data has \"${e.key}\" column.`\n    );\n  if (columnErrors.length > 0)\n    throw new HintedError('Key not found', columnErrors);\n  // Check sensitivity value\n  const collator = new Intl.Collator('en', {numeric: true});\n\n  /* eslint-disable-next-line fp/no-mutating-methods */\n  const uniqueKeys = [...Array.from(new Set(data.map((d) => d[idKey])))].sort(collator.compare);\n\n  // Format csv/json data into chart suitable data\n  // ## From:\n  // {\n  //   \"xkey\": xKey value,\n  //   \"yKey\": yKey value,\n  //   \"idKey\": idKey value\n  // }\n  // ## to\n  // {\n  //   \"xkey\": xKey value,\n  //   \"idKey value\": yKey value\n  // }\n\n  // This reduce function will yield an object with x values as keys / data units as values\n  // we will use the values of this object\n  const fData = data.reduce((keyObject, entry) => {\n    if (!keyObject[entry[xKey]]) {\n      keyObject[entry[xKey]] = {\n        date: convertToTime({\n          timeString: entry[xKey],\n          dateFormat\n        }),\n        [entry[idKey]]: parseFloat(entry[yKey])\n      };\n    } else {\n      keyObject[entry[xKey]] = {\n        ...keyObject[entry[xKey]],\n        [entry[idKey]]: parseFloat(entry[yKey])\n      };\n    }\n    return keyObject;\n  }, {});\n\n  return {\n    uniqueKeys,\n    fData: Object.values(fData)\n  };\n}\n\nfunction getInterpolateFunction(colorScheme: string) {\n  const fnName = `interpolate${\n    colorScheme[0].toUpperCase() + colorScheme.slice(1)\n  }`;\n  return d3ScaleChromatic[fnName];\n}\n\nexport const getColors = function ({\n  steps,\n  colorScheme = 'viridis'\n}: {\n  steps: number;\n  colorScheme: string;\n}) {\n  const colorFn = getInterpolateFunction(colorScheme);\n\n  return new Array(steps).fill(0).map((e, idx) => colorFn(idx / steps));\n};\n\nexport function getNumForChart(x?: number) {\n  if (x === undefined || isNaN(x)) return 'n/a';\n  if (x === 0) return '0';\n  // Between 0.001 and 1000 just round.\n  if (Math.abs(x) < 1000 && Math.abs(x) >= 0.001) return round(x, 3).toString();\n  return formatAsScientificNotation(x);\n}\n","/**\n * Rounds a number to a specified amount of decimals.\n *\n * @param {number} value The value to round\n * @param {number} decimals The number of decimals to keep. Default to 2\n */\nexport function round(value: number, decimals = 2) {\n  return Math.round(value * Math.pow(10, decimals)) / Math.pow(10, decimals);\n}\n\nexport function shortenLargeNumber(value: number, decimals = 2) {\n  if (value / 1e9 >= 1) {\n    return {\n      num: round(value / 1e9, decimals),\n      unit: 'B'\n    };\n  } else if (value / 1e6 >= 1) {\n    return {\n      num: round(value / 1e6, decimals),\n      unit: 'M'\n    };\n  } else if (value / 1e3 >= 1) {\n    return {\n      num: round(value / 1e3, decimals),\n      unit: 'K'\n    };\n  }\n  return {\n    num: value,\n    unit: ''\n  };\n}\n\ninterface FormatThousandsOptions {\n  decimals?: number;\n  separator?: string;\n  forceDecimals?: boolean;\n  shorten?: boolean;\n}\n\n/**\n * Adds a separator every 3 digits and rounds the number.\n *\n * @param {number} num The number to format.\n * @param {object} options Options for the formatting.\n * @param {number} options.decimals Amount of decimals to keep. (Default 2)\n * @param {string} options.separator Separator to use. (Default ,)\n * @param {boolean} options.forceDecimals Force the existence of decimal. (Default false)\n *                  Eg: Using 2 decimals and force `true` would result:\n *                  formatThousands(1 /2, { forceDecimals: true }) => 0.50\n * @param {boolean} options.shorten Shorten large numbers. (Default false)\n *                  Shortening is done for millions and billions.\n *                  formatThousands(10000000, { shorten: true }) => 10M\n *\n * @example\n * formatThousands(1)               1\n * formatThousands(1000)            1,000\n * formatThousands(10000000)        10,000,000\n * formatThousands(1/3)             0.33\n * formatThousands(100000/3)        33,333.33\n * formatThousands()                --\n * formatThousands('asdasdas')      --\n * formatThousands(1/2, { decimals: 0 })                        1\n * formatThousands(1/2, { decimals: 0, forceDecimals: true})    1\n * formatThousands(1/2, { decimals: 5 })                        0.5\n * formatThousands(1/2, { decimals: 5, forceDecimals: true})    0.50000\n *\n */\nexport function formatThousands(num: number, options?: FormatThousandsOptions) {\n  const opts = {\n    decimals: 2,\n    separator: ',',\n    forceDecimals: false,\n    shorten: false,\n    ...options\n  };\n\n  // isNaN(null) === true\n  if (isNaN(num) || (!num && num !== 0)) {\n    return '--';\n  }\n\n  const repeat = (char, length) => {\n    let str = '';\n    for (let i = 0; i < length; i++) str += char + '';\n    return str;\n  };\n\n  const sign = num < 0 ? '-' : '';\n  const absNum = Math.abs(num);\n\n  let [int, dec] = Number(round(absNum, opts.decimals)).toString().split('.');\n\n  let largeNumUnit = '';\n  if (opts.shorten) {\n    const { num, unit } = shortenLargeNumber(Number(int), 0);\n    int = num.toString();\n    largeNumUnit = unit;\n  }\n\n  // Space the integer part of the number.\n  int = int.replace(/\\B(?=(\\d{3})+(?!\\d))/g, opts.separator);\n  // Round the decimals.\n  dec = (dec || '').substring(0, opts.decimals);\n  // Add decimals if forced.\n  dec = opts.forceDecimals\n    ? `${dec}${repeat(0, opts.decimals - dec.length)}`\n    : dec;\n\n  return dec !== ''\n    ? `${sign}${int}.${dec} ${largeNumUnit}`\n    : `${sign}${int} ${largeNumUnit}`;\n}\n\n/**\n * Adds leading 0 until reaching length.\n *\n * @param {int} num The number to pad.\n * @param {int} length The desired length. Default to 2\n *\n * @returns string\n */\nexport function zeroPad(num: number, length = 2) {\n  const prefix = num < 0 ? '-' : '';\n\n  const abdsNum = Math.abs(num);\n  const wholeNum = Math.floor(abdsNum);\n  const padLength = Math.max(length - String(wholeNum).length, 0);\n\n  const pads = new Array(padLength + 1).join('0');\n  return prefix + pads + abdsNum;\n}\n\nexport function formatAsScientificNotation(num: number, decimals = 2) {\n  if (!isFinite(num)) return `${Math.sign(num) === -1 ? '-' : ''}∞`;\n\n  const [coefficient, exponent] = num\n  .toExponential()\n  .split('e')\n  .map((item) => Number(item));\n\n  const sups = '⁰¹²³⁴⁵⁶⁷⁸⁹';\n  const exponentSup = Math.abs(exponent)\n    .toString()\n    .split('')\n    .map((v) => sups[v])\n    .join('');\n  \n  const sign = exponent < 0 ? '⁻':'';\n\n  return `${round(coefficient, decimals)}x10${sign}${exponentSup}`;\n}\n","export const chartMinHeight = 200;\nexport const chartMaxHeight = 500;\nexport const chartAspectRatio = 1.77; // 16:9\nexport const defaultMargin = {\n  top: 20,\n  right: 30,\n  left: 20,\n  bottom: 20\n};\n\nexport const highlightColorThemeValue = 'color.info-300a';\nexport const highlightColor = 'rgba(46, 134, 171, 0.32)';\n\nexport const fileExtensionRegex = /(?:\\.([^.]+))?$/;\nexport const legendWidth = 700;\n\nexport const brushHeight = 50;\n\nexport const brushRelatedConfigs = {\n  with: {\n    xAxisHeight: 50,\n    labelOffset: -16\n  },\n  without: {\n    xAxisHeight: 30,\n    labelOffset: -5\n  }\n};\n\nexport const chartYAxisWidth = 80;\nexport const chartLabelOffset = 8;\n","import React, { useState, useMemo, useEffect, forwardRef } from 'react';\nimport styled from 'styled-components';\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  Tooltip,\n  CartesianGrid,\n  Label,\n  ResponsiveContainer,\n  ReferenceArea,\n  Legend,\n  Curve,\n  Customized\n} from 'recharts';\n\nimport TooltipComponent from './tooltip';\nimport AltTitle from './alt-title';\nimport { LegendComponent, ReferenceLegendComponent } from './legend';\nimport {\n  getColors,\n  timeFormatter,\n  convertToTime,\n  getNumForChart\n} from './utils';\nimport {\n  chartMinHeight,\n  chartMaxHeight,\n  chartAspectRatio,\n  defaultMargin,\n  highlightColor,\n  legendWidth,\n  brushRelatedConfigs,\n  brushHeight,\n  chartYAxisWidth,\n  chartLabelOffset\n} from './constant';\nimport { ChartWrapperRef } from './analysis/utils';\nimport BrushCustom from './analysis/brush';\nimport { useMediaQuery } from '$utils/use-media-query';\n\nconst LineChartWithFont = styled(LineChart)`\n  font-size: 0.8rem;\n`;\n\nconst ChartWrapper = styled.div`\n  width: 100%;\n  grid-column: 1/-1;\n\n  .label-y {\n    text-anchor: middle;\n  }\n`;\n\nconst BrushContainer = styled.div`\n  width: 100%;\n  position: relative;\n  border: 1px solid #efefef;\n  border-radius: 0.25rem;\n`;\nexport interface CommonLineChartProps {\n  altTitle: string;\n  altDesc: string;\n  dateFormat: string;\n  colors?: string[];\n  colorScheme?: string;\n  renderLegend?: boolean;\n  renderBrush?: boolean;\n  xAxisLabel?: string;\n  yAxisLabel?: string;\n  highlightStart?: string;\n  highlightEnd?: string;\n  highlightLabel?: string;\n  uniqueKeys: UniqueKeyUnit[];\n  availableDomain?: [Date, Date];\n  brushRange?: [Date, Date];\n  onBrushRangeChange?: (range: [Date, Date]) => void;\n}\n\nexport interface UniqueKeyUnit {\n  label: string;\n  value: string;\n  active: boolean;\n  color?: string;\n}\n\ninterface RLineChartProps extends CommonLineChartProps {\n  chartData: (Record<string, number | string> & { date: number })[];\n  syncId?: string;\n}\n\nfunction CustomCursor(props) {\n  // work around to disable cursor line when there is no matching index found\n  // eslint-disable-next-line react/prop-types\n  if (props.payloadIndex < 0) return null;\n  return <Curve {...props} />;\n}\n\nexport default forwardRef<ChartWrapperRef, RLineChartProps>(\n  function RLineChart(props, ref) {\n    const {\n      chartData,\n      uniqueKeys,\n      colors,\n      colorScheme = 'viridis',\n      dateFormat,\n      altTitle,\n      altDesc,\n      renderLegend = false,\n      renderBrush = false,\n      syncId,\n      highlightStart,\n      highlightEnd,\n      highlightLabel,\n      xAxisLabel,\n      yAxisLabel,\n      availableDomain,\n      brushRange,\n      onBrushRangeChange\n    } = props;\n\n    const [chartMargin, setChartMargin] = useState(defaultMargin);\n    const { isMediumUp } = useMediaQuery();\n\n    useEffect(() => {\n      if (!isMediumUp) {\n        setChartMargin({\n          ...defaultMargin,\n          left: 0\n        });\n      }\n    }, [isMediumUp]);\n\n    const lineColors = useMemo(() => {\n      return colors\n        ? colors\n        : getColors({ steps: uniqueKeys.length, colorScheme });\n    }, [uniqueKeys, colorScheme, colors]);\n\n    const uniqueKeysWithColors = useMemo(() => {\n      return uniqueKeys.map((e, idx) => ({\n        ...e,\n        color: lineColors[idx]\n      }));\n    }, [uniqueKeys, lineColors]);\n\n    const renderHighlight = !!(highlightStart ?? highlightEnd);\n\n    const xAxisDomain = useMemo(() => {\n      if (!renderBrush || !brushRange) return null;\n      return [+brushRange[0], +brushRange[1]];\n    }, [renderBrush, brushRange]);\n\n    const brushXAxisDomain = useMemo(() => {\n      if (!renderBrush || !availableDomain) return null;\n      return [+availableDomain[0], +availableDomain[1]];\n    }, [renderBrush, availableDomain]);\n\n    // Generate fake values before and after data range in order for recharts to show ticks - see  - needed because https://github.com/recharts/recharts/issues/2126\n    const chartDataWithFakeValues = useMemo(() => {\n      if (!renderBrush || !availableDomain || chartData.length <= 1) return chartData;\n      const firstDate = chartData[0].date;\n      const lastDate = chartData[chartData.length - 1].date;\n      const interval = chartData[1].date - firstDate;\n      let currentFakeDate = firstDate;\n      let prependValues: { date: number }[] = [];\n      while (currentFakeDate > +availableDomain[0]) {\n        currentFakeDate -= interval;\n        prependValues = [{ date: currentFakeDate }, ...prependValues];\n      }\n      currentFakeDate = lastDate;\n      let appendValues: { date: number }[] = [];\n      while (currentFakeDate < +availableDomain[1]) {\n        currentFakeDate += interval;\n        appendValues = [...appendValues, { date: currentFakeDate }];\n      }\n      return [...prependValues, ...chartData, ...appendValues];\n    }, [renderBrush, chartData, availableDomain]);\n\n    // This is a hack to manually compute xAxis interval - needed because https://github.com/recharts/recharts/issues/2126\n    const xAxisInterval = useMemo(() => {\n      if (!renderBrush || !brushRange) return null;\n      const numValuesInBrushRange = chartDataWithFakeValues.filter(\n        (d) => d.date > +brushRange[0] && d.date < +brushRange[1]\n      ).length;\n      return Math.round(numValuesInBrushRange / 5);\n    }, [renderBrush, chartDataWithFakeValues, brushRange]);\n\n    return (\n      <ChartWrapper>\n        <ResponsiveContainer\n          aspect={chartAspectRatio}\n          debounce={500}\n          height='auto'\n          minHeight={chartMinHeight}\n          maxHeight={chartMaxHeight}\n        >\n          <LineChartWithFont\n            ref={ref as any}\n            data={chartDataWithFakeValues}\n            margin={chartMargin}\n            syncId={syncId}\n            syncMethod='value'\n          >\n            <AltTitle title={altTitle} desc={altDesc} />\n            <CartesianGrid stroke='#efefef' vertical={false} />\n            <XAxis\n              type='number'\n              scale='time'\n              domain={xAxisDomain ?? ['dataMin', 'dataMax']}\n              dataKey='date'\n              axisLine={false}\n              tickFormatter={(t) => timeFormatter(t, dateFormat)}\n              allowDataOverflow={true}\n              interval={xAxisInterval ?? 'preserveEnd'}\n              height={\n                renderBrush\n                  ? brushRelatedConfigs.with.xAxisHeight\n                  : brushRelatedConfigs.without.xAxisHeight\n              }\n            >\n              <Label\n                value={xAxisLabel}\n                offset={\n                  renderBrush\n                    ? brushRelatedConfigs.with.labelOffset\n                    : brushRelatedConfigs.without.labelOffset\n                }\n                position='bottom'\n              />\n            </XAxis>\n            <YAxis axisLine={false} width={chartYAxisWidth} domain={['auto', 'auto']} tickFormatter={(t) => getNumForChart(t)}>\n              <Label\n                className='label-y'\n                value={yAxisLabel}\n                angle={-90}\n                position='insideLeft'\n                offset={chartLabelOffset}\n              />\n            </YAxis>\n            {renderHighlight && (\n              <>\n                <ReferenceArea\n                  x1={convertToTime({\n                    timeString: highlightStart,\n                    dateFormat\n                  })}\n                  x2={convertToTime({\n                    timeString: highlightEnd,\n                    dateFormat\n                  })}\n                  fill={highlightColor}\n                  isFront={true}\n                />\n                {!!highlightLabel && (\n                  <Customized\n                    component={\n                      <ReferenceLegendComponent\n                        highlightLabel={highlightLabel}\n                      />\n                    }\n                  />\n                )}\n              </>\n            )}\n            {uniqueKeysWithColors.map((k) => {\n              return (\n                <Line\n                  type='linear'\n                  isAnimationActive={false}\n                  dot={false}\n                  activeDot={{ r: 3 }}\n                  key={`${k.value}-line`}\n                  dataKey={k.label}\n                  strokeWidth={2}\n                  stroke={k.active ? k.color : 'transparent'}\n                />\n              );\n            })}\n            <Tooltip\n              cursor={<CustomCursor />}\n              content={\n                <TooltipComponent\n                  dateFormat={dateFormat}\n                  uniqueKeys={uniqueKeysWithColors}\n                />\n              }\n            />\n\n            {renderLegend && uniqueKeysWithColors.length > 1 && (\n              <Legend\n                verticalAlign='bottom'\n                width={legendWidth}\n                wrapperStyle={{ width: '100%' }}\n                content={<LegendComponent />}\n              />\n            )}\n          </LineChartWithFont>\n        </ResponsiveContainer>\n        {renderBrush &&\n          brushXAxisDomain &&\n          availableDomain &&\n          brushRange &&\n          onBrushRangeChange && (\n            <BrushContainer>\n              <ResponsiveContainer\n                aspect={chartAspectRatio}\n                maxHeight={brushHeight}\n                width='100%'\n              >\n                <LineChart\n                  data={chartDataWithFakeValues}\n                  margin={{ top: 0, right: 0, bottom: 0, left: 0 }}\n                >\n                  <XAxis\n                    type='number'\n                    scale='time'\n                    domain={brushXAxisDomain}\n                    dataKey='date'\n                    hide={true}\n                  />\n                  {uniqueKeysWithColors.map((k) => {\n                    return (\n                      <Line\n                        type='linear'\n                        isAnimationActive={false}\n                        dot={false}\n                        activeDot={false}\n                        key={`${k.value}-line-brush_`}\n                        dataKey={k.label}\n                        strokeWidth={0.5}\n                        stroke={k.active ? k.color : 'transparent'}\n                      />\n                    );\n                  })}\n                </LineChart>\n              </ResponsiveContainer>\n              <BrushCustom\n                availableDomain={availableDomain}\n                brushRange={brushRange}\n                onBrushRangeChange={onBrushRangeChange}\n              />\n            </BrushContainer>\n          )}\n      </ChartWrapper>\n    );\n  }\n);\n","import React from 'react';\nimport styled from 'styled-components';\nimport { TooltipProps } from 'recharts';\nimport { glsp, themeVal } from '@devseed-ui/theme-provider';\n\nimport { timeFormatter, getNumForChart } from './utils';\nimport { UniqueKeyUnit } from '.';\n\ninterface TooltipComponentProps extends TooltipProps<number, string> {\n  dateFormat: string;\n  uniqueKeys: UniqueKeyUnit[];\n}\n\nconst TooltipWrapper = styled.div`\n  background-color: ${themeVal('color.surface')};\n  border: 1px solid ${themeVal('color.base-300a')};\n  padding: ${glsp(0.5)};\n  border-radius: ${themeVal('shape.rounded')};\n  font-size: 0.75rem;\n\n  > div:not(:last-child) {\n    padding-bottom: ${glsp(0.25)};\n  }\n`;\n\nexport const ListItem = styled.div`\n  width: 12px;\n  height: 12px;\n  background-color: ${(props) => props.color};\n  display: inline-block;\n  margin-right: ${glsp(0.2)};\n`;\n\nconst TooltipItem = styled(ListItem)`\n  margin-right: ${glsp(0.5)};\n`;\n\nexport default function TooltipComponent(props: TooltipComponentProps) {\n  const { dateFormat, uniqueKeys, active, payload, label } =\n    props;\n  \n  const inactiveKeys = uniqueKeys.filter((e) => !e.active).map((e) => e.label);\n  if (active && payload && payload.length) {\n    return (\n      <TooltipWrapper>\n        <div>\n          <strong>{timeFormatter(label, dateFormat)}</strong>\n        </div>\n        {uniqueKeys\n          .filter((key) =>!inactiveKeys.includes(key.label))\n          .map((key) => {\n            const point = payload[0].payload[key.label];\n            return (\n              <div key={`${key.label}-key`}>\n                <TooltipItem color={key.color} />\n                <strong>{key.label}</strong> {!!key.label.length && \":\" }{getNumForChart(point)}\n              </div>\n            );\n          })}\n      </TooltipWrapper>\n    );\n  }\n\n  return null;\n}\n","import React from 'react';\n\ninterface AltTitleProps {\n  title: string;\n  desc: string;\n}\n\nexport default function AltTitle(props: AltTitleProps) {\n  const { title, desc } = props;\n\n  return (\n    <>\n      <title>{title}</title>\n      <desc>{desc}</desc>\n    </>\n  );\n}\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { LegendProps } from 'recharts';\nimport { CategoricalChartProps } from 'recharts/types/chart/generateCategoricalChart';\nimport { glsp, themeVal } from '@devseed-ui/theme-provider';\n\nimport { ListItem } from './tooltip';\nimport { highlightColorThemeValue } from './constant';\ninterface ReferenceLegendComponentProps extends CategoricalChartProps {\n  highlightLabel: string;\n}\n\nexport const LegendWrapper = styled.ul<{ width?: number }>`\n  margin: 0 auto;\n  margin-top: ${glsp(0.75)};\n  text-align: center;\n  ${({ width }) =>\n    width &&\n    css`\n      max-width: ${width}px;\n    `};\n`;\n\nexport const LegendItem = styled.li`\n  display: inline-flex;\n  list-style: none;\n  margin-right: ${glsp(0.25)};\n  font-size: 0.75rem;\n  color: ${themeVal('color.base-400')};\n  * {\n    align-self: center;\n  }\n`;\n\nconst HighlightLabel = styled.text`\n  font-size: 0.75rem;\n  dominant-baseline: hanging;\n`;\n\nconst HighlightLabelMarker = styled.rect`\n  width: 12px;\n  height: 12px;\n  fill: ${themeVal(highlightColorThemeValue)};\n`;\n\nexport function ReferenceLegendComponent(props: ReferenceLegendComponentProps) {\n  const { width, highlightLabel } = props;\n\n  return (\n    <g transform={`translate(${width ? width - 100 : 0}, 0) rotate(0)`}>\n      <HighlightLabelMarker />\n      <HighlightLabel transform='translate(15, 0)'>\n        {highlightLabel}\n      </HighlightLabel>\n    </g>\n  );\n}\n\nexport function LegendComponent(props: LegendProps) {\n  const { payload, width } = props;\n\n  if (payload) {\n    return (\n      <LegendWrapper width={width}>\n        {payload.map((entry) => (\n          <LegendItem key={`item-${entry.value}`}>\n            <ListItem color={entry.color} />\n            {entry.value}\n          </LegendItem>\n        ))}\n      </LegendWrapper>\n    );\n  }\n\n  return null;\n}\n","import React, { useCallback } from 'react';\nimport styled from 'styled-components';\nimport { brushHeight } from '../constant';\nimport useBrush from './useBrush';\n\nconst BrushWrapper = styled.div`\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n`;\n\nconst BrushContainer = styled.div<{ height: number }>`\n  position: absolute;\n  top: 0;\n  height: ${({ height }) => height}px;\n`;\n\nconst BrushComponent = styled.button`\n  position: absolute;\n  height: 100%;\n  padding: 0;\n  border: 1px solid rgb(110, 110, 110);\n`;\n\nconst BrushTraveller = styled(BrushComponent)`\n  width: 7px;\n  cursor: col-resize;\n  z-index: 1;\n  padding: 0;\n  background: rgb(110, 110, 110);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  &:after {\n    content: ' ';\n    border: 1px solid white;\n    opacity: 0.7;\n    width: 3px;\n    height: 10px;\n    display: block;\n    border-top-width: 0;\n    border-bottom-width: 0;\n  }\n`;\n\nconst BrushTravellerStart = styled(BrushTraveller)`\n  left: -3px;\n`;\nconst BrushTravellerEnd = styled(BrushTraveller)`\n  right: -3px;\n`;\nconst BrushDrag = styled(BrushComponent)`\n  width: 100%;\n  cursor: move;\n  background: rgba(110, 110, 110, 0.3);\n`;\n\nexport interface BrushProps {\n  availableDomain: [Date, Date];\n  brushRange: [Date, Date];\n  onBrushRangeChange: (range: [Date, Date]) => void;\n}\n\nfunction Brush(props: BrushProps) {\n  const { availableDomain, brushRange, onBrushRangeChange } = props;\n\n  const changeCallback = useCallback(\n    (newSelection) => {\n      onBrushRangeChange(newSelection);\n    },\n    [onBrushRangeChange]\n  );\n\n  const { onBrushMouseDown, wrapperRef, containerStyles } = useBrush(\n    availableDomain,\n    brushRange,\n    changeCallback\n  );\n\n  return (\n    <BrushWrapper ref={wrapperRef}>\n      <BrushContainer\n        height={brushHeight}\n        onMouseDown={onBrushMouseDown}\n        style={containerStyles}\n      >\n        <BrushTravellerStart data-role='start' />\n        <BrushDrag data-role='drag' />\n        <BrushTravellerEnd data-role='end' />\n      </BrushContainer>\n    </BrushWrapper>\n  );\n}\n\nexport default Brush;\n","import { scaleTime } from 'd3';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useResizeObserver } from '$utils/use-resize-observer';\n\ntype DraggingState = 'start' | 'drag' | 'end';\n\n/**\n * \n * @param  {[Date, Date]} domain Overall domain for the brush\n * @param {[Date, Date]} currentValues Current start and end for the brush selection. This state needs to be managed from outside the hook.\n * @param {function} changeCallback Callback to call when user updated brush. Receives a [Date, Date] argument\n * @param {number} minBrushWidthPx Minimum Width of the brush allowed, defaults to 10\n * @returns {{ wrapperRef, onBrushMouseDown, containerStyles}} \n */\nfunction useBrush(\n  domain: [Date, Date],\n  currentValues: [Date, Date],\n  changeCallback: ([start, end]: [Date, Date]) => void,\n  minBrushWidthPx = 10\n) {\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const [dragging, setDragging] = useState<DraggingState | null>(null);\n  const initialOffsetX = useRef(0);\n\n  const wrapperWidth = useResizeObserver(wrapperRef, { initialWidth: 300 });\n \n  const scale = useMemo(() => {\n    return scaleTime()\n      .domain(domain)\n      .range([0, wrapperWidth]);\n  }, [domain, wrapperWidth]);\n\n  const brushX = useMemo(() => {\n    return scale(currentValues[0]);\n  }, [scale, currentValues]);\n\n  const brushWidth = useMemo(() => {\n    return scale(currentValues[1]) - scale(currentValues[0]);\n  }, [scale, currentValues]);\n\n  const onBrushMouseDown = useCallback((e) => {\n    setDragging(e.target.dataset.role as DraggingState);\n  }, []);\n  const onBrushMouseUp = useCallback(() => {\n    setDragging(null);\n    initialOffsetX.current = 0;\n  }, []);\n  const onBrushMouseMove = useCallback(\n    (e) => {\n      if (!dragging) return;\n      const baseX = wrapperRef.current\n        ? wrapperRef.current.getBoundingClientRect().x\n        : 0;\n      const wrapperOffsetedX = e.clientX - baseX;\n\n      if (initialOffsetX.current === 0) {\n        initialOffsetX.current = e.offsetX;\n      }\n\n      let newStart = currentValues[0];\n      let newEnd = currentValues[1];\n\n      if (dragging === 'drag') {\n        const dragOffsetedX = wrapperOffsetedX - initialOffsetX.current;\n        // Check that drag is not going below or above range\n        if (dragOffsetedX <= 0) {\n          newStart = scale.invert(0);\n          newEnd = scale.invert(brushWidth);\n        } else if (dragOffsetedX + brushWidth > wrapperWidth) {\n          newEnd = scale.invert(wrapperWidth);\n          newStart = scale.invert(wrapperWidth - brushWidth);\n        } else {\n          newStart = scale.invert(dragOffsetedX);\n          newEnd = scale.invert(dragOffsetedX + brushWidth);\n        }\n      } else {\n        if (dragging === 'start') {\n          const currentEndX = scale(currentValues[1]);\n          newStart =\n            // Check that drag witdh stays below minBrushWidthPx\n            currentEndX - wrapperOffsetedX < minBrushWidthPx\n              ? currentValues[0]\n              : scale.invert(wrapperOffsetedX);\n        } else {\n          const currentStartX = scale(currentValues[0]);\n          newEnd =\n            // Check that drag witdh stays below minBrushWidthPx\n            wrapperOffsetedX - currentStartX < minBrushWidthPx\n              ? currentValues[1]\n              : scale.invert(wrapperOffsetedX);\n        }\n        // Check that drag start/end is not going below or above range\n        newStart = newStart < domain[0] ? domain[0] : newStart;\n        newEnd = newEnd > domain[1] ? domain[1] : newEnd;\n      }\n\n      changeCallback([newStart, newEnd]);\n    },\n    [\n      dragging,\n      changeCallback,\n      scale,\n      brushWidth,\n      currentValues,\n      domain,\n      minBrushWidthPx,\n      wrapperWidth\n    ]\n  );\n\n  useEffect(() => {\n    document.addEventListener('mouseup', onBrushMouseUp);\n    document.addEventListener('mousemove', onBrushMouseMove);\n    return () => {\n      document.removeEventListener('mouseup', onBrushMouseUp);\n      document.removeEventListener('mousemove', onBrushMouseMove);\n    };\n  }, [onBrushMouseUp, onBrushMouseMove]);\n\n  const containerStyles = useMemo(() => {\n    return {\n      left: `${brushX}px`,\n      width: `${brushWidth}px`,\n    };\n  }, [brushX, brushWidth]);\n\n  return {\n    wrapperRef,\n    onBrushMouseDown,\n    containerStyles\n  };\n}\n\nexport default useBrush;\n","import { MutableRefObject, useEffect, useState } from \"react\";\n\ninterface UseResizeObserverProps {\n  initialWidth?: number;\n}\n\nexport const useResizeObserver = (\n  ref: MutableRefObject<Element | null>,\n  { initialWidth }: UseResizeObserverProps = {}\n) => {\n  const [width, setWidth] = useState<number>(initialWidth ?? 0);\n\n  useEffect(() => {\n    const observeTarget = ref.current;\n    if (!observeTarget) return;\n\n    const resizeObserver = new ResizeObserver((entries) => {\n      entries.forEach((entry) => {\n        setWidth(entry.contentRect.width);\n      });\n    });\n\n    resizeObserver.observe(observeTarget);\n\n    return () => {\n      resizeObserver.unobserve(observeTarget);\n    };\n  }, [ref]);\n\n  return width;\n};","import { useEffect, useMemo } from 'react';\nimport { useTheme } from 'styled-components';\nimport useDimensions from 'react-cool-dimensions';\nimport { DevseedUIThemeMediaRanges } from '@devseed-ui/theme-provider';\nimport { getScrollbarWidth } from './use-scrollbar-width-css';\n\ninterface MediaBreakpointStatus {\n  current: keyof DevseedUIThemeMediaRanges;\n  isXsmallUp: boolean;\n  isXsmallOnly: boolean;\n  isXsmallDown: boolean;\n  isSmallUp: boolean;\n  isSmallOnly: boolean;\n  isSmallDown: boolean;\n  isMediumUp: boolean;\n  isMediumOnly: boolean;\n  isMediumDown: boolean;\n  isLargeUp: boolean;\n  isLargeOnly: boolean;\n  isLargeDown: boolean;\n  isXlargeUp: boolean;\n  isXlargeOnly: boolean;\n  isXlargeDown: boolean;\n}\n\n/**\n * Returns the current media query and a series of boolean values indicating\n * which media ranges are active.\n *\n * @returns object\n * {\n *  \"current\": String,\n *  \"isXsmallUp\": Boolean,\n *  \"isXsmallOnly\": Boolean,\n *  \"isXsmallDown\": Boolean,\n *  \"isSmallUp\": Boolean,\n *  \"isSmallOnly\": Boolean,\n *  \"isSmallDown\": Boolean,\n *  \"isMediumUp\": Boolean,\n *  \"isMediumOnly\": Boolean,\n *  \"isMediumDown\": Boolean,\n *  \"isLargeUp\": Boolean,\n *  \"isLargeOnly\": Boolean,\n *  \"isLargeDown\": Boolean,\n *  \"isXlargeUp\": Boolean,\n *  \"isXlargeOnly\": Boolean,\n *  \"isXlargeDown\": Boolean\n * }\n */\nexport function useMediaQuery() {\n  const theme = useTheme();\n\n  if (!theme.mediaRanges)\n    throw new Error('There are no media ranges defined in the theme');\n\n  const ranges = Object.entries(\n    theme.mediaRanges as Record<string, [number | null, number | null]>\n  );\n\n  // Create breakpoints from media ranges.\n  const breakpoints = useMemo(\n    () =>\n      ranges.reduce(\n        (acc, [breakpoint, [lowerBound]]) => ({\n          ...acc,\n          [breakpoint]: lowerBound ?? 0\n        }),\n        {}\n      ),\n    [ranges]\n  );\n\n  const {\n    observe,\n    currentBreakpoint,\n    width: calculatedWidth\n  } = useDimensions({\n    breakpoints,\n    updateOnBreakpointChange: true\n  });\n\n  useEffect(() => {\n    observe(document.body);\n  }, [observe]);\n\n  // Account for the scrollbar width because the css media queries will.\n  const scrollbarWidth = getScrollbarWidth();\n\n  // On first mount react-cool-dimension will return a width of 0, which breaks\n  // the media queries styles because there's a mismatch between the css media\n  // queries and the js.\n  const width =\n    calculatedWidth + scrollbarWidth ||\n    (typeof window !== 'undefined' ? window.innerWidth + scrollbarWidth : 0);\n\n  const rangeBooleans = useMemo(\n    () =>\n      ranges.reduce((acc, [rangeKey, bounds]) => {\n        const upper = `${rangeKey.charAt(0).toUpperCase()}${rangeKey.slice(1)}`;\n        const makeKey = (b: string) => `is${upper}${b}`;\n        let [lBound, uBound] = bounds;\n        lBound = lBound ?? -Infinity;\n        uBound = uBound ?? Infinity;\n\n        return {\n          ...acc,\n          [makeKey('Up')]: width >= lBound,\n          [makeKey('Only')]: width >= lBound && width <= uBound,\n          [makeKey('Down')]: width <= uBound\n        };\n      }, {}),\n    [ranges, width]\n  );\n\n  return useMemo(\n    () => ({\n      current: currentBreakpoint,\n      ...rangeBooleans\n    }),\n    [currentBreakpoint, rangeBooleans]\n  ) as MediaBreakpointStatus;\n}\n","import { useEffect } from 'react';\n\nlet scrollbarWidthCache;\nexport function getScrollbarWidth() {\n  if (scrollbarWidthCache !== undefined) {\n    return scrollbarWidthCache;\n  }\n\n  const el = document.createElement('div');\n  el.style.cssText = 'overflow:scroll; visibility:hidden; position:absolute;';\n  document.body.appendChild(el);\n  const width = el.offsetWidth - el.clientWidth;\n  el.remove();\n\n  scrollbarWidthCache = width;\n  return width;\n}\n\nexport function useScrollbarWidthAsCssVar(varName = '--scrollbar-width') {\n  useEffect(() => {\n    const width = getScrollbarWidth();\n    document.documentElement.style.setProperty(varName, width + 'px');\n\n    return () => {\n      document.documentElement.style.removeProperty(varName);\n    };\n  }, [varName]);\n}\n","import { useState, useCallback } from 'react';\n\n// React's api getDerivedStateFromError that we are using to throw an error in\n// BlockErrorBoundary doesn't catch async errors. To catch async errors we use\n// this workaround - it works if an error is thrown in useState hook. More in\n// this thread: https://github.com/facebook/react/issues/14981\nconst useAsyncError = () => {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [_, setError] = useState();\n  return useCallback(\n    (e:Error) => {\n      setError(() => {\n        throw e;\n      });\n    },\n    [setError]\n  );\n};\n\nexport default useAsyncError;","import React, { useRef } from 'react';\nimport {\n  flexRender,\n  getCoreRowModel,\n  useReactTable,\n  ColumnDef,\n  getSortedRowModel,\n  SortingState,\n  Row,\n  SortDirection\n} from '@tanstack/react-table';\nimport { useVirtual } from 'react-virtual';\nimport { Sheet2JSONOpts } from 'xlsx';\nimport {\n  CollecticonSortAsc,\n  CollecticonSortDesc,\n  CollecticonSortNone\n} from '@devseed-ui/collecticons';\nimport { Table } from '@devseed-ui/typography';\nimport styled from 'styled-components';\nimport { themeVal } from '@devseed-ui/theme-provider';\n\nimport useLoadFile from '$utils/use-load-file';\n\nexport interface ExcelOption {\n  sheetNumber?: number;\n  parseOption?: Sheet2JSONOpts;\n}\n\ninterface TablecomponentProps {\n  dataPath: string;\n  excelOption?: ExcelOption;\n  columnToSort?: string[];\n}\n\nexport const tableHeight = '400';\n\nconst PlaceHolderWrapper = styled.div`\n  display: flex;\n  height: ${tableHeight}px;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n`;\n\nconst TableWrapper = styled.div`\n  display: flex;\n  max-width: 100%;\n  max-height: ${tableHeight}px;\n  overflow: auto;\n`;\n\nconst StyledTable = styled(Table)`\n  thead {\n    position: sticky;\n    top: 0;\n    z-index: 1;\n    border-bottom: 2px solid ${themeVal('color.base-200')};\n    background: ${themeVal('color.surface')};\n    box-shadow: 0 0 0 1px ${themeVal('color.base-200a')};\n\n    th {\n      vertical-align: middle;\n    }\n\n    .th-inner {\n      display: flex;\n      min-width: 8rem;\n      gap: 0.5rem;\n      align-items: center;\n    }\n\n    button {\n      flex: 0 0 auto;\n    }\n  }\n`;\n\nexport default function TableComponent({\n  dataPath,\n  excelOption,\n  columnToSort\n}: TablecomponentProps) {\n  const tableContainerRef = useRef<HTMLDivElement>(null);\n\n  const { data, dataLoading, dataError } = useLoadFile(dataPath, excelOption);\n  const [sorting, setSorting] = React.useState<SortingState>([]);\n  const dataLoaded = !dataLoading && !dataError;\n\n  const columns: ColumnDef<object>[] = data.length\n    ? Object.keys(data[0]).map((key) => {\n        return {\n          accessorKey: key,\n          enableSorting: columnToSort?.includes(key) ? true : false\n        };\n      })\n    : [];\n\n  const table = useReactTable({\n    data,\n    columns,\n    state: {\n      sorting\n    },\n    onSortingChange: setSorting,\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel()\n  });\n\n  const { rows } = table.getRowModel();\n  const rowVirtualizer = useVirtual({\n    parentRef: tableContainerRef,\n    size: rows.length,\n    overscan: 50\n  });\n  const { virtualItems: virtualRows, totalSize } = rowVirtualizer;\n\n  const paddingTop = virtualRows.length > 0 ? virtualRows[0]?.start || 0 : 0;\n  const paddingBottom =\n    virtualRows.length > 0\n      ? totalSize - (virtualRows[virtualRows.length - 1]?.end || 0)\n      : 0;\n\n  return (\n    <>\n      {dataLoading && (\n        <PlaceHolderWrapper>\n          <p>Loading Data...</p>\n        </PlaceHolderWrapper>\n      )}\n      {dataError && (\n        <PlaceHolderWrapper>\n          <p>Something went wrong while loading the data. Please try later. </p>\n        </PlaceHolderWrapper>\n      )}\n      {dataLoaded && (\n        <TableWrapper ref={tableContainerRef}>\n          <StyledTable>\n            <thead>\n              {table.getHeaderGroups().map((headerGroup) => (\n                <tr key={headerGroup.id}>\n                  {headerGroup.headers.map((header) => (\n                    <th key={header.id} colSpan={header.colSpan}>\n                      <SortableTh\n                        isSortable={header.column.getCanSort()}\n                        sortDirection={header.column.getIsSorted()}\n                        onSortClick={header.column.getToggleSortingHandler()}\n                      >\n                        {flexRender(\n                          header.column.columnDef.header,\n                          header.getContext()\n                        )}\n                      </SortableTh>\n                    </th>\n                  ))}\n                </tr>\n              ))}\n            </thead>\n            <tbody>\n              {paddingTop > 0 && (\n                <tr>\n                  <td style={{ height: `${paddingTop}px` }} />\n                </tr>\n              )}\n              {virtualRows.map((virtualRow) => {\n                const row = rows[virtualRow.index] as Row<unknown>;\n                return (\n                  <tr key={row.id}>\n                    {row.getVisibleCells().map((cell) => {\n                      return (\n                        <td key={cell.id}>\n                          {flexRender(\n                            cell.column.columnDef.cell,\n                            cell.getContext()\n                          )}\n                        </td>\n                      );\n                    })}\n                  </tr>\n                );\n              })}\n              {paddingBottom > 0 && (\n                <tr>\n                  <td style={{ height: `${paddingBottom}px` }} />\n                </tr>\n              )}\n            </tbody>\n          </StyledTable>\n        </TableWrapper>\n      )}\n    </>\n  );\n}\n\nconst SortableLink = styled.a`\n  display: inline-flex;\n  gap: 0.25rem;\n  align-items: center;\n  transition: opacity 0.16s ease-in-out;\n\n  &,\n  &:visited {\n    color: inherit;\n    text-decoration: none;\n  }\n\n  &:hover {\n    opacity: 0.8;\n  }\n\n  svg {\n    flex-shrink: 0;\n  }\n`;\n\ninterface SortableThProps {\n  children: React.ReactNode;\n  isSortable: boolean;\n  sortDirection: false | SortDirection;\n  onSortClick: ((event: unknown) => void) | undefined;\n}\n\nfunction SortableTh(props: SortableThProps) {\n  const { children, isSortable, sortDirection, onSortClick } = props;\n\n  return (\n    <div className='th-inner'>\n      {isSortable ? (\n        <SortableLink\n          href='#'\n          onClick={(e) => {\n            e.preventDefault();\n            onSortClick?.(e);\n          }}\n        >\n          <span>{children}</span>\n          {sortDirection === 'asc' && (\n            <CollecticonSortAsc\n              meaningful={true}\n              title='Sorted in ascending order'\n            />\n          )}\n          {sortDirection === 'desc' && (\n            <CollecticonSortDesc\n              meaningful={true}\n              title='Sorted in descending order'\n            />\n          )}\n          {!sortDirection && (\n            <CollecticonSortNone\n              meaningful={true}\n              title={`Sort the rows with this column's value`}\n            />\n          )}\n        </SortableLink>\n      ) : (\n        children\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { ExcelOption } from '$components/common/table';\n\ntype FileExtension = 'xlsx' | 'xls' | 'json' | 'csv';\n\nconst useFileLoader = (fileName: string, excelOption?: ExcelOption) => {\n  const [data, setData] = useState<object[]>([]);\n  const [dataLoading, setLoading] = useState<boolean>(false);\n  const [dataError, setError] = useState<boolean>(false);\n\n  useEffect(() => {\n    const controller = new AbortController();\n    const { signal } = controller;\n    const loadData = async () => {\n      setLoading(true);\n\n      try {\n        // eslint-disable-next-line fp/no-mutating-methods\n        const extension: FileExtension = fileName\n          .split('.')\n          .pop()\n          ?.toLowerCase() as FileExtension;\n        switch (extension) {\n          case 'xlsx':\n          case 'xls': {\n            const { read, utils } = await import('xlsx');\n            const f = await (\n              await axios\n                .get(fileName, { responseType: 'blob', signal: signal })\n                .then((response) => response.data)\n            ).arrayBuffer();\n            const wb = read(f); // parse the array buffer\n            const sheetNumber = excelOption?.sheetNumber ?? 0;\n            const ws = wb.Sheets[wb.SheetNames[sheetNumber]]; // get the first sheet by default\n            const data = utils.sheet_to_json(\n              ws,\n              excelOption?.parseOption\n            ) as object[]; // generate objects\n            setData(data);\n            setLoading(false);\n            break;\n          }\n          case 'json': {\n            const { data } = await axios.get(fileName, { signal: signal });\n            setData(data);\n            setLoading(false);\n            break;\n          }\n          case 'csv': {\n            const { csvParse } = await import('d3');\n            const { data } = await axios.get(fileName, {\n              responseType: 'blob',\n              signal: signal\n            });\n            const csvData = await data\n              .text()\n              .then((csvStr) => csvParse(csvStr));\n            setData(csvData);\n            setLoading(false);\n            break;\n          }\n          default: {\n            throw new Error('Unsupported file extension.');\n          }\n        }\n      } catch (error) {\n        setData([]);\n\n        setLoading(false);\n        setError(true);\n      }\n    };\n\n    loadData();\n\n    return () => {\n      controller.abort();\n    };\n  }, [fileName, excelOption]);\n\n  return { data, dataLoading, dataError };\n};\n\nexport default useFileLoader;\n","import React from 'react';\nimport styled from 'styled-components';\nimport ReactCompareImage from 'react-compare-image';\nimport T from 'prop-types';\n\nimport { glsp, themeVal } from '@devseed-ui/theme-provider';\n\nexport const MediaCompare = styled.figure`\n  /* Style for plugin (react compare image) */\n  /* handle */\n  > div {\n    > div:nth-child(3) > div:nth-child(2) {\n      background-color: ${themeVal('color.primary')};\n      width: 3rem;\n      height: 3rem;\n    }\n    /* label */\n    > div:nth-child(4) > div:nth-child(1),\n    > div:nth-child(5) > div:nth-child(1) {\n      border-radius: ${themeVal('shape.rounded')};\n    }\n  }\n\n  /* stylelint-disable-next-line */\n  > *:not(:last-child) {\n    margin-bottom: ${glsp()};\n  }\n`;\n\nfunction CompareImage({\n  leftImageSrc,\n  leftImageAlt,\n  leftImageLabel,\n  rightImageSrc,\n  rightImageAlt,\n  rightImageLabel\n}) {\n  return (\n    <MediaCompare>\n      <ReactCompareImage\n        leftImage={leftImageSrc}\n        leftImageAlt={leftImageAlt}\n        leftImageLabel={leftImageLabel}\n        rightImage={rightImageSrc}\n        rightImageAlt={rightImageAlt}\n        rightImageLabel={rightImageLabel}\n      />\n    </MediaCompare>\n  );\n}\n\nCompareImage.propTypes = {\n  leftImageSrc: T.string.isRequired,\n  leftImageAlt: T.string.isRequired,\n  leftImageLabel: T.string,\n  rightImageSrc: T.string.isRequired,\n  rightImageAlt: T.string.isRequired,\n  rightImageLabel: T.string\n};\n\nexport default CompareImage;\n","import React, { useMemo, useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { ProjectionOptions } from 'veda';\n\nimport {\n  convertProjectionToMapbox,\n  projectionDefault,\n  validateProjectionBlockProps\n} from '../mapbox/map-options/utils';\nimport { BasemapId } from '../mapbox/map-options/basemaps';\n\nimport { utcString2userTzDate } from '$utils/date';\nimport MapboxMap, { MapboxMapProps } from '$components/common/mapbox';\nimport { validateRangeNum } from '$utils/utils';\nimport { HintedError } from '$utils/hinted-error';\n\nexport const mapHeight = '32rem';\nconst Carto = styled.div`\n  position: relative;\n  flex-grow: 1;\n  height: ${mapHeight};\n\n  ${MapboxMap} {\n    position: absolute;\n    inset: 0;\n  }\n`;\n\n// This global variable is used to give unique ID to mapbox container\nlet mapInstanceId = 0;\n\nconst lngValidator = validateRangeNum(-180, 180);\nconst latValidator = validateRangeNum(-90, 90);\n\nfunction validateBlockProps(props: MapBlockProps) {\n  const {\n    dateTime,\n    compareDateTime,\n    center,\n    zoom,\n    projectionId,\n    projectionCenter,\n    projectionParallels\n  } = props;\n\n  const requiredProperties = ['datasetId', 'layerId', 'dateTime'];\n  const missingMapProps = requiredProperties.filter(\n    (p) => props[p] === undefined\n  );\n\n  const missingError =\n    !!missingMapProps.length &&\n    `- Missing some properties: ${missingMapProps\n      .map((p) => `[${p}]`)\n      .join(', ')}`;\n\n  const dateError =\n    dateTime &&\n    isNaN(utcString2userTzDate(dateTime).getTime()) &&\n    '- Invalid dateTime. Use YYYY-MM-DD format';\n\n  // center is not required, but if provided must be in the correct range.\n  const centerError =\n    center &&\n    (!lngValidator(center[0]) || !latValidator(center[1])) &&\n    '- Invalid center. Use [longitude, latitude].';\n\n  // zoom is not required, but if provided must be in the correct range.\n  const zoomError = zoom && (isNaN(zoom) || zoom < 0);\n  ('- Invalid zoom. Use number greater than 0');\n\n  const compareDateError =\n    compareDateTime &&\n    isNaN(utcString2userTzDate(compareDateTime).getTime()) &&\n    '- Invalid compareDateTime. Use YYYY-MM-DD format';\n\n  const projectionErrors = validateProjectionBlockProps({\n    id: projectionId,\n    center: projectionCenter,\n    parallels: projectionParallels\n  });\n\n  return [\n    missingError,\n    dateError,\n    zoomError,\n    centerError,\n    compareDateError,\n    ...projectionErrors\n  ].filter(Boolean) as string[];\n}\n\ninterface MapBlockProps extends Pick<MapboxMapProps, 'datasetId' | 'layerId'> {\n  dateTime?: string;\n  compareDateTime?: string;\n  center?: [number, number];\n  zoom?: number;\n  compareLabel?: string;\n  projectionId?: ProjectionOptions['id'];\n  projectionCenter?: ProjectionOptions['center'];\n  projectionParallels?: ProjectionOptions['parallels'];\n  allowProjectionChange?: boolean;\n  basemapId?: BasemapId;\n}\n\nfunction MapBlock(props: MapBlockProps) {\n  const generatedId = useMemo(() => `map-${++mapInstanceId}`, []);\n\n  const {\n    datasetId,\n    layerId,\n    dateTime,\n    compareDateTime,\n    compareLabel,\n    center,\n    zoom,\n    projectionId,\n    projectionCenter,\n    projectionParallels,\n    allowProjectionChange,\n    basemapId\n  } = props;\n\n  const errors = validateBlockProps(props);\n\n  if (errors.length) {\n    throw new HintedError('Malformed Map Block', errors);\n  }\n\n  const selectedDatetime = dateTime\n    ? utcString2userTzDate(dateTime)\n    : undefined;\n  const selectedCompareDatetime = compareDateTime\n    ? utcString2userTzDate(compareDateTime)\n    : undefined;\n\n  const projectionStart = useMemo(() => {\n    if (projectionId) {\n      // Ensure that the default center and parallels are used if none are\n      // provided.\n      const projection = convertProjectionToMapbox({\n        id: projectionId,\n        center: projectionCenter,\n        parallels: projectionParallels\n      });\n      return {\n        ...projection,\n        id: projectionId\n      };\n    } else {\n      return projectionDefault;\n    }\n  }, [projectionId, projectionCenter, projectionParallels]);\n\n  const [projection, setProjection] = useState(projectionStart);\n\n  useEffect(() => {\n    setProjection(projectionStart);\n  }, [projectionStart]);\n\n  const [mapBasemapId, setMapBasemapId] = useState(basemapId);\n\n  useEffect(() => {\n    if (!basemapId) return;\n\n    setMapBasemapId(basemapId);\n  }, [basemapId]);\n\n  return (\n    <Carto>\n      <MapboxMap\n        id={generatedId}\n        datasetId={datasetId}\n        layerId={layerId}\n        date={selectedDatetime}\n        isComparing={!!selectedCompareDatetime}\n        compareDate={selectedCompareDatetime}\n        compareLabel={compareLabel}\n        initialPosition={\n          center ? { lng: center[0], lat: center[1], zoom } : undefined\n        }\n        cooperativeGestures\n        projection={projection}\n        onProjectionChange={allowProjectionChange ? setProjection : undefined}\n        basemapStyleId={mapBasemapId}\n        onBasemapStyleIdChange={setMapBasemapId}\n        withScale\n      />\n    </Carto>\n  );\n}\n\nexport default MapBlock;\n","import React, {\n  MutableRefObject,\n  ReactNode,\n  forwardRef,\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useMemo,\n  useRef,\n  useState\n} from 'react';\nimport styled from 'styled-components';\nimport { Map as MapboxMap, MapboxOptions } from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport CompareMbGL from 'mapbox-gl-compare';\nimport 'mapbox-gl-compare/dist/mapbox-gl-compare.css';\n// Avoid error: node_modules/date-fns/esm/index.js does not export 'default'\nimport * as dateFns from 'date-fns';\nimport {\n  CollecticonCircleXmark,\n  CollecticonChevronRightSmall,\n  CollecticonChevronLeftSmall,\n  iconDataURI\n} from '@devseed-ui/collecticons';\nimport { themeVal } from '@devseed-ui/theme-provider';\nimport { DatasetDatumFnResolverBag, ProjectionOptions } from 'veda';\n\nimport { AoiChangeListenerOverload, AoiState } from '../aoi/types';\nimport { getLayerComponent, resolveConfigFunctions } from './layers/utils';\nimport { SimpleMap } from './map';\nimport MapMessage from './map-message';\nimport { LayerLegendContainer, LayerLegend } from './layer-legend';\nimport { useBasemap } from './map-options/use-basemap';\nimport { BasemapId, DEFAULT_MAP_STYLE_URL } from './map-options/basemaps';\nimport { ExtendedStyle, Styles } from './layers/styles';\nimport { Basemap } from './layers/basemap';\nimport { formatCompareDate, formatSingleDate } from './utils';\nimport { MapLoading } from '$components/common/loading-skeleton';\nimport { useDatasetAsyncLayer } from '$context/layer-data';\nimport {\n  ActionStatus,\n  S_FAILED,\n  S_IDLE,\n  S_LOADING,\n  S_SUCCEEDED\n} from '$utils/status';\nimport { calcFeatCollArea } from '$components/common/aoi/utils';\n\nconst chevronRightURI = () =>\n  iconDataURI(CollecticonChevronRightSmall, {\n    color: 'white'\n  });\n\nconst chevronLeftURI = () =>\n  iconDataURI(CollecticonChevronLeftSmall, {\n    color: 'white'\n  });\n\nconst MapsContainer = styled.div`\n  position: relative;\n\n  .mapboxgl-compare .compare-swiper-vertical {\n    background: ${themeVal('color.primary')};\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    &::before,\n    &::after {\n      display: inline-block;\n      content: '';\n      background-repeat: no-repeat;\n      background-size: 1rem 1rem;\n      width: 1rem;\n      height: 1rem;\n    }\n\n    &::before {\n      background-image: url('${chevronLeftURI()}');\n    }\n    &::after {\n      background-image: url('${chevronRightURI()}');\n    }\n  }\n`;\n\nconst mapOptions: Partial<MapboxOptions> = {\n  style: DEFAULT_MAP_STYLE_URL,\n  logoPosition: 'bottom-left',\n  trackResize: true,\n  pitchWithRotate: false,\n  dragRotate: false,\n  zoom: 1\n};\n\nconst getMapPositionOptions = (position) => {\n  const opts = {} as Pick<typeof mapOptions, 'center' | 'zoom'>;\n  if (position?.lng !== undefined && position?.lat !== undefined) {\n    opts.center = [position.lng, position.lat];\n  }\n\n  if (position?.zoom) {\n    opts.zoom = position.zoom;\n  }\n\n  return opts;\n};\n\nfunction MapboxMapComponent(\n  props: MapboxMapProps,\n  ref: MutableRefObject<MapboxMapRef>\n) {\n  /* eslint-disable react/prop-types */\n  const {\n    className,\n    id,\n    as,\n    datasetId,\n    layerId,\n    date,\n    compareDate,\n    compareLabel,\n    isComparing,\n    cooperativeGestures,\n    onPositionChange,\n    initialPosition,\n    withGeocoder,\n    withScale,\n    aoi,\n    onAoiChange,\n    projection,\n    onProjectionChange,\n    basemapStyleId,\n    onBasemapStyleIdChange,\n    isDatasetLayerHidden,\n    onStyleChange\n  } = props;\n  /* eslint-enable react/prop-types */\n\n  const mapContainer = useRef<HTMLDivElement>(null);\n  const mapRef = useRef<MapboxMap | null>(null);\n\n  const mapCompareContainer = useRef<HTMLDivElement>(null);\n  const mapCompareRef = useRef<MapboxMap>(null);\n\n  const [isMapLoaded, setMapLoaded] = useState(false);\n  const [isMapCompareLoaded, setMapCompareLoaded] = useState(false);\n\n  const { labelsOption, boundariesOption, onOptionChange } = useBasemap();\n\n  // This baseLayerStatus is for BaseLayerComponent\n  // ex. RasterTimeSeries uses this variable to track the status of\n  // registering mosaic.\n  const [baseLayerStatus, setBaseLayerStatus] = useState<ActionStatus>(S_IDLE);\n\n  const onBaseLayerStatusChange = useCallback(\n    ({ status }) => setBaseLayerStatus(status),\n    []\n  );\n  const [compareLayerStatus, setCompareLayerStatus] =\n    useState<ActionStatus>(S_IDLE);\n  const onCompareLayerStatusChange = useCallback(\n    (status) => setCompareLayerStatus(status),\n    []\n  );\n\n  // Add ref control operations to allow map to be controlled by the parent.\n  useImperativeHandle(ref, () => ({\n    resize: () => {\n      mapRef.current?.resize();\n      mapCompareRef.current?.resize();\n    },\n    instance: mapRef.current,\n    compareInstance: mapCompareRef.current\n  }));\n\n  const { baseLayer, compareLayer } = useDatasetAsyncLayer(datasetId, layerId);\n\n  const shouldRenderCompare = isMapLoaded && isComparing;\n\n  // Compare control\n  useEffect(() => {\n    if (!isMapLoaded || !isComparing || !isMapCompareLoaded) return;\n\n    const compareControl = new CompareMbGL(\n      mapRef.current,\n      mapCompareRef.current,\n      `#${id ?? 'mapbox-container'}`,\n      {\n        mousemove: false,\n        orientation: 'vertical'\n      }\n    );\n\n    return () => {\n      compareControl.remove();\n    };\n  }, [id, isComparing, isMapCompareLoaded, isMapLoaded]);\n\n  // Some properties defined in the dataset layer config may be functions that\n  // need to be resolved before rendering them. These functions accept data to\n  // return the correct value.\n  const resolverBag = useMemo<DatasetDatumFnResolverBag>(\n    () => ({ datetime: date, compareDatetime: compareDate, dateFns }),\n    [date, compareDate]\n  );\n\n  // Resolve data needed for the base layer once the layer is loaded\n  const [baseLayerResolvedData, BaseLayerComponent] = useMemo(() => {\n    if (baseLayer?.status !== S_SUCCEEDED || !baseLayer.data)\n      return [null, null];\n\n    // Include access to raw data.\n    const bag = { ...resolverBag, raw: baseLayer.data };\n    const data = resolveConfigFunctions(baseLayer.data, bag);\n\n    return [data, getLayerComponent(!!data.timeseries, data.type)];\n  }, [baseLayer, resolverBag]);\n\n  // Resolve data needed for the compare layer once it is loaded.\n  const [compareLayerResolvedData, CompareLayerComponent] = useMemo(() => {\n    if (compareLayer?.status !== S_SUCCEEDED || !compareLayer.data)\n      return [null, null];\n\n    // Include access to raw data.\n    const bag = { ...resolverBag, raw: compareLayer.data };\n    const data = resolveConfigFunctions(compareLayer.data, bag);\n\n    return [data, getLayerComponent(!!data.timeseries, data.type)];\n  }, [compareLayer, resolverBag]);\n  \n  // Get the compare to date.\n  // The compare date is specified by the user.\n  // If no date is specified anywhere we just use the same.\n  const compareToDate = useMemo(() => {\n    const theDate = compareDate ?? date;\n    return theDate instanceof Date && !isNaN(theDate.getTime())\n      ? theDate\n      : null;\n  }, [compareDate, date]);\n\n  const baseTimeDensity = baseLayerResolvedData?.timeseries.timeDensity;\n  const compareTimeDensity = compareLayerResolvedData?.timeseries.timeDensity;\n\n  const computedCompareLabel = useMemo(() => {\n    // Use a provided label if it exist.\n    const providedLabel = compareLabel ?? compareLayerResolvedData?.mapLabel;\n    if (providedLabel) return providedLabel as string;\n\n    // Default to date comparison.\n    return date && compareToDate\n      ? formatCompareDate(\n          date,\n          compareToDate,\n          baseTimeDensity,\n          compareTimeDensity\n        )\n      : null;\n  }, [\n    compareLabel,\n    compareLayerResolvedData?.mapLabel,\n    date,\n    compareToDate,\n    baseTimeDensity,\n    compareTimeDensity\n  ]);\n  return (\n    <>\n      {/*\n        Normally we only need 1 loading which is centered. If we're comparing we\n        need to render a loading for each layer, but instead of centering them,\n        we show them on top of their respective map.\n      */}\n      {baseLayerStatus === S_LOADING && (\n        <MapLoading position={shouldRenderCompare ? 'left' : 'center'} />\n      )}\n      {shouldRenderCompare && compareLayerStatus === S_LOADING && (\n        <MapLoading position='right' />\n      )}\n\n      {/*\n        Normally we only need 1 error which is centered. If we're comparing we\n        need to render an error for each layer, but instead of centering them,\n        we show them on top of their respective map.\n      */}\n      <MapMessage\n        id='mosaic-base-fail-message'\n        active={baseLayerStatus === S_FAILED}\n        position={shouldRenderCompare ? 'left' : 'center'}\n        isInvalid\n      >\n        <CollecticonCircleXmark /> Failed to load layer {baseLayer?.data?.id}\n      </MapMessage>\n      <MapMessage\n        id='mosaic-compare-fail-message'\n        active={compareLayerStatus === S_FAILED}\n        position='right'\n        isInvalid\n      >\n        <CollecticonCircleXmark /> Failed to load compare layer{' '}\n        {compareLayer?.data?.id}\n      </MapMessage>\n\n      {/*\n        Map overlay element\n        Message shown when the map is is not in compare mode. It displays the\n        date being visualized if there is one.\n      */}\n      <MapMessage\n        id='single-map-message'\n        active={\n          !!(\n            !shouldRenderCompare &&\n            date &&\n            baseLayerResolvedData &&\n            baseLayerStatus !== S_FAILED\n          )\n        }\n      >\n        {date &&\n          formatSingleDate(date, baseLayerResolvedData?.timeseries.timeDensity)}\n      </MapMessage>\n\n      {/*\n        Map overlay element\n        Message shown when the map is in compare mode to indicate what's\n        being compared.\n        If the user provided an override value (compareLabel), use that.\n      */}\n      <MapMessage\n        id='compare-message'\n        active={\n          !!(\n            shouldRenderCompare &&\n            compareLayerResolvedData &&\n            compareLayerStatus !== S_FAILED\n          )\n        }\n      >\n        {computedCompareLabel}\n      </MapMessage>\n\n      {/*\n        Map overlay element\n        Message shown when the aoi is being used. The message shown depends on\n        what is being done to the AOI.\n        - No area defined\n        - Drawing area shape\n        - XXkm2\n      */}\n      <MapMessage id='aoi-status' active={!!aoi}>\n        <p>\n          {aoi?.drawing ? (\n            'Drawing area shape'\n          ) : !aoi?.featureCollection?.features.length ? (\n            'No area defined'\n          ) : (\n            <>\n              {calcFeatCollArea(aoi.featureCollection)} km<sup>2</sup> area\n            </>\n          )}\n        </p>\n      </MapMessage>\n\n      {/*\n        Map overlay element\n        Layer legend for the active layer.\n      */}\n      {baseLayerResolvedData?.legend && (\n        <LayerLegendContainer>\n          <LayerLegend\n            id={`base-${baseLayerResolvedData.id}`}\n            title={baseLayerResolvedData.name}\n            description={baseLayerResolvedData.description}\n            {...baseLayerResolvedData.legend}\n          />\n          {compareLayerResolvedData?.legend &&\n            isComparing &&\n            baseLayerResolvedData.id !== compareLayerResolvedData.id && (\n              <LayerLegend\n                id={`compare-${compareLayerResolvedData.id}`}\n                title={compareLayerResolvedData.name}\n                description={compareLayerResolvedData.description}\n                {...compareLayerResolvedData.legend}\n              />\n            )}\n        </LayerLegendContainer>\n      )}\n\n      {/*\n        Maps container\n      */}\n      <MapsContainer\n        as={as}\n        className={className}\n        id={id ?? 'mapbox-container'}\n      >\n        <Styles onStyleUpdate={onStyleChange}>\n          {/*\n        Each layer type is added to the map through a component. This component\n        has all the logic needed to add/update/remove the layer.\n        Which component to use will depend on the characteristics of the layer\n        and dataset.\n        The function getLayerComponent() should be used to get the correct\n        component.\n      */}\n          <Basemap\n            basemapStyleId={basemapStyleId}\n            labelsOption={labelsOption}\n            boundariesOption={boundariesOption}\n          />\n          {mapRef.current &&\n            isMapLoaded &&\n            baseLayerResolvedData &&\n            BaseLayerComponent && (\n              <BaseLayerComponent\n                id={`base-${baseLayerResolvedData.id}`}\n                stacApiEndpoint={baseLayerResolvedData.stacApiEndpoint}\n                tileApiEndpoint={baseLayerResolvedData.tileApiEndpoint}\n                assetUrlReplacements={baseLayerResolvedData.assetUrlReplacements}\n                stacCol={baseLayerResolvedData.stacCol}\n                mapInstance={mapRef.current}\n                isPositionSet={!!initialPosition}\n                date={date}\n                sourceParams={baseLayerResolvedData.sourceParams}\n                zoomExtent={baseLayerResolvedData.zoomExtent}\n                bounds={baseLayerResolvedData.bounds}\n                onStatusChange={onBaseLayerStatusChange}\n                isHidden={isDatasetLayerHidden}\n              />\n            )}\n          <SimpleMap\n            className='root'\n            mapRef={mapRef}\n            containerRef={mapContainer}\n            onLoad={() => setMapLoaded(true)}\n            onMoveEnd={onPositionChange}\n            mapOptions={{\n              ...mapOptions,\n              ...getMapPositionOptions(initialPosition),\n              cooperativeGestures\n            }}\n            withGeocoder={withGeocoder}\n            withScale={withScale}\n            aoi={aoi}\n            onAoiChange={onAoiChange}\n            projection={projection}\n            onProjectionChange={onProjectionChange}\n            basemapStyleId={basemapStyleId}\n            onBasemapStyleIdChange={onBasemapStyleIdChange}\n            labelsOption={labelsOption}\n            boundariesOption={boundariesOption}\n            onOptionChange={onOptionChange}\n          />\n        </Styles>\n\n        {shouldRenderCompare && (\n          <Styles onStyleUpdate={onStyleChange}>\n            {/*\n        Adding a layer to the comparison map is also done through a component,\n        which is this case targets a different map instance.\n      */}\n            <Basemap\n              basemapStyleId={basemapStyleId}\n              labelsOption={labelsOption}\n              boundariesOption={boundariesOption}\n            />\n            {mapCompareRef.current &&\n              isMapCompareLoaded &&\n              compareLayerResolvedData &&\n              CompareLayerComponent && (\n                <CompareLayerComponent\n                  id={`compare-${compareLayerResolvedData.id}`}\n                  stacCol={compareLayerResolvedData.stacCol}\n                  stacApiEndpoint={compareLayerResolvedData.stacApiEndpoint}\n                  tileApiEndpoint={compareLayerResolvedData.tileApiEndpoint}\n                  mapInstance={mapCompareRef.current}\n                  isPositionSet={!!initialPosition}\n                  date={compareToDate ?? undefined}\n                  sourceParams={compareLayerResolvedData.sourceParams}\n                  zoomExtent={compareLayerResolvedData.zoomExtent}\n                  bounds={compareLayerResolvedData.bounds}\n                  onStatusChange={onCompareLayerStatusChange}\n                  idSuffix='compare-suffix'\n                />\n              )}\n            <SimpleMap\n              mapRef={mapCompareRef}\n              containerRef={mapCompareContainer}\n              onLoad={() => setMapCompareLoaded(true)}\n              onUnmount={() => setMapCompareLoaded(false)}\n              mapOptions={{\n                ...mapOptions,\n                cooperativeGestures,\n                center: mapRef.current?.getCenter(),\n                zoom: mapRef.current?.getZoom()\n              }}\n              withGeocoder={withGeocoder}\n              withScale={withScale}\n              aoi={aoi}\n              onAoiChange={onAoiChange}\n              projection={projection}\n              onProjectionChange={onProjectionChange}\n              basemapStyleId={basemapStyleId}\n              onBasemapStyleIdChange={onBasemapStyleIdChange}\n              labelsOption={labelsOption}\n              boundariesOption={boundariesOption}\n              onOptionChange={onOptionChange}\n            />\n          </Styles>\n        )}\n      </MapsContainer>\n    </>\n  );\n}\n\ninterface MapPosition {\n  lng: number;\n  lat: number;\n  zoom: number;\n}\n\nexport interface MapboxMapProps {\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  as?: any;\n  className?: string;\n  id?: string;\n  datasetId?: string;\n  layerId?: string;\n  date?: Date;\n  compareDate?: Date;\n  compareLabel?: string;\n  isComparing?: boolean;\n  cooperativeGestures?: boolean;\n  initialPosition?: Partial<MapPosition>;\n  onPositionChange?: (\n    result: MapPosition & {\n      userInitiated: boolean;\n    }\n  ) => void;\n  withGeocoder?: boolean;\n  withScale?: boolean;\n  children?: ReactNode;\n  aoi?: AoiState;\n  onAoiChange?: AoiChangeListenerOverload;\n  projection?: ProjectionOptions;\n  onProjectionChange?: (projection: ProjectionOptions) => void;\n  basemapStyleId?: BasemapId;\n  onBasemapStyleIdChange?: (id: BasemapId) => void;\n  isDatasetLayerHidden?: boolean;\n  onStyleChange?: (style: ExtendedStyle) => void;\n}\n\nexport interface MapboxMapRef {\n  resize: () => void;\n  instance: MapboxMap | null;\n  compareInstance: MapboxMap | null;\n}\n\nconst MapboxMapComponentFwd = forwardRef<MapboxMapRef, MapboxMapProps>(\n  MapboxMapComponent\n);\n\n/**\n * Mapbox map component\n *\n * @param {string} id Id to apply to the map wrapper.\n *    Defaults to mapbox-container\n * @param {string} className Css class for styling\n */\nexport default styled(MapboxMapComponentFwd)`\n  /* Convert to styled-component: https://styled-components.com/docs/advanced#caveat */\n`;\n","import { FunctionComponent, useEffect } from 'react';\nimport { Feature } from 'geojson';\nimport { Map as MapboxMap } from 'mapbox-gl';\nimport { defaultsDeep, clamp } from 'lodash';\nimport axios, { Method } from 'axios';\nimport {\n  eachDayOfInterval,\n  eachMonthOfInterval,\n  eachYearOfInterval\n} from 'date-fns';\nimport { endOfDay, startOfDay } from 'date-fns';\nimport {\n  datasets,\n  DatasetLayer,\n  DatasetLayerCompareInternal,\n  DatasetLayerCompareSTAC,\n  DatasetDatumFn,\n  DatasetDatumFnResolverBag,\n  DatasetDatumReturnType,\n  DatasetLayerCompareNormalized,\n  DatasetLayerType\n} from 'veda';\nimport {\n  MapLayerRasterTimeseries,\n  MapLayerRasterTimeseriesProps,\n  StacFeature\n} from './raster-timeseries';\nimport {\n  MapLayerVectorTimeseries,\n  MapLayerVectorTimeseriesProps\n} from './vector-timeseries';\nimport {\n  MapLayerZarrTimeseries,\n  MapLayerZarrTimeseriesProps\n} from './zarr-timeseries';\nimport {\n  MapLayerCMRTimeseries,\n  MapLayerCMRTimeseriesProps\n} from './cmr-timeseries';\n\nimport { userTzDate2utcString, utcString2userTzDate } from '$utils/date';\nimport { AsyncDatasetLayer } from '$context/layer-data';\nimport { S_FAILED, S_IDLE, S_LOADING, S_SUCCEEDED } from '$utils/status';\nimport { HintedError } from '$utils/hinted-error';\n\nexport const getLayerComponent = (\n  isTimeseries: boolean,\n  layerType: DatasetLayerType\n): FunctionComponent<\n  | MapLayerRasterTimeseriesProps\n  | MapLayerVectorTimeseriesProps\n  | MapLayerZarrTimeseriesProps\n  | MapLayerCMRTimeseriesProps\n> | null => {\n  if (isTimeseries) {\n    if (layerType === 'raster') return MapLayerRasterTimeseries;\n    if (layerType === 'vector') return MapLayerVectorTimeseries;\n    if (layerType === 'zarr') return MapLayerZarrTimeseries;\n    if (layerType === 'cmr') return MapLayerCMRTimeseries;\n  }\n\n  return null;\n};\n\n/**\n * Returns the correct data for the compare layer depending on whether is a\n * layer from another dataset, or a STAC layer declared inline.\n *\n * @param layerData object The data for the current layer\n * @returns object\n */\nexport const getCompareLayerData = (\n  layerData: DatasetLayer | null\n): DatasetLayerCompareNormalized | null => {\n  if (!layerData?.compare) return null;\n  const { compare } = layerData;\n\n  /* eslint-disable-next-line prettier/prettier */\n  const compareInternal = compare as DatasetLayerCompareInternal;\n  const compareSTAC = compare as DatasetLayerCompareSTAC;\n\n  // If the stacCol property exists it is a layer to be loaded from STAC. In the\n  // case of a STAC layer defined inline the missing properties are inherited\n  // from the parent layer.\n  if (compareSTAC.stacCol) {\n    // Extract properties that need special handling, letting the other ones\n    // through.\n    const { stacCol, type, zoomExtent, sourceParams, ...passThroughProps } =\n      compareSTAC;\n\n    return {\n      id: stacCol,\n      stacCol,\n      type: type || layerData.type,\n      zoomExtent: zoomExtent ?? layerData.zoomExtent,\n      sourceParams: defaultsDeep({}, sourceParams, layerData.sourceParams),\n      ...passThroughProps\n    };\n  }\n\n  // When we're comparing against a layer from another dataset, that layer's\n  // properties are overridden with the ones provided in the compare object.\n  if (compareInternal.layerId) {\n    // Extract properties that need special handling, letting the other ones\n    // through.\n    const {\n      datasetId,\n      layerId,\n      zoomExtent,\n      sourceParams,\n      ...passThroughProps\n    } = compareInternal;\n\n    const errorHints: string[] = [];\n\n    const datasetData = datasets[datasetId]?.data;\n    if (!datasetData) {\n      // eslint-disable-next-line fp/no-mutating-methods\n      errorHints.push(`Dataset [${datasetId}] not found (compare.datasetId)`);\n    }\n\n    const otherLayer = datasetData?.layers.find((l) => l.id === layerId);\n    if (!otherLayer) {\n      // eslint-disable-next-line fp/no-mutating-methods\n      errorHints.push(\n        `Layer [${layerId}] not found in dataset [${datasetId}] (compare.layerId)`\n      );\n    }\n\n    if (!datasetData || !otherLayer) {\n      throw new HintedError(\n        `Malformed compare for layer: ${layerData.id}`,\n        errorHints\n      );\n    }\n\n    return {\n      id: otherLayer.id,\n      type: otherLayer.type,\n      name: otherLayer.name,\n      description: otherLayer.description,\n      legend: otherLayer.legend,\n      stacApiEndpoint: otherLayer.stacApiEndpoint,\n      tileApiEndpoint: otherLayer.tileApiEndpoint,\n      stacCol: otherLayer.stacCol,\n      zoomExtent: zoomExtent ?? otherLayer.zoomExtent,\n      sourceParams: defaultsDeep({}, sourceParams, otherLayer.sourceParams),\n      ...passThroughProps\n    };\n  }\n\n  throw new Error('Layer specified in compare was not found.');\n};\n\ntype Fn = (...args: any[]) => any;\n\ntype ObjResMap<T> = {\n  [K in keyof T]: Res<T[K]>;\n};\n\ntype Res<T> = T extends Fn\n  ? T extends DatasetDatumFn<DatasetDatumReturnType>\n    ? DatasetDatumReturnType\n    : never\n  : T extends any[]\n  ? Res<T[number]>[]\n  : T extends object\n  ? ObjResMap<T>\n  : T;\n\nexport function resolveConfigFunctions<T>(\n  datum: T,\n  bag: DatasetDatumFnResolverBag\n): Res<T>;\n/* eslint-disable-next-line no-redeclare */\nexport function resolveConfigFunctions<T extends any[]>(\n  datum: T,\n  bag: DatasetDatumFnResolverBag\n): Res<T[number]>[];\n/* eslint-disable-next-line no-redeclare */\nexport function resolveConfigFunctions(\n  datum: any,\n  bag: DatasetDatumFnResolverBag\n): any {\n  if (Array.isArray(datum)) {\n    return datum.map((v) => resolveConfigFunctions(v, bag));\n  }\n\n  if (datum != null && typeof datum === 'object') {\n    // Use for loop instead of reduce as it faster.\n    const ready = {};\n    for (const [k, v] of Object.entries(datum as object)) {\n      ready[k] = resolveConfigFunctions(v, bag);\n    }\n    return ready;\n  }\n\n  if (typeof datum === 'function') {\n    try {\n      return datum(bag);\n    } catch (error) {\n      /* eslint-disable-next-line no-console */\n      console.error(\n        'Failed to resolve function %s(%o) with error %s',\n        datum.name,\n        bag,\n        error.message\n      );\n      return null;\n    }\n  }\n\n  return datum;\n}\n\n/**\n * Checks the loading status of a layer taking into account the base layer and\n * the compare layer if any.\n * @param asyncLayer The async layer to check\n * @returns Coalesced status\n */\nexport function checkLayerLoadStatus(asyncLayer: AsyncDatasetLayer) {\n  const { baseLayer, compareLayer } = asyncLayer;\n\n  if (\n    baseLayer.status === S_SUCCEEDED &&\n    (!compareLayer || compareLayer.status === S_SUCCEEDED)\n  ) {\n    return S_SUCCEEDED;\n  }\n\n  if (\n    baseLayer.status === S_LOADING ||\n    (compareLayer && compareLayer.status === S_LOADING)\n  ) {\n    return S_LOADING;\n  }\n\n  if (\n    baseLayer.status === S_FAILED ||\n    (compareLayer && compareLayer.status === S_FAILED)\n  ) {\n    return S_FAILED;\n  }\n\n  return S_IDLE;\n}\n\ndeclare global {\n  interface Array<T> {\n    last: T;\n  }\n}\n\ntype AsyncDatasetLayerData<T extends 'baseLayer' | 'compareLayer'> = Exclude<\n  AsyncDatasetLayer[T],\n  null\n>['data'];\n\n/**\n * Resolves the temporal extend of the given Async Layer.\n * Uses the properties from the timeseries to generate the layer's full temporal\n * extent.\n *\n * @param layerData The Async layer data.\n * @returns Array of Dates\n */\nexport function resolveLayerTemporalExtent(\n  layerData:\n    | AsyncDatasetLayerData<'baseLayer'>\n    | AsyncDatasetLayerData<'compareLayer'>\n): Date[] | null {\n  if (!layerData?.timeseries) return null;\n\n  const { domain, isPeriodic, timeDensity } = layerData.timeseries;\n\n  if (!isPeriodic) return domain.map((d) => utcString2userTzDate(d));\n\n  if (timeDensity === 'year') {\n    return eachYearOfInterval({\n      start: utcString2userTzDate(domain[0]),\n      end: utcString2userTzDate(domain.last)\n    });\n  } else if (timeDensity === 'month') {\n    return eachMonthOfInterval({\n      start: utcString2userTzDate(domain[0]),\n      end: utcString2userTzDate(domain.last)\n    });\n  } else if (timeDensity === 'day') {\n    return eachDayOfInterval({\n      start: utcString2userTzDate(domain[0]),\n      end: utcString2userTzDate(domain.last)\n    });\n  }\n\n  throw new Error(\n    `Invalid time density [${timeDensity}] on layer [${layerData.id}]`\n  );\n}\n\n// There are cases when the data can't be displayed properly on low zoom levels.\n// In these cases instead of displaying the raster tiles, we display markers to\n// indicate whether or not there is data in a given location. When the user\n// crosses the marker threshold, if below the min zoom we have to request the\n// marker position, and if above we have to register a mosaic query. Since this\n// switching can happen several times, we cache the api response using the\n// request params as key.\nconst quickCache = new Map<string, any>();\ninterface RequestQuickCacheParams {\n  url: string;\n  method?: Method;\n  payload?: any;\n  controller: AbortController;\n}\nexport async function requestQuickCache({\n  url,\n  payload,\n  controller,\n  method = 'post'\n}: RequestQuickCacheParams) {\n  const key = `${method}:${url}${JSON.stringify(payload)}`;\n\n  // No cache found, make request.\n  if (!quickCache.has(key)) {\n    const response = await axios({\n      url,\n      method,\n      data: payload,\n      signal: controller.signal\n    });\n    quickCache.set(key, response.data);\n  }\n  return quickCache.get(key);\n}\n\n/**\n * Creates the appropriate filter object to send to STAC.\n *\n * @param {Date} date Date to request\n * @param {string} collection STAC collection to request\n * @returns Object\n */\nexport function getFilterPayload(date: Date, collection: string) {\n  return {\n    op: 'and',\n    args: [\n      {\n        op: '>=',\n        args: [{ property: 'datetime' }, userTzDate2utcString(startOfDay(date))]\n      },\n      {\n        op: '<=',\n        args: [{ property: 'datetime' }, userTzDate2utcString(endOfDay(date))]\n      },\n      {\n        op: 'eq',\n        args: [{ property: 'collection' }, collection]\n      }\n    ]\n  };\n}\n\nexport function getMergedBBox(features: StacFeature[]) {\n  const mergedBBox = [\n    Number.POSITIVE_INFINITY,\n    Number.POSITIVE_INFINITY,\n    Number.NEGATIVE_INFINITY,\n    Number.NEGATIVE_INFINITY\n  ];\n  return features.reduce(\n    (acc, feature) => [\n      feature.bbox[0] < acc[0] ? feature.bbox[0] : acc[0],\n      feature.bbox[1] < acc[1] ? feature.bbox[1] : acc[1],\n      feature.bbox[2] > acc[2] ? feature.bbox[2] : acc[2],\n      feature.bbox[3] > acc[3] ? feature.bbox[3] : acc[3]\n    ],\n    mergedBBox\n  ) as [number, number, number, number];\n}\n\nexport const FIT_BOUNDS_PADDING = 32;\n\ninterface LayerInteractionHookOptions {\n  layerId: string;\n  mapInstance: MapboxMap;\n  onClick: (features: Feature<any>[]) => void;\n}\nexport function useLayerInteraction({\n  layerId,\n  mapInstance,\n  onClick\n}: LayerInteractionHookOptions) {\n  useEffect(() => {\n    const onPointsClick = (e) => {\n      if (!e.features.length) return;\n      onClick(e.features);\n    };\n\n    const onPointsEnter = () => {\n      mapInstance.getCanvas().style.cursor = 'pointer';\n    };\n\n    const onPointsLeave = () => {\n      mapInstance.getCanvas().style.cursor = '';\n    };\n\n    mapInstance.on('click', layerId, onPointsClick);\n    mapInstance.on('mouseenter', layerId, onPointsEnter);\n    mapInstance.on('mouseleave', layerId, onPointsLeave);\n\n    return () => {\n      mapInstance.off('click', layerId, onPointsClick);\n      mapInstance.off('mouseenter', layerId, onPointsEnter);\n      mapInstance.off('mouseleave', layerId, onPointsLeave);\n    };\n  }, [layerId, mapInstance, onClick]);\n}\n\ntype OptionalBbox = number[] | undefined | null;\n\n/**\n * MapboxGL requires maxX value to be 180, minX -180, maxY 90, minY -90\n * While some of the datasets having bbox going above it.\n * @param bounds Bounding box to fit layer\n * @returns Boolean\n */\n\nfunction clampBbox(\n  bounds: [number, number, number, number]\n): [number, number, number, number] {\n  const [minX, minY, maxX, maxY] = bounds;\n  return [\n    clamp(minX, -180, 180),\n    clamp(minY, -90, 90),\n    clamp(maxX, -180, 180),\n    clamp(maxY, -90, 90)\n  ];\n}\n\n/**\n * Centers on the given bounds if the current position is not within the bounds,\n * and there's no user defined position (via user initiated map movement). Gives\n * preference to the layer defined bounds over the STAC collection bounds.\n *\n * @param mapInstance Mapbox instance\n * @param isUserPositionSet Whether the user has set a position\n * @param initialBbox Bounding box from the layer\n * @param stacBbox Bounds from the STAC collection\n */\nexport function useFitBbox(\n  mapInstance: MapboxMap,\n  isUserPositionSet: boolean,\n  initialBbox: OptionalBbox,\n  stacBbox: OptionalBbox\n) {\n  useEffect(() => {\n    if (isUserPositionSet) return;\n\n    // Prefer layer defined bounds to STAC collection bounds.\n    const bounds = (initialBbox ?? stacBbox) as\n      | [number, number, number, number]\n      | undefined;\n\n    if (bounds?.length) {\n      const clampedBbox = clampBbox(bounds);\n      mapInstance.fitBounds(clampedBbox, { padding: FIT_BOUNDS_PADDING });\n    }\n  }, [mapInstance, isUserPositionSet, initialBbox, stacBbox]);\n}\n","import { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport qs from 'qs';\nimport {\n  Map as MapboxMap,\n  AnyLayer,\n  AnySourceImpl,\n  GeoJSONSourceRaw,\n  LngLatBoundsLike,\n  RasterLayer,\n  RasterSource,\n  SymbolLayer\n} from 'mapbox-gl';\nimport { useTheme } from 'styled-components';\nimport { featureCollection, point } from '@turf/helpers';\n\nimport { useMapStyle } from './styles';\nimport {\n  FIT_BOUNDS_PADDING,\n  getFilterPayload,\n  getMergedBBox,\n  requestQuickCache,\n  useFitBbox,\n  useLayerInteraction\n} from './utils';\nimport { useCustomMarker } from './custom-marker';\n\nimport {\n  ActionStatus,\n  S_FAILED,\n  S_IDLE,\n  S_LOADING,\n  S_SUCCEEDED\n} from '$utils/status';\n\n// Whether or not to print the request logs.\nconst LOG = process.env.NODE_ENV !== 'production';\n\nexport interface MapLayerRasterTimeseriesProps {\n  id: string;\n  stacCol: string;\n  stacApiEndpoint?: string;\n  tileApiEndpoint?: string;\n  date?: Date;\n  mapInstance: MapboxMap;\n  sourceParams?: Record<string, any>;\n  zoomExtent?: number[];\n  bounds?: number[];\n  onStatusChange?: (result: { status: ActionStatus; id: string }) => void;\n  isHidden?: boolean;\n  idSuffix?: string;\n  isPositionSet?: boolean;\n}\n\nexport interface StacFeature {\n  bbox: [number, number, number, number];\n}\n\nenum STATUS_KEY {\n  Global,\n  Layer,\n  StacSearch\n}\n\ninterface Statuses {\n  [STATUS_KEY.Global]: ActionStatus;\n  [STATUS_KEY.Layer]: ActionStatus;\n  [STATUS_KEY.StacSearch]: ActionStatus;\n}\n\nexport function MapLayerRasterTimeseries(props: MapLayerRasterTimeseriesProps) {\n  const {\n    id,\n    stacApiEndpoint,\n    tileApiEndpoint,\n    stacCol,\n    date,\n    mapInstance,\n    sourceParams,\n    zoomExtent,\n    bounds,\n    onStatusChange,\n    isHidden,\n    idSuffix = '',\n    isPositionSet\n  } = props;\n\n  const theme = useTheme();\n  const { updateStyle } = useMapStyle(); \n\n  const minZoom = zoomExtent?.[0] ?? 0;\n  const generatorId = 'raster-timeseries' + idSuffix;\n\n  const stacApiEndpointToUse = stacApiEndpoint ?? process.env.API_STAC_ENDPOINT;\n  const tileApiEndpointToUse =\n    tileApiEndpoint ?? process.env.API_RASTER_ENDPOINT;\n\n  // Status tracking.\n  // A raster timeseries layer has a base layer and may have markers.\n  // The status is succeeded only if all requests succeed.\n  const statuses = useRef<Statuses>({\n    [STATUS_KEY.Global]: S_IDLE,\n    [STATUS_KEY.Layer]: S_IDLE,\n    [STATUS_KEY.StacSearch]: S_IDLE\n  });\n\n  const changeStatus = useCallback(\n    ({\n      status,\n      context\n    }: {\n      status: ActionStatus;\n      context: STATUS_KEY.StacSearch | STATUS_KEY.Layer;\n    }) => {\n      // Set the new status\n      statuses.current[context] = status;\n\n      const layersToCheck = [\n        statuses.current[STATUS_KEY.StacSearch],\n        statuses.current[STATUS_KEY.Layer]\n      ];\n\n      let newStatus = statuses.current[STATUS_KEY.Global];\n      // All must succeed to be considered successful.\n      if (layersToCheck.every((s) => s === S_SUCCEEDED)) {\n        newStatus = S_SUCCEEDED;\n\n        // One failed status is enough for all.\n        // Failed takes priority over loading.\n      } else if (layersToCheck.some((s) => s === S_FAILED)) {\n        newStatus = S_FAILED;\n        // One loading status is enough for all.\n      } else if (layersToCheck.some((s) => s === S_LOADING)) {\n        newStatus = S_LOADING;\n      } else if (layersToCheck.some((s) => s === S_IDLE)) {\n        newStatus = S_IDLE;\n      }\n\n      // Only emit on status change.\n      if (newStatus !== statuses.current[STATUS_KEY.Global]) {\n        statuses.current[STATUS_KEY.Global] = newStatus;\n        onStatusChange?.({ status: newStatus, id });\n      }\n    },\n    [id, onStatusChange]\n  );\n\n  //\n  // Load stac collection features\n  //\n  const [stacCollection, setStacCollection] = useState<StacFeature[]>([]);\n  useEffect(() => {\n    if (!id || !stacCol || !date) return;\n    const controller = new AbortController();\n\n    const load = async () => {\n      try {\n        changeStatus({ status: S_LOADING, context: STATUS_KEY.StacSearch });\n        const payload = {\n          'filter-lang': 'cql2-json',\n          filter: getFilterPayload(date, stacCol),\n          limit: 500,\n          fields: {\n            include: ['bbox'],\n            exclude: ['collection', 'links']\n          }\n        };\n\n        /* eslint-disable no-console */\n        LOG &&\n          console.groupCollapsed(\n            'MapLayerRasterTimeseries %cLoading STAC features',\n            'color: orange;',\n            id\n          );\n        LOG && console.log('Payload', payload);\n        LOG && console.groupEnd();\n        /* eslint-enable no-console */\n\n        const responseData = await requestQuickCache({\n          url: `${stacApiEndpointToUse}/search`,\n          payload,\n          controller\n        });\n\n        /* eslint-disable no-console */\n        LOG &&\n          console.groupCollapsed(\n            'MapLayerRasterTimeseries %cAdding STAC features',\n            'color: green;',\n            id\n          );\n        LOG && console.log('STAC response', responseData);\n        LOG && console.groupEnd();\n        /* eslint-enable no-console */\n\n        setStacCollection(responseData.features);\n        changeStatus({ status: S_SUCCEEDED, context: STATUS_KEY.StacSearch });\n      } catch (error) {\n        if (!controller.signal.aborted) {\n          setStacCollection([]);\n          changeStatus({ status: S_FAILED, context: STATUS_KEY.StacSearch });\n        }\n        LOG &&\n          /* eslint-disable-next-line no-console */\n          console.log(\n            'MapLayerRasterTimeseries %cAborted STAC features',\n            'color: red;',\n            id\n          );\n        return;\n      }\n    };\n    load();\n    return () => {\n      controller.abort();\n      changeStatus({ status: 'idle', context: STATUS_KEY.StacSearch });\n    };\n  }, [id, changeStatus, stacApiEndpointToUse, stacCol, date]);\n\n  //\n  // Markers\n  //\n  const points = useMemo(() => {\n    if (!stacCollection.length) return null;\n    const points = stacCollection.map((f) => {\n      const [w, s, e, n] = f.bbox;\n      return {\n        bounds: [\n          [w, s],\n          [e, n]\n        ] as LngLatBoundsLike,\n        center: [(w + e) / 2, (s + n) / 2] as [number, number]\n      };\n    });\n\n    return points;\n  }, [stacCollection]);\n\n  //\n  // Tiles\n  //\n  const [mosaicUrl, setMosaicUrl] = useState<string | null>(null);\n  useEffect(() => {\n    if (!id || !stacCol || !date) return;\n\n    // If the search returned no data, remove anything previously there so we\n    // don't run the risk that the selected date and data don't match, even\n    // though if a search returns no data, that date should not be available for\n    // the dataset - may be a case of bad configuration.\n    if (!stacCollection.length) {\n      setMosaicUrl(null);\n      return;\n    }\n\n    const controller = new AbortController();\n\n    const load = async () => {\n      changeStatus({ status: S_LOADING, context: STATUS_KEY.Layer });\n      try {\n        const payload = {\n          'filter-lang': 'cql2-json',\n          filter: getFilterPayload(date, stacCol)\n        };\n\n        /* eslint-disable no-console */\n        LOG &&\n          console.groupCollapsed(\n            'MapLayerRasterTimeseries %cLoading Mosaic',\n            'color: orange;',\n            id\n          );\n        LOG && console.log('Payload', payload);\n        LOG && console.groupEnd();\n        /* eslint-enable no-console */\n\n        const responseData = await requestQuickCache({\n          url: `${tileApiEndpointToUse}/mosaic/register`,\n          payload,\n          controller\n        });\n\n        setMosaicUrl(responseData.links[1].href);\n\n        /* eslint-disable no-console */\n        LOG &&\n          console.groupCollapsed(\n            'MapLayerRasterTimeseries %cAdding Mosaic',\n            'color: green;',\n            id\n          );\n        // links[0] : metadata , links[1]: tile\n        LOG && console.log('Url', responseData.links[1].href);\n        LOG && console.log('STAC response', responseData);\n        LOG && console.groupEnd();\n        /* eslint-enable no-console */\n        changeStatus({ status: S_SUCCEEDED, context: STATUS_KEY.Layer });\n      } catch (error) {\n        if (!controller.signal.aborted) {\n          changeStatus({ status: S_FAILED, context: STATUS_KEY.Layer });\n        }\n        LOG &&\n          /* eslint-disable-next-line no-console */\n          console.log(\n            'MapLayerRasterTimeseries %cAborted Mosaic',\n            'color: red;',\n            id\n          );\n        return;\n      }\n    };\n\n    load();\n\n    return () => {\n      controller.abort();\n      changeStatus({ status: 'idle', context: STATUS_KEY.Layer });\n    };\n  }, [\n    // The `showMarkers` and `isHidden` dep are left out on purpose, as visibility\n    // is controlled below, but we need the value to initialize the layer\n    // visibility.\n    stacCollection\n    // This hook depends on a series of properties, but whenever they change the\n    // `stacCollection` is guaranteed to change because a new STAC request is\n    // needed to show the data. The following properties are therefore removed\n    // from the dependency array:\n    // - id\n    // - changeStatus\n    // - stacCol\n    // - date\n    // - tileApiEndpointToUse\n    // - sacApiEndpointToUse\n    // Keeping then in would cause multiple requests because for example when\n    // `date` changes the hook runs, then the STAC request in the hook above\n    // fires and `stacCollection` changes, causing this hook to run again. This\n    // resulted in a race condition when adding the source to the map leading to\n    // an error.\n  ]);\n\n  const markerLayout = useCustomMarker(mapInstance);\n\n  //\n  // Generate Mapbox GL layers and sources for raster timeseries\n  //\n  const haveSourceParamsChanged = useMemo(\n    () => JSON.stringify(sourceParams),\n    [sourceParams]\n  );\n\n  useEffect(\n    () => {\n      const controller = new AbortController();\n      async function run() {\n        let layers: AnyLayer[] = [];\n        let sources: Record<string, AnySourceImpl> = {};\n        if (mosaicUrl) {\n          const tileParams = qs.stringify(\n            {\n              assets: 'cog_default',\n              ...sourceParams\n            },\n            // Temporary solution to pass different tile parameters for hls data\n            {\n              arrayFormat: id.toLowerCase().includes('hls') ? 'repeat' : 'comma'\n            }\n          );\n\n          const tilejsonUrl = `${mosaicUrl}?${tileParams}`;\n\n          let tileServerUrl: string | undefined = undefined;\n          try {\n            const tilejsonData = await requestQuickCache({\n              url: tilejsonUrl,\n              method: 'GET',\n              payload: null,\n              controller\n            });\n            tileServerUrl = tilejsonData.tiles[0];\n          } catch (error) {\n            // Ignore errors.\n          }\n\n          const wmtsBaseUrl = mosaicUrl.replace(\n            'tilejson.json',\n            'WMTSCapabilities.xml'\n          );\n\n          const mosaicSource: RasterSource = {\n            type: 'raster',\n            url: tilejsonUrl\n          };\n\n          const mosaicLayer: RasterLayer = {\n            id: id,\n            type: 'raster',\n            source: id,\n            layout: {\n              visibility: isHidden ? 'none' : 'visible'\n            },\n            paint: {\n              'raster-opacity': Number(!isHidden),\n              'raster-opacity-transition': {\n                duration: 320\n              }\n            },\n            minzoom: minZoom,\n            metadata: {\n              id,\n              layerOrderPosition: 'raster',\n              xyzTileUrl: tileServerUrl,\n              wmtsTileUrl: `${wmtsBaseUrl}?${tileParams}`\n            }\n          };\n\n          sources = {\n            ...sources,\n            [id]: mosaicSource\n          };\n          layers = [...layers, mosaicLayer];\n        }\n\n        if (points && minZoom > 0) {\n          const pointsSourceId = `${id}-points`;\n          const pointsSource: GeoJSONSourceRaw = {\n            type: 'geojson',\n            data: featureCollection(\n              points.map((p) => point(p.center, { bounds: p.bounds }))\n            )\n          };\n\n          const pointsLayer: SymbolLayer = {\n            type: 'symbol',\n            id: pointsSourceId,\n            source: pointsSourceId,\n            layout: {\n              ...(markerLayout as any),\n              visibility: isHidden ? 'none' : 'visible',\n              'icon-allow-overlap': true\n            },\n            paint: {\n              'icon-color': theme.color?.primary,\n              'icon-halo-color': theme.color?.base,\n              'icon-halo-width': 1\n            },\n            maxzoom: minZoom,\n            metadata: {\n              layerOrderPosition: 'markers'\n            }\n          };\n          sources = {\n            ...sources,\n            [pointsSourceId]: pointsSource as AnySourceImpl\n          };\n          layers = [...layers, pointsLayer];\n        }\n        \n        updateStyle({\n          generatorId,\n          sources,\n          layers\n        });\n      }\n\n      run();\n\n      return () => {\n        controller.abort();\n      };\n    },\n    // sourceParams not included, but using a stringified version of it to detect changes (haveSourceParamsChanged)\n    [\n      updateStyle,\n      id,\n      mosaicUrl,\n      minZoom,\n      points,\n      haveSourceParamsChanged,\n      isHidden,\n      generatorId\n    ]\n  );\n\n  //\n  // Cleanup layers on unmount.\n  //\n  useEffect(() => {\n    return () => {\n      updateStyle({\n        generatorId,\n        sources: {},\n        layers: []\n      });\n    };\n  }, [updateStyle, generatorId]);\n\n  //\n  // Listen to mouse events on the markers layer\n  //\n  const onPointsClick = useCallback(\n    (features) => {\n      const bounds = JSON.parse(features[0].properties.bounds);\n      mapInstance.fitBounds(bounds, { padding: FIT_BOUNDS_PADDING });\n    },\n    [mapInstance]\n  );\n  useLayerInteraction({\n    layerId: `${id}-points`,\n    mapInstance,\n    onClick: onPointsClick\n  });\n\n  //\n  // FitBounds when needed\n  //\n  const layerBounds = useMemo(\n    () => (stacCollection.length ? getMergedBBox(stacCollection) : undefined),\n    [stacCollection]\n  );\n  useFitBbox(mapInstance, !!isPositionSet, bounds, layerBounds);\n\n  return null;\n}\n","import { AnyLayer, AnySourceImpl, Style } from 'mapbox-gl';\nimport React, {\n  ReactNode,\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useState\n} from 'react';\n\nexport type ExtendedLayer = AnyLayer & {\n  metadata?: {\n    layerOrderPosition?: LayerOrderPosition;\n    [key: string]: any;\n  };\n};\nexport interface GeneratorParams {\n  generatorId: string;\n  layers: ExtendedLayer[];\n  sources: Record<string, AnySourceImpl>;\n  metadata?: Record<string, unknown>;\n}\n\ninterface StylesContextType {\n  updateStyle: (params: GeneratorParams) => void;\n  style?: Style;\n  updateMetaData?: (params: unknown) => void;\n  metaData?: unknown;\n}\n\nexport const StylesContext = createContext<StylesContextType>({\n  updateStyle: (params: GeneratorParams) => {\n    return params;\n  }\n});\n\nexport type LayerOrderPosition =\n  | 'basemap-background'\n  | 'raster'\n  | 'markers'\n  | 'vector'\n  | 'basemap-foreground';\n\nconst LAYER_ORDER: LayerOrderPosition[] = [\n  'basemap-background',\n  'raster',\n  'vector',\n  'basemap-foreground',\n  'markers'\n];\n\nexport type ExtendedStyle = ReturnType<typeof generateStyle>;\n\n// Takes in a dictionary associating each generator id with a series of\n//  Mapbox layers and sources to be added to the final style. Outputs\n//  a style object directly usable by the map instance.\nconst generateStyle = (stylesData: Record<string, GeneratorParams>) => {\n  let sources: Record<string, AnySourceImpl> = {};\n  let layers: ExtendedLayer[] = [];\n\n  Object.entries(stylesData).forEach(([generatorId, generatorParams]) => {\n    // TODO check duplicate source ids?\n    sources = {\n      ...sources,\n      ...generatorParams.sources\n    };\n\n    const layersWithMeta = [\n      ...generatorParams.layers.map((layer) => {\n        const metadata = layer.metadata ?? {};\n        metadata.generatorId = generatorId;\n        return { ...layer, metadata };\n      })\n    ];\n\n    layers = [...layers, ...layersWithMeta];\n  });\n\n  // Allow sort as it uses a copy of the array so mutating is ok\n  /* eslint-disable-next-line fp/no-mutating-methods */\n  layers = [...layers].sort((layerA, layerB) => {\n    const layerAOrder = layerA.metadata?.layerOrderPosition;\n    const layerBOrder = layerB.metadata?.layerOrderPosition;\n    const layerAIndex = LAYER_ORDER.indexOf(layerAOrder);\n    const layerBIndex = LAYER_ORDER.indexOf(layerBOrder);\n    const sortDeltaOrder = layerAIndex - layerBIndex;\n    const sortDeltaGeneratorId = layerA.metadata?.generatorId.localeCompare(\n      layerB.metadata?.generatorId\n    );\n    // If compared layers have different layer orders, sort by layer order, otherwise\n    // fallback on generatorId to ensure layer stacks from the same generator stay contiguous\n    return sortDeltaOrder !== 0 ? sortDeltaOrder : sortDeltaGeneratorId;\n  });\n\n  return {\n    version: 8,\n    glyphs: 'mapbox://fonts/mapbox/{fontstack}/{range}.pbf',\n    // This is the spritesheet used in the default satellite basemap (cldu1cb8f00ds01p6gi583w1m)\n    sprite:\n      'mapbox://sprites/covid-nasa/cldu1cb8f00ds01p6gi583w1m/e3w0e56evrnnyy9tj4v36mbo4',\n    layers,\n    sources\n  };\n};\n\nexport function Styles({\n  onStyleUpdate,\n  children\n}: {\n  onStyleUpdate?: (style: ExtendedStyle) => void;\n  children?: ReactNode;\n}) {\n  const [stylesData, setStylesData] = useState<Record<string, GeneratorParams>>(\n    {}\n  );\n\n  const [style, setStyle] = useState<Style | undefined>();\n\n  const updateStyle = useCallback(\n    (params: GeneratorParams) => {\n      setStylesData((prevStyle) => ({\n        ...prevStyle,\n        [params.generatorId]: params\n      }));\n    },\n    [setStylesData]\n  );\n\n  useEffect(() => {\n    const style = generateStyle(stylesData);\n    onStyleUpdate?.(style);\n    setStyle(style as any);\n  }, [stylesData, onStyleUpdate]);\n\n  return (\n    <StylesContext.Provider value={{ updateStyle, style }}>\n      {children}\n    </StylesContext.Provider>\n  );\n}\n\nexport const useMapStyle = () => {\n  const { updateStyle, style } = useContext(StylesContext);\n  return { updateStyle, style };\n};\n","import { useEffect } from 'react';\n\nimport markerSdfUrl from './marker-sdf.png';\n\nconst CUSTOM_MARKER_ID = 'marker-sdf';\n\nconst markerLayout = {\n  'icon-image': CUSTOM_MARKER_ID,\n  'icon-size': 0.25,\n  'icon-anchor': 'bottom'\n};\n\nexport function useCustomMarker(mapInstance) {\n  useEffect(() => {\n    mapInstance.loadImage(markerSdfUrl, (error, image) => {\n      if (error) throw error;\n      if (!image) return;\n      if (mapInstance.hasImage(CUSTOM_MARKER_ID)) {\n        mapInstance.removeImage(CUSTOM_MARKER_ID);\n      }\n      // add image to the active style and make it SDF-enabled\n      mapInstance.addImage(CUSTOM_MARKER_ID, image, { sdf: true });\n    });\n  }, [mapInstance]);\n\n  return markerLayout;\n}\n","module.exports = new __parcel__URL__(\"marker-sdf.87fed311.png\").toString();","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useTheme } from 'styled-components';\nimport qs from 'qs';\nimport {\n  Map as MapboxMap,\n  AnyLayer,\n  AnySourceImpl,\n  LngLatLike,\n  VectorSourceImpl\n} from 'mapbox-gl';\nimport { Feature } from 'geojson';\nimport { endOfDay, startOfDay } from 'date-fns';\nimport centroid from '@turf/centroid';\n\nimport { requestQuickCache, useFitBbox, useLayerInteraction } from './utils';\nimport { useMapStyle } from './styles';\nimport { useCustomMarker } from './custom-marker';\n\nimport { ActionStatus, S_FAILED, S_LOADING, S_SUCCEEDED } from '$utils/status';\nimport { userTzDate2utcString } from '$utils/date';\n\nexport interface MapLayerVectorTimeseriesProps {\n  id: string;\n  stacCol: string;\n  stacApiEndpoint?: string;\n  date?: Date;\n  mapInstance: MapboxMap;\n  sourceParams?: Record<string, any>;\n  zoomExtent?: number[];\n  bounds?: number[];\n  onStatusChange?: (result: { status: ActionStatus; id: string }) => void;\n  isHidden?: boolean;\n  idSuffix?: string;\n  isPositionSet?: boolean;\n}\n\nexport function MapLayerVectorTimeseries(props: MapLayerVectorTimeseriesProps) {\n  const {\n    id,\n    stacCol,\n    stacApiEndpoint,\n    date,\n    mapInstance,\n    sourceParams,\n    zoomExtent,\n    bounds,\n    onStatusChange,\n    isHidden,\n    idSuffix = '',\n    isPositionSet\n  } = props;\n\n  const theme = useTheme();\n  const { updateStyle } = useMapStyle();\n  const [featuresApiEndpoint, setFeaturesApiEndpoint] = useState('');\n  const [featuresBbox, setFeaturesBbox] =\n    useState<[number, number, number, number]>();\n\n  const [minZoom, maxZoom] = zoomExtent ?? [0, 20];\n\n  const stacApiEndpointToUse = stacApiEndpoint?? process.env.API_STAC_ENDPOINT;\n\n  const generatorId = 'vector-timeseries' + idSuffix;\n\n  //\n  // Get the tiles url\n  //\n  useEffect(() => {\n    const controller = new AbortController();\n\n    async function load() {\n      try {\n        onStatusChange?.({ status: S_LOADING, id });\n        const data = await requestQuickCache({\n          url: `${stacApiEndpointToUse}/collections/${stacCol}`,\n          method: 'GET',\n          controller\n        });\n\n        const endpoint = data.links.find((l) => l.rel === 'external').href;\n        setFeaturesApiEndpoint(endpoint);\n\n        const featuresData = await requestQuickCache({\n          url: endpoint,\n          method: 'GET',\n          controller\n        });\n\n        if (featuresData.extent.spatial.bbox) {\n          setFeaturesBbox(featuresData.extent.spatial.bbox[0]);\n        }\n\n        onStatusChange?.({ status: S_SUCCEEDED, id });\n      } catch (error) {\n        if (!controller.signal.aborted) {\n          setFeaturesApiEndpoint('');\n          onStatusChange?.({ status: S_FAILED, id });\n        }\n        return;\n      }\n    }\n\n    load();\n\n    return () => {\n      controller.abort();\n    };\n  }, [mapInstance, id, stacCol, stacApiEndpointToUse, date, onStatusChange]);\n\n  const markerLayout = useCustomMarker(mapInstance);\n\n  //\n  // Generate Mapbox GL layers and sources for raster timeseries\n  //\n  const haveSourceParamsChanged = useMemo(\n    () => JSON.stringify(sourceParams),\n    [sourceParams]\n  );\n  useEffect(() => {\n    if (!date || !featuresApiEndpoint) return;\n\n    const start = userTzDate2utcString(startOfDay(date));\n    const end = userTzDate2utcString(endOfDay(date));\n\n    const tileParams = qs.stringify({\n      ...sourceParams,\n      datetime: `${start}/${end}`\n    });\n\n    const sources: Record<string, AnySourceImpl> = {\n      [id]: {\n        type: 'vector',\n        tiles: [`${featuresApiEndpoint}/tiles/{z}/{x}/{y}?${tileParams}`]\n      } as VectorSourceImpl\n    };\n\n    const layers = [\n      {\n        id: `${id}-line-bg`,\n        type: 'line',\n        source: id,\n        'source-layer': 'default',\n        layout: {\n          visibility: isHidden ? 'none' : 'visible'\n        },\n        paint: {\n          'line-color': theme.color?.['danger-300'],\n          'line-width': [\n            'interpolate',\n            ['linear'],\n            ['zoom'],\n            minZoom,\n            4,\n            maxZoom,\n            10\n          ]\n        },\n        // filter: ['==', '$type', 'LineString'],\n        minzoom: minZoom,\n        metadata: {\n          id,\n          layerOrderPosition: 'raster',\n          xyzTileUrl: `${featuresApiEndpoint}/tiles/{z}/{x}/{y}?${tileParams}`\n        }\n      },\n      {\n        id: `${id}-line-fg`,\n        type: 'line',\n        source: id,\n        'source-layer': 'default',\n        layout: {\n          visibility: isHidden ? 'none' : 'visible'\n        },\n        paint: {\n          'line-color': theme.color?.infographicB,\n          'line-width': [\n            'interpolate',\n            ['linear'],\n            ['zoom'],\n            minZoom,\n            2,\n            maxZoom,\n            5\n          ]\n        },\n        filter: ['==', '$type', 'LineString'],\n        minzoom: minZoom,\n        metadata: {\n          layerOrderPosition: 'raster'\n        }\n      },\n      {\n        id: `${id}-fill-fg`,\n        type: 'fill',\n        source: id,\n        'source-layer': 'default',\n        layout: {\n          visibility: isHidden ? 'none' : 'visible'\n        },\n        paint: {\n          'fill-color': theme.color?.infographicB,\n          'fill-opacity': 0.8\n        },\n        filter: ['==', '$type', 'Polygon'],\n        minzoom: minZoom,\n        metadata: {\n          layerOrderPosition: 'raster'\n        }\n      },\n      minZoom > 0\n        ? {\n            type: 'symbol',\n            id: `${id}-points`,\n            source: id,\n            'source-layer': 'default',\n            layout: {\n              ...(markerLayout as any),\n              visibility: isHidden ? 'none' : 'visible'\n            },\n            paint: {\n              'icon-color': theme.color?.infographicB,\n              'icon-halo-color': theme.color?.base,\n              'icon-halo-width': 1\n            },\n            maxzoom: minZoom,\n            metadata: {\n              layerOrderPosition: 'markers'\n            }\n          }\n        : undefined\n    ].filter(Boolean) as AnyLayer[];\n\n    updateStyle({\n      generatorId,\n      sources,\n      layers\n    });\n    // sourceParams not included, but using a stringified version of it to\n    // detect changes (haveSourceParamsChanged)\n    // `theme` will not change throughout the app use\n  }, [\n    id,\n    updateStyle,\n    date,\n    featuresApiEndpoint,\n    minZoom,\n    maxZoom,\n    isHidden,\n    haveSourceParamsChanged,\n    generatorId\n  ]);\n\n  //\n  // Cleanup layers on unmount.\n  //\n  useEffect(() => {\n    return () => {\n      updateStyle({\n        generatorId,\n        sources: {},\n        layers: []\n      });\n    };\n  }, [updateStyle, generatorId]);\n\n  //\n  // Listen to mouse events on the markers layer\n  //\n  const onPointsClick = useCallback(\n    (features) => {\n      const extractedFeat = {\n        type: 'Feature',\n        geometry: features[0].geometry\n      } as Feature<any>;\n\n      const center = centroid(extractedFeat).geometry.coordinates as LngLatLike;\n\n      // Zoom past the min zoom centering on the clicked feature.\n      mapInstance.flyTo({\n        zoom: minZoom,\n        center\n      });\n    },\n    [mapInstance, minZoom]\n  );\n  useLayerInteraction({\n    layerId: `${id}-points`,\n    mapInstance,\n    onClick: onPointsClick\n  });\n\n  //\n  // FitBounds when needed\n  //\n  useFitBbox(mapInstance, !!isPositionSet, bounds, featuresBbox);\n\n  return null;\n}\n","import React, { useEffect, useMemo } from 'react';\nimport qs from 'qs';\nimport { RasterSource, RasterLayer } from 'mapbox-gl';\n\nimport { useMapStyle } from './styles';\n\nimport { ActionStatus } from '$utils/status';\nimport { useZarr } from '$components/common/map/style-generators/hooks';\n\nexport interface MapLayerZarrTimeseriesProps {\n  id: string;\n  stacCol: string;\n  date?: Date;\n  sourceParams?: Record<string, any>;\n  stacApiEndpoint?: string;\n  tileApiEndpoint?: string;\n  zoomExtent?: number[];\n  onStatusChange?: (result: { status: ActionStatus; id: string }) => void;\n  isHidden?: boolean;\n  idSuffix?: string;\n}\n\ninterface ZarrPaintLayerProps {\n  id: string;\n  date?: Date;\n  sourceParams?: Record<string, any>;\n  tileApiEndpoint?: string;\n  zoomExtent?: number[];\n  isHidden?: boolean;\n  idSuffix?: string;\n  assetUrl: string;\n}\n\nexport function ZarrPaintLayer(props: ZarrPaintLayerProps) {\n  const {\n    id,\n    tileApiEndpoint,\n    date,\n    sourceParams,\n    zoomExtent,\n    isHidden,\n    assetUrl,\n    idSuffix = ''\n  } = props;\n\n  const { updateStyle } = useMapStyle();\n\n  const [minZoom] = zoomExtent ?? [0, 20];\n\n  const generatorId = 'zarr-timeseries' + idSuffix;\n\n  // Generate Mapbox GL layers and sources for raster timeseries\n  //\n  const haveSourceParamsChanged = useMemo(\n    () => JSON.stringify(sourceParams),\n    [sourceParams]\n  );\n\n  useEffect(\n    () => {\n      if (!assetUrl) return;\n\n      const tileParams = qs.stringify({\n        url: assetUrl,\n        time_slice: date,\n        ...sourceParams\n      });\n\n      const zarrSource: RasterSource = {\n        type: 'raster',\n        url: `${tileApiEndpoint}?${tileParams}`\n      };\n\n      const zarrLayer: RasterLayer = {\n        id: id,\n        type: 'raster',\n        source: id,\n        layout: {\n          visibility: isHidden ? 'none' : 'visible'\n        },\n        paint: {\n          'raster-opacity': Number(!isHidden),\n          'raster-opacity-transition': {\n            duration: 320\n          }\n        },\n        minzoom: minZoom,\n        metadata: {\n          layerOrderPosition: 'raster'\n        }\n      };\n\n      const sources = {\n        [id]: zarrSource\n      };\n      const layers = [zarrLayer];\n\n      updateStyle({\n        generatorId,\n        sources,\n        layers\n      });\n    },\n    // sourceParams not included, but using a stringified version of it to detect changes (haveSourceParamsChanged)\n    [\n      updateStyle,\n      id,\n      date,\n      assetUrl,\n      minZoom,\n      haveSourceParamsChanged,\n      isHidden,\n      generatorId,\n      tileApiEndpoint\n    ]\n  );\n\n  //\n  // Cleanup layers on unmount.\n  //\n  useEffect(() => {\n    return () => {\n      updateStyle({\n        generatorId,\n        sources: {},\n        layers: []\n      });\n    };\n  }, [updateStyle, generatorId]);\n\n  return null;\n}\n\nexport function MapLayerZarrTimeseries(props:MapLayerZarrTimeseriesProps) {\n  const {\n    id,\n    stacCol,\n    stacApiEndpoint,\n    date,\n    onStatusChange,\n  } = props;\n\n  const stacApiEndpointToUse = stacApiEndpoint?? process.env.API_STAC_ENDPOINT;\n  const assetUrl = useZarr({id, stacCol, stacApiEndpointToUse, date, onStatusChange});\n  return <ZarrPaintLayer {...props} assetUrl={assetUrl} />;\n}","import {useState, useEffect} from 'react';\nimport { requestQuickCache } from '../utils';\nimport { S_FAILED, S_LOADING, S_SUCCEEDED } from '$utils/status';\n\ninterface AssetUrlReplacement {\n  from: string;\n  to: string;\n}\ninterface ZarrResponseData {\n  assets: {\n    zarr: {\n      href: string\n    }\n  }\n}\ninterface CMRResponseData {\n  features: {\n    assets: {\n      data: {\n        href: string\n      }\n    }\n  }[]\n}\n\nexport function useZarr({ id, stacCol, stacApiEndpointToUse, date, onStatusChange }){\n  const [assetUrl, setAssetUrl] = useState('');\n\n  useEffect(() => {\n    const controller = new AbortController();\n\n    async function load() {\n      try {\n        onStatusChange?.({ status: S_LOADING, id });\n        const data:ZarrResponseData = await requestQuickCache({\n          url: `${stacApiEndpointToUse}/collections/${stacCol}`,\n          method: 'GET',\n          controller\n        });\n\n        setAssetUrl(data.assets.zarr.href);\n        onStatusChange?.({ status: S_SUCCEEDED, id });\n      } catch (error) {\n        if (!controller.signal.aborted) {\n          setAssetUrl('');\n          onStatusChange?.({ status: S_FAILED, id });\n        }\n        return;\n      }\n    }\n\n    load();\n\n    return () => {\n      controller.abort();\n    };\n  }, [id, stacCol, stacApiEndpointToUse, date, onStatusChange]);\n\n  return assetUrl;\n} \n\n\n\nexport function useCMR({ id, stacCol, stacApiEndpointToUse, date, assetUrlReplacements, stacApiEndpoint, onStatusChange }){\n  const [assetUrl, setAssetUrl] = useState('');\n  \n  const replaceInAssetUrl = (url: string, replacement: AssetUrlReplacement) => {\n    const {from, to } = replacement;\n    const cmrAssetUrl = url.replace(from, to);\n    return cmrAssetUrl;\n  };\n\n\n  useEffect(() => {\n    const controller = new AbortController();\n\n    async function load() {\n      try {\n        onStatusChange?.({ status: S_LOADING, id });\n        if (!assetUrlReplacements) throw (new Error('CMR  layer requires asset url remplacement attributes'));\n\n        // Zarr collections in _VEDA_ should have a single entrypoint (zarr or virtual zarr / reference)\n        // CMR endpoints will be using individual items' assets, so we query for the asset url\n        const stacApiEndpointToUse = `${stacApiEndpoint}/search?collections=${stacCol}&datetime=${date?.toISOString()}`;\n\n        const data:CMRResponseData = await requestQuickCache({\n          url: stacApiEndpointToUse,\n          method: 'GET',\n          controller\n        });\n\n        const assetUrl = replaceInAssetUrl(data.features[0].assets.data.href, assetUrlReplacements);\n        setAssetUrl(assetUrl);\n        onStatusChange?.({ status: S_SUCCEEDED, id });\n      } catch (error) {\n        if (!controller.signal.aborted) {\n          setAssetUrl('');\n          onStatusChange?.({ status: S_FAILED, id });\n        }\n        return;\n      }\n    }\n\n    load();\n\n    return () => {\n      controller.abort();\n    };\n  }, [id, stacCol, stacApiEndpointToUse, date, assetUrlReplacements, stacApiEndpoint, onStatusChange]);\n\n  return assetUrl;\n\n} ","import axios, { Method } from 'axios';\nimport { Map as MapboxMap } from 'mapbox-gl';\nimport { MapRef } from 'react-map-gl';\nimport { endOfDay, startOfDay } from 'date-fns';\nimport { Feature, MultiPolygon, Polygon } from 'geojson';\nimport { BBox } from \"@turf/helpers\";\nimport {\n  DatasetDatumFn,\n  DatasetDatumFnResolverBag,\n  DatasetDatumReturnType\n} from 'veda';\n\nimport { StacFeature } from './types';\n\nimport { userTzDate2utcString } from '$utils/date';\nimport { validateRangeNum } from '$utils/utils';\n\nexport const FIT_BOUNDS_PADDING = 32;\n\nexport const validateLon = validateRangeNum(-180, 180);\nexport const validateLat = validateRangeNum(-90, 90);\n\nexport function getMergedBBox(features: StacFeature[]) {\n  const mergedBBox = [\n    Number.POSITIVE_INFINITY,\n    Number.POSITIVE_INFINITY,\n    Number.NEGATIVE_INFINITY,\n    Number.NEGATIVE_INFINITY\n  ];\n  return features.reduce(\n    (acc, feature) => [\n      feature.bbox[0] < acc[0] ? feature.bbox[0] : acc[0],\n      feature.bbox[1] < acc[1] ? feature.bbox[1] : acc[1],\n      feature.bbox[2] > acc[2] ? feature.bbox[2] : acc[2],\n      feature.bbox[3] > acc[3] ? feature.bbox[3] : acc[3]\n    ],\n    mergedBBox\n  ) as [number, number, number, number];\n}\n\nexport function checkFitBoundsFromLayer(\n  layerBounds?: [number, number, number, number],\n  mapInstance?: MapboxMap | MapRef\n) {\n  if (!layerBounds || !mapInstance) return false;\n\n  const [minXLayer, minYLayer, maxXLayer, maxYLayer] = layerBounds;\n  const [[minXMap, minYMap], [maxXMap, maxYMap]] = mapInstance\n    .getBounds()\n    .toArray();\n  const isOutside =\n    maxXLayer < minXMap ||\n    minXLayer > maxXMap ||\n    maxYLayer < minYMap ||\n    minYLayer > maxYMap;\n  const layerExtentSmaller =\n    maxXLayer - minXLayer < maxXMap - minXMap &&\n    maxYLayer - minYLayer < maxYMap - minYMap;\n\n  // only fitBounds if layer extent is smaller than viewport extent (ie zoom to area of interest),\n  // or if layer extent does not overlap at all with viewport extent (ie pan to area of interest)\n  return layerExtentSmaller || isOutside;\n}\n\n/**\n * Creates the appropriate filter object to send to STAC.\n *\n * @param {Date} date Date to request\n * @param {string} collection STAC collection to request\n * @returns Object\n */\nexport function getFilterPayload(date: Date, collection: string) {\n  return {\n    op: 'and',\n    args: [\n      {\n        op: '>=',\n        args: [{ property: 'datetime' }, userTzDate2utcString(startOfDay(date))]\n      },\n      {\n        op: '<=',\n        args: [{ property: 'datetime' }, userTzDate2utcString(endOfDay(date))]\n      },\n      {\n        op: 'eq',\n        args: [{ property: 'collection' }, collection]\n      }\n    ]\n  };\n}\n\n// There are cases when the data can't be displayed properly on low zoom levels.\n// In these cases instead of displaying the raster tiles, we display markers to\n// indicate whether or not there is data in a given location. When the user\n// crosses the marker threshold, if below the min zoom we have to request the\n// marker position, and if above we have to register a mosaic query. Since this\n// switching can happen several times, we cache the api response using the\n// request params as key.\nconst quickCache = new Map<string, any>();\ninterface RequestQuickCacheParams {\n  url: string;\n  method?: Method;\n  payload?: any;\n  controller: AbortController;\n}\nexport function requestQuickCache<T>({\n  url,\n  payload,\n  controller,\n  method = 'post'\n}: RequestQuickCacheParams): Promise<T> {\n  if (controller.signal.aborted) {\n    return Promise.reject(controller.signal.reason);\n  }\n\n  // Using a complicated promise structure to be able to abort the request even\n  // for a synchronous cache hit.\n  return new Promise((resolve, reject) => {\n    const abortHandler = () => {\n      reject(controller.signal.reason);\n    };\n\n    const key = `${method}:${url}${JSON.stringify(payload)}`;\n    // Operation that will return the data.\n    const dataPromise = !quickCache.has(key)\n      ? axios({\n          url,\n          method,\n          data: payload,\n          signal: controller.signal\n        }).then((response) => response.data)\n      : Promise.resolve(quickCache.get(key));\n\n    // Run the promise.\n    dataPromise\n      .then((data) => {\n        quickCache.set(key, data);\n        resolve(data);\n      })\n      .catch((error) => reject(error))\n      .finally(() => {\n        controller.signal.removeEventListener('abort', abortHandler);\n      });\n\n    controller.signal.addEventListener('abort', abortHandler);\n  });\n}\n\ntype Fn = (...args: any[]) => any;\n\ntype ObjResMap<T> = {\n  [K in keyof T]: Res<T[K]>;\n};\n\ntype Res<T> = T extends Fn\n  ? T extends DatasetDatumFn<DatasetDatumReturnType>\n    ? DatasetDatumReturnType\n    : never\n  : T extends any[]\n  ? Res<T[number]>[]\n  : T extends object\n  ? ObjResMap<T>\n  : T;\n\nexport function resolveConfigFunctions<T>(\n  datum: T,\n  bag: DatasetDatumFnResolverBag\n): Res<T>;\nexport function resolveConfigFunctions<T extends any[]>(\n  datum: T,\n  bag: DatasetDatumFnResolverBag\n): Res<T[number]>[];\nexport function resolveConfigFunctions(\n  datum: any,\n  bag: DatasetDatumFnResolverBag\n): any {\n  if (Array.isArray(datum)) {\n    return datum.map((v) => resolveConfigFunctions(v, bag));\n  }\n\n  if (datum != null && typeof datum === 'object') {\n    // Use for loop instead of reduce as it faster.\n    const ready = {};\n    for (const [k, v] of Object.entries(datum as object)) {\n      ready[k] = resolveConfigFunctions(v, bag);\n    }\n    return ready;\n  }\n\n  if (typeof datum === 'function') {\n    try {\n      return datum(bag);\n    } catch (error) {\n      /* eslint-disable-next-line no-console */\n      // console.error(\n      //   'Failed to resolve function %s(%o) with error %s',\n      //   datum.name,\n      //   bag,\n      //   error.message\n      // );\n      return null;\n    }\n  }\n\n  return datum;\n}\n\nexport function toAoIid(drawId: string) {\n  return drawId.slice(-6);\n}\n\n/**\n * Converts a MultiPolygon to a Feature Collection of polygons.\n *\n * @param feature MultiPolygon feature\n *\n * @see combineFeatureCollection() for opposite\n *\n * @returns Feature Collection of Polygons\n */\nexport function multiPolygonToPolygons(feature: Feature<MultiPolygon>) {\n  const polygons = feature.geometry.coordinates.map(\n    (coordinates) =>\n      ({\n        type: 'Feature',\n        properties: { ...feature.properties },\n        geometry: {\n          type: 'Polygon',\n          coordinates: coordinates\n        }\n      } as Feature<Polygon>)\n  );\n\n  return polygons;\n}\n\nexport function getZoomFromBbox(bbox: BBox): number {\n  const latMax = Math.max(bbox[3], bbox[1]);\n  const lngMax = Math.max(bbox[2], bbox[0]);\n  const latMin = Math.min(bbox[3], bbox[1]);\n  const lngMin = Math.min(bbox[2], bbox[0]);\n  const maxDiff = Math.max(latMax - latMin, lngMax - lngMin);\n  if (maxDiff < 360 / Math.pow(2, 20)) {\n    return 21;\n} else {\n    const zoomLevel = Math.floor(-1*( (Math.log(maxDiff)/Math.log(2)) - (Math.log(360)/Math.log(2))));\n    if (zoomLevel < 1) return 1;\n    else return zoomLevel;\n  }\n}\n\n","import React from 'react';\nimport { Map as MapboxMap } from 'mapbox-gl';\n\nimport { ZarrPaintLayer } from './zarr-timeseries';\nimport { ActionStatus } from '$utils/status';\n\nimport { useCMR } from '$components/common/map/style-generators/hooks';\n\ninterface AssetUrlReplacement {\n  from: string;\n  to: string;\n}\n\nexport interface MapLayerCMRTimeseriesProps {\n  id: string;\n  stacCol: string;\n  date?: Date;\n  mapInstance: MapboxMap;\n  sourceParams?: Record<string, any>;\n  stacApiEndpoint?: string;\n  tileApiEndpoint?: string;\n  assetUrlReplacements?: AssetUrlReplacement;\n  zoomExtent?: number[];\n  onStatusChange?: (result: { status: ActionStatus; id: string }) => void;\n  isHidden?: boolean;\n  idSuffix?: string;\n}\n\nexport function MapLayerCMRTimeseries(props:MapLayerCMRTimeseriesProps) {\n  const {\n    id,\n    stacCol,\n    stacApiEndpoint,\n    date,\n    assetUrlReplacements,\n    onStatusChange,\n  } = props;\n\n  const stacApiEndpointToUse = stacApiEndpoint?? process.env.API_STAC_ENDPOINT;\n  const assetUrl = useCMR({ id, stacCol, stacApiEndpointToUse, date, assetUrlReplacements, stacApiEndpoint, onStatusChange });\n  return <ZarrPaintLayer {...props} assetUrl={assetUrl} />;\n}","import React, {\n  useEffect,\n  RefObject,\n  MutableRefObject,\n  ReactElement\n} from 'react';\nimport styled, { useTheme } from 'styled-components';\nimport mapboxgl, {\n  Map as MapboxMap,\n  AttributionControl,\n  EventData,\n  MapboxOptions,\n  NavigationControl,\n  ScaleControl\n} from 'mapbox-gl';\nimport MapboxGeocoder from '@mapbox/mapbox-gl-geocoder';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport { ProjectionOptions } from 'veda';\n\nimport { AoiChangeListenerOverload, AoiState } from '../aoi/types';\nimport MapboxStyleOverride from './mapbox-style-override';\nimport MbDrawPopover from './aoi/mb-draw-popover';\nimport { aoiCursorStyles, useMbDraw } from './aoi/mb-aoi-draw';\nimport MapOptions from './map-options';\nimport { useMapboxControl } from './use-mapbox-control';\nimport { convertProjectionToMapbox } from './map-options/utils';\nimport MapCoords from './map-coords';\n\nimport { useMapStyle } from './layers/styles';\nimport { BasemapId, Option } from './map-options/basemaps';\nimport { getZoomFromBbox } from '$components/common/map/utils';\nimport { round } from '$utils/format';\n\nmapboxgl.accessToken = process.env.MAPBOX_TOKEN ?? '';\n\nconst SingleMapContainer = styled.div`\n  && {\n    position: absolute;\n    inset: 0;\n  }\n  ${MapboxStyleOverride}\n  ${aoiCursorStyles}\n`;\n\ninterface SimpleMapProps {\n  [key: string]: unknown;\n  mapRef: MutableRefObject<MapboxMap | null>;\n  containerRef: RefObject<HTMLDivElement>;\n  onLoad?(e: EventData): void;\n  onMoveEnd?(e: EventData): void;\n  onUnmount?: () => void;\n  mapOptions: Partial<Omit<MapboxOptions, 'container'>>;\n  withGeocoder?: boolean;\n  withScale?: boolean;\n  aoi?: AoiState;\n  onAoiChange?: AoiChangeListenerOverload;\n  projection?: ProjectionOptions;\n  onProjectionChange?: (projection: ProjectionOptions) => void;\n  basemapStyleId?: BasemapId;\n  onBasemapStyleIdChange?: (basemapId: BasemapId) => void;\n  labelsOption?: boolean;\n  boundariesOption?: boolean;\n  onOptionChange?: (option: Option, value: boolean) => void;\n  attributionPosition?:\n    | 'top-right'\n    | 'top-left'\n    | 'bottom-right'\n    | 'bottom-left'\n    | false;\n}\n\nexport function SimpleMap(props: SimpleMapProps): ReactElement {\n  const {\n    mapRef,\n    containerRef,\n    onLoad,\n    onMoveEnd,\n    onUnmount,\n    mapOptions,\n    withGeocoder,\n    withScale,\n    aoi,\n    onAoiChange,\n    projection,\n    onProjectionChange,\n    attributionPosition = 'bottom-left',\n    basemapStyleId,\n    onBasemapStyleIdChange,\n    labelsOption,\n    boundariesOption,\n    onOptionChange,\n    ...rest\n  } = props;\n\n  const theme = useTheme();\n\n  const mapOptionsControl = useMapboxControl(() => {\n    if (!projection || !onProjectionChange) return null;\n\n    return (\n      <MapOptions\n        projection={projection}\n        onProjectionChange={onProjectionChange}\n        basemapStyleId={basemapStyleId}\n        onBasemapStyleIdChange={onBasemapStyleIdChange}\n        labelsOption={labelsOption}\n        boundariesOption={boundariesOption}\n        onOptionChange={onOptionChange}\n      />\n    );\n  }, [\n    projection,\n    onProjectionChange,\n    basemapStyleId,\n    onBasemapStyleIdChange,\n    labelsOption,\n    boundariesOption,\n    onOptionChange\n  ]);\n\n  const mapCoordsControl = useMapboxControl(() => {\n    if (!mapRef.current) return null;\n\n    return <MapCoords mapInstance={mapRef.current} />;\n  }, []);\n\n  const { style } = useMapStyle();\n\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    const mbMap = new MapboxMap({\n      container: containerRef.current,\n      attributionControl: false,\n      projection: projection && convertProjectionToMapbox(projection),\n      ...mapOptions\n    });\n\n    mapRef.current = mbMap;\n\n    if (onProjectionChange && projection) {\n      mapRef.current.addControl(mapOptionsControl, 'top-left');\n    }\n\n    // Add Geocoder control\n    if (withGeocoder) {\n      const geocoderControl = new MapboxGeocoder({\n        accessToken: mapboxgl.accessToken,\n        marker: false,\n        collapsed: true, \n        // Because of Mapbox issue: https://github.com/mapbox/mapbox-gl-js/issues/12565\n        // We are doing manual centering for now\n        flyTo: false\n      }) as MapboxGeocoder & { _inputEl: HTMLInputElement };\n\n      // Close the geocoder when the result is selected.\n      geocoderControl.on('result', ({ result }) => {\n        geocoderControl.clear();\n        geocoderControl._inputEl.blur();\n        const zoom = result.bbox? getZoomFromBbox(result.bbox): 14;\n        mapRef.current?.flyTo({\n          center: result.center,\n          zoom\n        });\n      });\n\n      mbMap.addControl(geocoderControl, 'top-left');\n    }\n\n    // Add zoom controls without compass.\n    if (mapOptions.interactive !== false) {\n      mapRef.current.addControl(mapCoordsControl, 'bottom-left');\n\n      mbMap.addControl(\n        new NavigationControl({ showCompass: false }),\n        'top-left'\n      );\n    }\n\n    if (withScale) {\n      const scalecontrol = new ScaleControl();\n      mbMap.addControl(scalecontrol, 'bottom-left');\n    }\n\n    onLoad && mbMap.once('load', onLoad);\n\n    // Trigger a resize to handle flex layout quirks.\n    setTimeout(() => mbMap.resize(), 1);\n\n    return () => {\n      mbMap.remove();\n      mapRef.current = null;\n      onUnmount?.();\n    };\n    // Only use the props on mount. We don't want to update the map if they\n    // change.\n  }, []);\n\n  // Handle style changes\n  useEffect(() => {\n    if (!mapRef.current || !style) return;\n    mapRef.current.setStyle(style);\n    /* mapRef is a ref */\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [style]);\n\n  // Handle Attribution\n  useEffect(() => {\n    if (!mapRef.current || !attributionPosition) return;\n\n    const ctrl = new AttributionControl();\n    mapRef.current.addControl(ctrl, attributionPosition);\n    return () => {\n      mapRef.current?.removeControl(ctrl);\n    };\n    /* mapRef is a ref */\n  }, [attributionPosition]);\n\n  useEffect(() => {\n    if (!mapRef.current || !projection) return;\n    // @ts-expect-error setProjection is missing on type\n    mapRef.current.setProjection({ ...convertProjectionToMapbox(projection) });\n  }, [mapRef, projection]);\n\n  useEffect(() => {\n    if (!mapRef.current || typeof onMoveEnd !== 'function') return;\n    const mbMap = mapRef.current;\n\n    const listener = (e) => {\n      onMoveEnd({\n        // The existence of originalEvent indicates that it was not caused by\n        // a method call.\n        userInitiated: Object.prototype.hasOwnProperty.call(e, 'originalEvent'),\n        lng: round(mbMap.getCenter().lng, 4),\n        lat: round(mbMap.getCenter().lat, 4),\n        zoom: round(mbMap.getZoom(), 2)\n      });\n    };\n\n    mbMap.on('moveend', listener);\n\n    return () => {\n      mbMap.off('moveend', listener);\n    };\n  }, [onMoveEnd, mapRef]);\n\n  useMbDraw({\n    mapRef,\n    theme,\n    onChange: onAoiChange,\n    drawing: aoi?.drawing,\n    selectedContext: aoi?.selectedContext,\n    featureCollection: aoi?.featureCollection\n  });\n\n  return (\n    <>\n      <SingleMapContainer ref={containerRef} {...rest} />\n      <MbDrawPopover\n        mapRef={mapRef}\n        onChange={onAoiChange}\n        selectedContext={aoi?.selectedContext}\n      />\n    </>\n  );\n}\n","import { css } from 'styled-components';\nimport {\n  createButtonGroupStyles,\n  createButtonStyles\n} from '@devseed-ui/button';\nimport {\n  iconDataURI,\n  CollecticonPlusSmall,\n  CollecticonMinusSmall,\n  CollecticonMagnifierLeft,\n  CollecticonXmarkSmall\n} from '@devseed-ui/collecticons';\nimport { glsp, themeVal } from '@devseed-ui/theme-provider';\nimport { variableGlsp } from '$styles/variable-utils';\nimport '@mapbox/mapbox-gl-geocoder/dist/mapbox-gl-geocoder.css';\n\nconst MapboxStyleOverride = css`\n  .mapboxgl-control-container {\n    position: absolute;\n    z-index: 2;\n    inset: ${variableGlsp()};\n    pointer-events: none;\n\n    > * {\n      display: flex;\n      flex-flow: column nowrap;\n      gap: ${variableGlsp(0.5)};\n      align-items: flex-start;\n      float: none;\n    }\n\n    .mapboxgl-ctrl {\n      margin: 0;\n      pointer-events: none;\n\n      > * {\n        pointer-events: auto;\n      }\n    }\n\n    .mapboxgl-ctrl-attrib {\n      order: 100;\n      padding: 0;\n      background: none;\n    }\n\n    .mapboxgl-ctrl-attrib-inner {\n      color: ${themeVal('color.surface')};\n      border-radius: ${themeVal('shape.ellipsoid')};\n      padding: ${glsp(0.125, 0.5)};\n      font-size: 0.75rem;\n      line-height: 1rem;\n      background: ${themeVal('color.base-400a')};\n      transform: translateY(-0.075rem);\n\n      a,\n      a:visited {\n        color: inherit;\n        font-size: inherit;\n        line-height: inherit;\n        vertical-align: top;\n        text-decoration: none;\n      }\n\n      a:hover {\n        opacity: 0.64;\n      }\n    }\n  }\n\n  /* stylelint-disable no-descending-specificity */\n  .mapboxgl-ctrl-logo,\n  .mapboxgl-ctrl-attrib-inner {\n    margin: 0;\n    opacity: 0.48;\n    transition: all 0.24s ease-in-out 0s;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n  /* stylelint-enable no-descending-specificity */\n\n  .mapboxgl-ctrl-bottom-left {\n    flex-flow: row wrap;\n    align-items: flex-end;\n    align-items: center;\n  }\n\n  .mapboxgl-ctrl-group {\n    ${createButtonGroupStyles({ orientation: 'vertical' })}\n    background: none;\n\n    &,\n    &:not(:empty) {\n      box-shadow: ${themeVal('boxShadow.elevationA')};\n    }\n\n    > button {\n      span {\n        display: none;\n      }\n\n      &::before {\n        display: inline-block;\n        content: '';\n        background-repeat: no-repeat;\n        background-size: 1rem 1rem;\n        width: 1rem;\n        height: 1rem;\n      }\n    }\n\n    > button + button {\n      margin-top: -${themeVal('button.shape.border')};\n    }\n\n    > button:first-child:not(:last-child) {\n      &,\n      &::after {\n        border-bottom-right-radius: 0;\n        border-bottom-left-radius: 0;\n      }\n\n      &::after {\n        clip-path: inset(-100% -100% 0 -100%);\n      }\n    }\n    > button:last-child:not(:first-child) {\n      &,\n      &::after {\n        border-top-left-radius: 0;\n        border-top-right-radius: 0;\n      }\n\n      &::after {\n        clip-path: inset(0 -100% -100% -100%);\n      }\n    }\n    > button:not(:first-child):not(:last-child) {\n      &,\n      &::after {\n        border-radius: 0;\n      }\n\n      &::after {\n        clip-path: inset(0 -100%);\n      }\n    }\n  }\n\n  .mapboxgl-ctrl-zoom-in.mapboxgl-ctrl-zoom-in,\n  .mapboxgl-ctrl-zoom-out.mapboxgl-ctrl-zoom-out {\n    ${createButtonStyles({ variation: 'primary-fill', fitting: 'skinny' })}\n  }\n\n  .mapboxgl-ctrl-zoom-in.mapboxgl-ctrl-zoom-in::before {\n    background-image: url(${({ theme }) =>\n      iconDataURI(CollecticonPlusSmall, {\n        color: theme.color.surface\n      })});\n  }\n\n  .mapboxgl-ctrl-zoom-out.mapboxgl-ctrl-zoom-out::before {\n    background-image: url(${({ theme }) =>\n      iconDataURI(CollecticonMinusSmall, {\n        color: theme.color.surface\n      })});\n  }\n\n  .mapboxgl-marker:hover {\n    cursor: pointer;\n  }\n\n  .mapboxgl-ctrl-scale {\n    color: ${themeVal('color.surface')};\n    border-color: ${themeVal('color.surface')};\n    background-color: ${themeVal('color.base-400a')};\n  }\n\n  /* GEOCODER styles */\n  .mapboxgl-ctrl.mapboxgl-ctrl-geocoder {\n    background-color: ${themeVal('color.surface')};\n    color: ${themeVal('type.base.color')};\n    font: ${themeVal('type.base.style')} ${themeVal('type.base.weight')}\n      0.875rem/1.25rem ${themeVal('type.base.family')};\n    transition: all 0.24s ease 0s;\n\n    &::before {\n      position: absolute;\n      top: 8px;\n      left: 8px;\n      content: '';\n      width: 1rem;\n      height: 1rem;\n      background-image: url(${({ theme }) =>\n        iconDataURI(CollecticonMagnifierLeft, {\n          color: theme.color.primary\n        })});\n      background-repeat: no-repeat;\n    }\n\n    &.mapboxgl-ctrl-geocoder--collapsed {\n      width: 2rem;\n      min-width: 2rem;\n      background-color: ${themeVal('color.primary')};\n\n      &::before {\n        background-image: url(${({ theme }) =>\n          iconDataURI(CollecticonMagnifierLeft, {\n            color: theme.color.surface\n          })});\n      }\n    }\n\n    .mapboxgl-ctrl-geocoder--icon {\n      display: none;\n    }\n\n    .mapboxgl-ctrl-geocoder--icon-loading {\n      top: 5px;\n      right: 8px;\n    }\n\n    .mapboxgl-ctrl-geocoder--button {\n      width: 2rem;\n      height: 2rem;\n      top: 0;\n      right: 0;\n      background: none;\n      border-radius: ${themeVal('shape.rounded')};\n      transition: all 0.24s ease 0s;\n      color: inherit;\n\n      &:hover {\n        opacity: 0.64;\n      }\n\n      &::before {\n        position: absolute;\n        top: 8px;\n        left: 8px;\n        content: '';\n        width: 1rem;\n        height: 1rem;\n        background-image: url(${({ theme }) =>\n          iconDataURI(CollecticonXmarkSmall, {\n            color: theme.color['base-300']\n          })});\n      }\n    }\n\n    .mapboxgl-ctrl-geocoder--input {\n      height: 2rem;\n      width: 100%;\n      outline: none;\n      font: ${themeVal('type.base.style')} ${themeVal('type.base.weight')}\n        0.875rem / ${themeVal('type.base.line')} ${themeVal('type.base.family')};\n      padding: 0.25rem 2rem;\n      color: inherit;\n\n      &::placeholder {\n        color: inherit;\n        opacity: 0.64;\n      }\n    }\n\n    .mapboxgl-ctrl-geocoder--powered-by {\n      display: none !important;\n    }\n\n    .suggestions {\n      margin-bottom: 0.5rem;\n      border-radius: ${themeVal('shape.rounded')};\n      font: inherit;\n\n      a {\n        padding: 0.375rem 1rem;\n        color: inherit;\n        transition: all 0.24s ease 0s;\n\n        &:hover {\n          opacity: 1;\n          color: ${themeVal('color.primary')};\n          background: ${themeVal('color.primary-100')};\n        }\n      }\n\n      li {\n        &:first-child a {\n          padding-top: 0.5rem;\n        }\n\n        &:last-child a {\n          padding-bottom: 0.75rem;\n        }\n\n        &.active > a {\n          position: relative;\n          background: ${themeVal('color.primary-50')};\n          color: ${themeVal('color.primary')};\n\n          &::before {\n            content: '';\n            position: absolute;\n            left: 0;\n            top: 0;\n            height: 100%;\n            width: 0.25rem;\n            background: ${themeVal('color.primary')};\n          }\n\n          &:hover {\n            background: ${themeVal('color.primary-100')};\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default MapboxStyleOverride;\n","import React, { MutableRefObject, useMemo } from 'react';\nimport { Map as MapboxMap } from 'mapbox-gl';\nimport styled from 'styled-components';\nimport centroid from '@turf/centroid';\nimport { CollecticonTrashBin } from '@devseed-ui/collecticons';\nimport { Button } from '@devseed-ui/button';\n\nimport ReactPopoverGl from '../mb-popover';\nimport { AoiChangeListener, AoiState } from '$components/common/aoi/types';\nimport { makeFeatureCollection } from '$components/common/aoi/utils';\n\nconst ActionPopoverInner = styled.div`\n  padding: 0.25rem;\n`;\n\ninterface MbDrawPopoverProps {\n  mapRef: MutableRefObject<MapboxMap | null>;\n  onChange?: AoiChangeListener;\n  selectedContext: AoiState['selectedContext'];\n}\n\nfunction getCenterCoords(selectedContext) {\n  if (!selectedContext) return null;\n\n  const items = selectedContext.points.length\n    ? selectedContext.points\n    : selectedContext.features;\n\n  const centerPoint = centroid(makeFeatureCollection(items));\n\n  return centerPoint.geometry.coordinates as [number, number];\n}\n\nexport default function MbDrawPopover(props: MbDrawPopoverProps) {\n  const { mapRef, onChange, selectedContext } = props;\n\n  const lngLat = useMemo(\n    () => getCenterCoords(selectedContext),\n    [selectedContext]\n  );\n\n  if (!mapRef.current || !onChange) return null;\n\n  return (\n    <ReactPopoverGl\n      mbMap={mapRef.current}\n      lngLat={lngLat}\n      closeOnClick={false}\n      renderContents={() => {\n        return (\n          <ActionPopoverInner>\n            <Button\n              variation='base-text'\n              onClick={() => onChange('aoi.trash-click')}\n              fitting='skinny'\n            >\n              <CollecticonTrashBin />\n            </Button>\n          </ActionPopoverInner>\n        );\n      }}\n    />\n  );\n}\n","import React, { useCallback, useEffect, useRef } from 'react';\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\n\nimport MBPopoverInner from './popover-inner';\nimport { POPOVER_SHOW_HIDE_ANIM_TIME } from './styled';\nimport { MBPopoverProps } from './types';\n\n// Note: This wrapper acts as the entrypoint for the popover mounting and\n// unmounting it when coordinates are removed. This approach helps to deal with\n// setting event listeners and managing animations\n\n/**\n * Mapbox Popover\n * An alternative to mapbox popover that is portaled to the body to avoid\n * clipping due to map and or popover size.\n * The popover is shown when coordinates are present, if they are currently\n * within the map viewport.\n *\n * The popover has internal mechanisms to hide itself when the map gets clicked\n * but it is important to remove the coordinates once the popover is hidden.\n *\n * @example\n *  <ReactPopoverGl\n *    mbMap={mbMap}\n *    lngLat={coords}\n *    onClose={() => setCoords(null)}\n * />\n *\n * If no overrides are applied, the popover structure is outlined below.\n * It is listed with styled components and the corresponding html element\n * in front.\n * <Popover>                   // article\n *   <PopoverContents>         // div\n *     <PopoverHeader>         // header\n *       <PopoverHeadline>     // div\n *         <h1></h1>           -- title prop\n *         <p></p>             -- subtitle or suptitle (see below) prop\n *       </PopoverHeadline>\n *       <PopoverToolbar>      // div\n *         <CloseButton />     // button\n *       </PopoverToolbar>\n *     </PopoverHeader>\n *     <PopoverBody />         // div -- content prop\n *     <PopoverFooter />       // footer -- footerContent prop\n *   </PopoverContents>\n * </Popover>\n *\n * The `Popover` and `PopoverContents` are required for positioning and styling\n * purposes. All other elements can be replaced with render functions.\n * The code that generates the structure above is:\n * @example\n * <ReactPopoverGl\n *   mbMap={mbMap}\n *   lngLat={coords}\n *   onClose={() => setCoords(null)}\n *   title='Popover Title'\n *   subtitle='Subtitle below'\n *   content={<p>This is the content</p>}\n *   footerContent={<p>This is the footer content</p>}\n * />\n *\n */\nexport default function MBPopover(props: MBPopoverProps) {\n  const { mbMap, lngLat, onClose: onCloseProp, ...rest } = props;\n\n  const switchingPopovers = useRef(false);\n  // Store the previous lat long.\n  const pLngLat = useRef<MBPopoverProps[\"lngLat\"]>();\n\n  const onClose = useCallback(() => {\n    if (switchingPopovers.current) {\n      switchingPopovers.current = false;\n      return;\n    }\n    onCloseProp?.();\n  }, [onCloseProp]);\n\n  useEffect(() => {\n    // When we're transitioning the popover to a different location we need to\n    // prevent the map click from triggering the close callback or the new\n    // popover will not show up because the coordinates will be cleared on the\n    // parent component.\n    if (pLngLat.current && lngLat) {\n      const prev = pLngLat.current.join('-');\n      const curr = lngLat.join('-');\n      if (prev !== curr) {\n        switchingPopovers.current = true;\n      }\n    }\n\n    pLngLat.current = lngLat;\n  }, [lngLat]);\n\n  if (lngLat && !mbMap) {\n    /* eslint-disable-next-line no-console */\n    console.error('Mapbox map required for the popover. Use the mbMap prop.');\n    return null;\n  }\n\n  return (\n    <TransitionGroup component={null}>\n      {lngLat && (\n        // Ideally we'd use a Transition instead of CSSTransition and handle\n        // the transitions with styled components.\n        // However when the component is mounting there is no reflow between\n        // the exited and entering states and therefore there's no time for\n        // the initial styles to be applied.\n        // The suggestion listed at\n        // https://github.com/reactjs/react-transition-group/issues/223 of\n        // reading a node property onEnter and causing a reflow is not working\n        // in this case. CSSTransition relies on css classes which work\n        // perfectly fine.\n        <CSSTransition\n          key={lngLat.join('-')}\n          timeout={POPOVER_SHOW_HIDE_ANIM_TIME}\n          classNames='popover-gl'\n        >\n          <MBPopoverInner\n            {...rest}\n            mbMap={mbMap}\n            lngLat={lngLat}\n            onClose={onClose}\n          />\n        </CSSTransition>\n      )}\n    </TransitionGroup>\n  );\n}\n","import React, {\n  useCallback,\n  useState,\n  useEffect,\n  useRef,\n  ReactNode\n} from 'react';\nimport ReactDOM from 'react-dom';\nimport { Toolbar, ToolbarIconButton } from '@devseed-ui/toolbar';\nimport { CollecticonXmarkSmall } from '@devseed-ui/collecticons';\n\nimport {\n  getAnchorTranslate,\n  Popover,\n  PopoverContents,\n  PopoverHeader,\n  PopoverHeadline,\n  PopoverTitle,\n  PopoverSubtitle,\n  PopoverBody,\n  PopoverFooter,\n  PopoverAnchor\n} from './styled';\nimport {\n  MBPopoverProps,\n  PopoverRenderFunction,\n  PopoverRenderFunctionBag\n} from './types';\n\nconst Try = (\n  props: {\n    fn?: PopoverRenderFunction;\n    children: ReactNode;\n  } & PopoverRenderFunctionBag\n) => {\n  const { fn, children, ...rest } = props;\n  return <>{typeof fn === 'function' ? fn(rest) : children ?? null}</>;\n};\n\ntype AnchorPoints =\n  | ['top' | 'bottom']\n  | ['top' | 'bottom', 'left' | 'right']\n  | [];\n\n/**\n * Mapbox popover inner element.\n * 🛑 🛑 🛑 NOT TO BE USED DIRECTLY 🛑 🛑 🛑\n *\n * See documentation on index.sx file.\n */\nexport default function MBPopoverInner(\n  props: Omit<MBPopoverProps, 'onClose' | 'lngLat'> & {\n    onClose: () => void;\n    className?: string;\n    lngLat: [number, number];\n  }\n) {\n  const {\n    className,\n    mbMap,\n    closeOnClick,\n    closeOnMove,\n    onClose,\n    lngLat,\n    offset: [offsetTop, offsetBottom] = [0, 0],\n    renderContents,\n    renderHeader,\n    renderHeadline,\n    renderToolbar,\n    renderBody,\n    renderFooter,\n    closeButton,\n    title,\n    titleHLevel = 'h2',\n    subtitle,\n    suptitle,\n    content,\n    footerContent\n  } = props;\n\n  const popoverEl = useRef<HTMLElement>(null);\n  const [anchorPoints, setAnchorPoints] = useState<AnchorPoints>([]);\n  const [position, setPosition] = useState<{\n    top: number | null;\n    left: number | null;\n  }>({\n    top: null,\n    left: null\n  });\n\n  const update = useCallback(() => {\n    if (!popoverEl.current) return;\n\n    const { pageYOffset, pageXOffset } = window;\n    const { width, height, top, left } = mbMap\n      .getContainer()\n      .getBoundingClientRect();\n\n    const mapTop = pageYOffset + top;\n    const mapLeft = pageXOffset + left;\n    const mapRight = pageXOffset + left + width;\n    const mapBottom = pageYOffset + top + height;\n\n    const pos = mbMap.project(lngLat);\n\n    const anchorPosition = {\n      top: mapTop + pos.y,\n      left: mapLeft + pos.x\n    };\n\n    if (\n      // Top bound\n      anchorPosition.top < mapTop ||\n      // Bottom bound\n      anchorPosition.top > mapBottom ||\n      // Left bound\n      anchorPosition.left < mapLeft ||\n      // Right bound\n      anchorPosition.left > mapRight\n    ) {\n      setAnchorPoints([]);\n      setPosition({\n        top: null,\n        left: null\n      });\n      return;\n    }\n\n    let anchorPoints: AnchorPoints = [];\n\n    const popoverDomRect = popoverEl.current.getBoundingClientRect();\n    const halfW = popoverDomRect.width / 2;\n\n    if (anchorPosition.top - popoverDomRect.height - offsetTop < pageYOffset) {\n      anchorPoints = ['top'];\n      anchorPosition.top += offsetBottom;\n    } else {\n      anchorPoints = ['bottom'];\n      anchorPosition.top -= offsetTop;\n    }\n\n    if (anchorPosition.left - halfW < mapLeft) {\n      anchorPoints = [...anchorPoints, 'left'];\n    } else if (anchorPosition.left + halfW > mapRight) {\n      anchorPoints = [...anchorPoints, 'right'];\n    }\n\n    setAnchorPoints(anchorPoints);\n    setPosition(anchorPosition);\n  }, [mbMap, lngLat, offsetTop, offsetBottom]);\n\n  const destroy = useCallback(() => {\n    mbMap.off('click', destroy);\n    mbMap.off('move', update);\n    mbMap.off('move', destroy);\n    onClose();\n  }, [mbMap, onClose, update]);\n\n  // Setup listeners.\n  useEffect(() => {\n    if (closeOnClick) {\n      mbMap.on('click', destroy);\n    }\n\n    // For situations where the body size changes.\n    let resizeObserver;\n\n    if (closeOnMove) {\n      mbMap.on('move', destroy);\n    } else {\n      mbMap.on('move', update);\n      resizeObserver = new ResizeObserver(update);\n      // Start observing\n      resizeObserver.observe(document.body);\n    }\n\n    return () => {\n      mbMap.off('click', destroy);\n      mbMap.off('move', update);\n      mbMap.off('move', destroy);\n      resizeObserver?.disconnect();\n    };\n  }, [mbMap, closeOnClick, closeOnMove, update, destroy]);\n\n  // Update on mount.\n  useEffect(() => {\n    update();\n    // Ensure the popover gets repositioned after it has sizes defined.\n    setTimeout(update, 1);\n    // Only do this on mount. The update is then called by the listener.\n    /* eslint-disable-next-line react-hooks/exhaustive-deps */\n  }, []);\n\n  const { top, left } = position;\n\n  const hasPlacement = top !== null && left !== null;\n  const anchor = anchorPoints.join('-') as PopoverAnchor;\n\n  const popoverStyle = {\n    transform: hasPlacement\n      ? `${getAnchorTranslate(anchor)} translate(${left}px, ${top}px)`\n      : undefined,\n    display: !hasPlacement ? 'none' : undefined\n  };\n\n  return ReactDOM.createPortal(\n    // This wrapper div is needed because it will receive the css classes from\n    // CSSTransition.\n    <div>\n      <Popover className={className} style={popoverStyle} ref={popoverEl}>\n        <PopoverContents anchor={anchor} verticalAttachment={anchorPoints[0]}>\n          <Try fn={renderContents} close={destroy}>\n            <Try fn={renderHeader} close={destroy}>\n              <PopoverHeader>\n                <Try fn={renderHeadline} close={destroy}>\n                  <PopoverHeadline>\n                    <PopoverTitle as={titleHLevel}>{title}</PopoverTitle>\n                    {(subtitle || suptitle) && (\n                      <PopoverSubtitle isSup={!subtitle}>\n                        {subtitle ?? suptitle}\n                      </PopoverSubtitle>\n                    )}\n                  </PopoverHeadline>\n                </Try>\n                <Try fn={renderToolbar} close={destroy}>\n                  {closeButton && (\n                    <Toolbar>\n                      <ToolbarIconButton size='small' onClick={destroy}>\n                        <CollecticonXmarkSmall\n                          title='Close popover'\n                          meaningful\n                        />\n                      </ToolbarIconButton>\n                    </Toolbar>\n                  )}\n                </Try>\n              </PopoverHeader>\n            </Try>\n            <Try fn={renderBody} close={destroy}>\n              <PopoverBody>{content}</PopoverBody>\n            </Try>\n            <Try fn={renderFooter} close={destroy}>\n              {footerContent && <PopoverFooter>{footerContent}</PopoverFooter>}\n            </Try>\n          </Try>\n        </PopoverContents>\n      </Popover>\n    </div>,\n    document.querySelector('body') as HTMLElement\n  );\n}\n\nMBPopoverInner.defaultProps = {\n  closeOnClick: true,\n  closeButton: true,\n  offset: [0, 0]\n};\n","import styled, { css } from 'styled-components';\nimport { glsp, themeVal } from '@devseed-ui/theme-provider';\nimport { createSubtitleStyles, Heading } from '@devseed-ui/typography';\nimport { Toolbar } from '@devseed-ui/toolbar';\n\nimport { variableGlsp } from '$styles/variable-utils';\n\nexport type PopoverAnchor =\n  | 'top'\n  | 'bottom'\n  | 'top-left'\n  | 'top-right'\n  | 'bottom-left'\n  | 'bottom-right';\n\nexport const POPOVER_SHOW_HIDE_ANIM_TIME = 240;\n\nconst applyBorderStyles = ({ anchor }: { anchor: PopoverAnchor }) => {\n  return {\n    'top-left': css`\n      border-top-left-radius: 0;\n    `,\n    'top-right': css`\n      border-top-right-radius: 0;\n    `,\n    'bottom-left': css`\n      border-bottom-left-radius: 0;\n    `,\n    'bottom-right': css`\n      border-bottom-right-radius: 0;\n    `\n  }[anchor];\n};\n\nconst applyAnchorStyles = ({ anchor }: { anchor: PopoverAnchor }) => {\n  const centerClip = 'clip-path: polygon(50% 0, 0% 100%, 100% 100%);';\n  const cornerClip = 'clip-path: polygon(0 0, 0% 100%, 100% 100%);';\n\n  if (anchor === 'top' || anchor === 'bottom') {\n    const common = css`\n      ${centerClip}\n      left: 50%;\n      width: 1rem;\n      aspect-ratio: 2/1;\n    `;\n    if (anchor === 'top') {\n      return css`\n        ${common}\n        bottom: 100%;\n        transform: translate(-50%, 0);\n      `;\n    } else {\n      // anchor === 'bottom'\n      return css`\n        ${common}\n        top: 100%;\n        transform: scaleY(-1) translate(-50%, 0);\n      `;\n    }\n  } else {\n    const common = css`\n      ${cornerClip}\n      width: 0.75rem;\n      height: 0.75rem;\n      pointer-events: none;\n    `;\n\n    if (anchor === 'top-left') {\n      return css`\n        ${common}\n        bottom: 100%;\n        left: 0;\n      `;\n    }\n    if (anchor === 'top-right') {\n      return css`\n        ${common}\n        bottom: 100%;\n        right: 0;\n        transform: scaleX(-1);\n      `;\n    }\n    if (anchor === 'bottom-left') {\n      return css`\n        ${common}\n        top: 100%;\n        left: 0;\n        transform: scaleY(-1);\n      `;\n    }\n    // anchor === 'bottom-right'\n    return css`\n      ${common}\n      top: 100%;\n      right: 0;\n      transform: scaleX(-1) scaleY(-1);\n    `;\n  }\n};\n\nexport const getAnchorTranslate = (pos) =>\n  ({\n    center: 'translate(-50%,-50%)',\n    top: 'translate(-50%,0)',\n    'top-left': 'translate(0,0)',\n    'top-right': 'translate(-100%,0)',\n    bottom: 'translate(-50%,-100%)',\n    'bottom-left': 'translate(0,-100%)',\n    'bottom-right': 'translate(-100%,-100%)',\n    left: 'translate(0,-50%)',\n    right: 'translate(-100%,-50%)'\n  }[pos]);\n\nconst getTransition = (isShowing) => {\n  const easing = isShowing\n    ? 'cubic-bezier(0.175, 0.885, 0.32, 1.275)' // easeOutBack\n    : 'cubic-bezier(0.6, -0.28, 0.735, 0.045)'; // easeInBack\n  return css`\n    transition: transform ${POPOVER_SHOW_HIDE_ANIM_TIME}ms ${easing},\n      opacity ${POPOVER_SHOW_HIDE_ANIM_TIME}ms ease-in-out;\n  `;\n};\n\nexport const Popover = styled.article`\n  padding: 0.75rem 0;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1;\n`;\n\nexport const PopoverContents = styled.div<{\n  verticalAttachment?: 'top' | 'bottom';\n  anchor: PopoverAnchor;\n}>`\n  border-radius: ${themeVal('shape.rounded')};\n  background: ${themeVal('color.surface')};\n  box-shadow: ${themeVal('boxShadow.elevationD')};\n  transform: scale(1);\n  transform-origin: center\n    ${({ verticalAttachment: va }) => (va === 'top' ? 'top' : 'bottom')};\n\n  ${applyBorderStyles}\n\n  &::before {\n    content: '';\n    position: absolute;\n    background: #fff;\n\n    ${applyAnchorStyles}\n  }\n\n  > *:last-child {\n    margin-bottom: 0;\n  }\n\n  .popover-gl-enter & {\n    ${getTransition(true)}\n    transform: scale(0);\n    opacity: 0;\n  }\n\n  .popover-gl-enter-active & {\n    transform: scale(1);\n    opacity: 1;\n  }\n\n  .popover-gl-exit & {\n    ${getTransition(false)}\n    transform: scale(1);\n    opacity: 1;\n  }\n\n  .popover-gl-exit-active & {\n    transform: scale(0);\n    opacity: 0;\n  }\n`;\n\nexport const PopoverHeader = styled.header`\n  position: relative;\n  z-index: 9999;\n  display: flex;\n  gap: ${variableGlsp(0.5, 1)};\n  padding: 0.75rem;\n\n  &::before {\n    position: absolute;\n    top: 100%;\n    left: 0;\n    right: 0;\n    content: '';\n    pointer-events: none;\n    height: 1px;\n    background: ${themeVal('color.base-200a')};\n  }\n\n  ${Toolbar} {\n    margin-left: auto;\n  }\n`;\n\nexport const PopoverHeadline = styled.div`\n  grid-row: 1;\n  min-width: 0px;\n  display: grid;\n  justify-content: start;\n  align-items: center;\n  grid-gap: 0.5rem;\n\n  > * {\n    grid-row: 1;\n  }\n`;\n\nexport const PopoverTitle = styled(Heading)`\n  font-size: 1rem;\n  line-height: 1.5rem;\n  margin: 0;\n`;\n\nexport const PopoverSubtitle = styled.p<{ isSup: boolean }>`\n  order: ${({ isSup }) => (isSup ? -1 : 1)};\n  ${createSubtitleStyles()}\n`;\n\nexport const PopoverBody = styled.div`\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-gap: ${glsp(0.75)};\n  padding: 0.75rem;\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n`;\n\nexport const PopoverFooter = styled.footer`\n  padding: 0 0.75rem 0.75rem 0.75rem;\n  display: flex;\n  flex-flow: column;\n  gap: ${glsp()};\n`;\n","import bbox from '@turf/bbox';\nimport featArea from '@turf/area';\nimport union from '@turf/union';\nimport { Feature, FeatureCollection, Polygon } from 'geojson';\n\nimport { AoiBounds, AoiBoundsUnset, AoiFeature } from './types';\nimport { formatThousands } from '$utils/format';\n\nexport const boundsFromFeature = (\n  feat: AoiFeature | null\n): AoiBounds | AoiBoundsUnset => {\n  if (!feat) {\n    return { ne: [], sw: [] };\n  }\n\n  const b = bbox(feat);\n  return {\n    ne: [b[2], b[3]],\n    sw: [b[0], b[1]]\n  };\n};\n\n/**\n * Returns a feature with a polygon geometry made of the provided bounds.\n * If a feature is provided, the properties are maintained.\n *\n * @param {object} feature Feature to update\n * @param {object} bounds Bounds in NE/SW format\n */\nexport const featureFromBounds = (\n  feature: AoiFeature | null,\n  bounds: AoiBounds\n): AoiFeature => {\n  const {\n    ne: [neLng, neLat],\n    sw: [swLng, swLat]\n  } = bounds;\n\n  const geometry: Polygon = {\n    type: 'Polygon',\n    coordinates: [\n      [\n        [swLng, neLat],\n        [neLng, neLat],\n        [neLng, swLat],\n        [swLng, swLat],\n        [swLng, neLat]\n      ]\n    ]\n  };\n\n  return feature\n    ? {\n        ...feature,\n        geometry\n      }\n    : {\n        type: 'Feature',\n        id: 'aoi-feature',\n        properties: {},\n        geometry\n      };\n};\n\nexport const calcFeatCollArea = (\n  featureCollection: FeatureCollection<Polygon> | null\n) => {\n  if (!featureCollection?.features.length) return '0';\n\n  // Merge the features to calculate the correct area in the case of overlap.\n  const mergedFeature = featureCollection.features\n    .slice(1)\n    .reduce((acc, feature) => {\n      return union(acc, feature)!;\n    }, featureCollection.features[0]);\n\n  // Convert from m2 to km2.\n  const km2 = featArea(mergedFeature) / 1e6;\n  return formatThousands(km2, { decimals: 0, shorten: true });\n};\n\nexport const areBoundsValid = (bounds: AoiBounds | AoiBoundsUnset) => {\n  // Check if bounds are valid.\n  return (\n    bounds.ne[0] !== undefined &&\n    bounds.ne[1] !== undefined &&\n    bounds.sw[0] !== undefined &&\n    bounds.sw[1] !== undefined\n  );\n};\n\nexport const makeFeatureCollection = (\n  features = [] as Feature<Polygon>[]\n): FeatureCollection<Polygon> => ({\n  type: 'FeatureCollection',\n  features\n});\n","import { useEffect, useRef } from 'react';\nimport MapboxDraw from '@mapbox/mapbox-gl-draw';\nimport { css } from 'styled-components';\n\nimport { computeDrawStyles } from './style';\n\nexport const aoiCursorStyles = css`\n  &.mouse-add .mapboxgl-canvas-container {\n    cursor: crosshair;\n  }\n  &.mouse-pointer .mapboxgl-canvas-container {\n    cursor: pointer;\n  }\n  &.mouse-move .mapboxgl-canvas-container {\n    cursor: move;\n  }\n`;\n\nexport function useMbDraw({\n  mapRef,\n  theme,\n  onChange,\n  drawing,\n  featureCollection\n}) {\n  const mbDrawRef = useRef();\n\n  useEffect(() => {\n    const mbMap = mapRef.current;\n    if (!mbMap || !onChange || !mbMap._interactive) return;\n\n    const newMbDraw = new MapboxDraw({\n      modes: MapboxDraw.modes,\n      displayControlsDefault: false,\n      styles: computeDrawStyles(theme)\n    });\n\n    mbDrawRef.current = newMbDraw;\n\n    mbMap.addControl(newMbDraw, 'top-left');\n\n    // Store control for later retrieval and imperative method use.\n    mbMap._drawControl = newMbDraw;\n\n    const drawCreateListener = (e) =>\n      onChange?.('aoi.draw-finish', { feature: e.features[0] });\n\n    const drawSelectionListener = (e) => {\n      const mode = newMbDraw.getMode();\n      const features = e.features;\n      const points = e.points;\n\n      // A feature is only selected if in simple_select mode. When a feature is\n      // selected with direct_select mode we don't count it because it can't be\n      // deleted. This is how the plugin works. Go figure.\n      const isSelected =\n        points.length || (features.length && mode === 'simple_select');\n\n      onChange?.('aoi.selection', {\n        selected: isSelected,\n        context: isSelected\n          ? {\n              features,\n              points\n            }\n          : undefined\n      });\n    };\n\n    const drawUpdateListener = (e) => {\n      // If the user deletes points from a polygon leaving it with just 2\n      // points, it is no longer a polygon and the coordinates array will be\n      // empty. In this case don't emit the update event as mbDraw will emit a\n      // delete event right after.\n      e.features[0].geometry.coordinates.length &&\n        onChange?.('aoi.update', { feature: e.features[0] });\n    };\n\n    const drawModeListener = (e) =>\n      e.mode === 'simple_select' &&\n      onChange?.('aoi.selection', { selected: false });\n\n    const drawDeleteListener = (e) =>\n      onChange?.('aoi.delete', { ids: e.features.map((f) => f.id) });\n\n    mbMap\n      .on('draw.create', drawCreateListener)\n      .on('draw.selectionchange', drawSelectionListener)\n      .on('draw.modechange', drawModeListener)\n      .on('draw.delete', drawDeleteListener)\n      .on('draw.update', drawUpdateListener);\n\n    return () => {\n      if (!mbMap || !newMbDraw) return;\n\n      mbMap\n        .off('draw.create', drawCreateListener)\n        .off('draw.selectionchange', drawSelectionListener)\n        .off('draw.update', drawUpdateListener);\n\n      mbMap.hasControl(newMbDraw) && mbMap.removeControl(newMbDraw);\n    };\n  }, [mapRef, theme, onChange]);\n\n  // Set / delete the feature.\n  useEffect(() => {\n    const mbDraw = mbDrawRef.current;\n    if (!mbDraw) return;\n\n    if (featureCollection) {\n      mbDraw.set(featureCollection);\n    } else {\n      mbDraw.deleteAll();\n    }\n  }, [featureCollection]);\n\n  // Start/stop the drawing.\n  useEffect(() => {\n    const mbDraw = mbDrawRef.current;\n    if (!mbDraw) return;\n    mbDraw.changeMode(drawing ? 'draw_polygon' : 'simple_select');\n  }, [drawing]);\n}\n","import { DefaultTheme } from 'styled-components';\n\nexport const computeDrawStyles = (theme: DefaultTheme) => [\n  {\n    id: 'gl-draw-polygon-fill-inactive',\n    type: 'fill',\n    filter: [\n      'all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Polygon'],\n      ['!=', 'mode', 'static']\n    ],\n    paint: {\n      'fill-color': theme.color?.primary,\n      'fill-outline-color': theme.color?.primary,\n      'fill-opacity': 0.16\n    }\n  },\n  {\n    id: 'gl-draw-polygon-stroke-inactive',\n    type: 'line',\n    filter: [\n      'all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Polygon'],\n      ['!=', 'mode', 'static']\n    ],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round'\n    },\n    paint: {\n      'line-color': theme.color?.primary,\n      'line-width': 2\n    }\n  },\n  {\n    id: 'gl-draw-polygon-fill-active',\n    type: 'fill',\n    filter: ['all', ['==', 'active', 'true'], ['==', '$type', 'Polygon']],\n    paint: {\n      'fill-color': theme.color?.primary,\n      'fill-outline-color': theme.color?.primary,\n      'fill-opacity': 0.16\n    }\n  },\n  {\n    id: 'gl-draw-polygon-stroke-active',\n    type: 'line',\n    filter: ['all', ['==', 'active', 'true'], ['==', '$type', 'Polygon']],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round'\n    },\n    paint: {\n      'line-color': theme.color?.primary,\n      'line-dasharray': [0.64, 2],\n      'line-width': 2\n    }\n  },\n  {\n    id: 'gl-draw-line-active',\n    type: 'line',\n    filter: ['all', ['==', '$type', 'LineString'], ['==', 'active', 'true']],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round'\n    },\n    paint: {\n      'line-color': theme.color?.primary,\n      'line-dasharray': [0.64, 2],\n      'line-width': 2\n    }\n  },\n  {\n    id: 'gl-draw-polygon-and-line-vertex-stroke-inactive',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', 'meta', 'vertex'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static']\n    ],\n    paint: {\n      'circle-radius': 6,\n      'circle-color': '#fff'\n    }\n  },\n  {\n    id: 'gl-draw-polygon-and-line-vertex-inactive',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', 'meta', 'vertex'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static']\n    ],\n    paint: {\n      'circle-radius': 4,\n      'circle-color': theme.color?.primary\n    }\n  },\n  {\n    id: 'gl-draw-point-stroke-active',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', '$type', 'Point'],\n      ['==', 'active', 'true'],\n      ['!=', 'meta', 'midpoint']\n    ],\n    paint: {\n      'circle-radius': 8,\n      'circle-color': '#fff'\n    }\n  },\n  {\n    id: 'gl-draw-point-active',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', '$type', 'Point'],\n      ['!=', 'meta', 'midpoint'],\n      ['==', 'active', 'true']\n    ],\n    paint: {\n      'circle-radius': 6,\n      'circle-color': theme.color?.primary\n    }\n  },\n  {\n    id: 'gl-draw-polygon-midpoint',\n    type: 'circle',\n    filter: ['all', ['==', '$type', 'Point'], ['==', 'meta', 'midpoint']],\n    paint: {\n      'circle-radius': 3,\n      'circle-color': '#fff'\n    }\n  }\n];\n","import React from 'react';\nimport styled from 'styled-components';\nimport { glsp, themeVal } from '@devseed-ui/theme-provider';\nimport { CollecticonGlobe } from '@devseed-ui/collecticons';\nimport {\n  Dropdown,\n  DropMenu,\n  DropMenuItem,\n  DropTitle\n} from '@devseed-ui/dropdown';\nimport { Button, createButtonStyles } from '@devseed-ui/button';\nimport { FormSwitch } from '@devseed-ui/form';\nimport { Subtitle } from '@devseed-ui/typography';\n\nimport {\n  ProjectionItemConic,\n  ProjectionItemCustom,\n  ProjectionItemSimple\n} from './projection-items';\nimport { MapOptionsProps } from './types';\nimport { projectionsList } from './utils';\nimport { BASEMAP_STYLES } from './basemaps';\n\nconst DropHeader = styled.div`\n  padding: ${glsp()};\n  box-shadow: inset 0 -1px 0 0 ${themeVal('color.base-100a')};\n`;\n\nconst DropBody = styled.div`\n  padding: ${glsp(0, 0, 1, 0)};\n  max-height: 320px;\n  overflow-y: auto;\n`;\n\n/**\n * Override Dropdown styles to be wider and play well with the shadow scrollbar.\n */\nconst MapOptionsDropdown = styled(Dropdown)`\n  padding: 0;\n  max-width: 16rem;\n\n  ${DropTitle} {\n    margin: 0;\n  }\n\n  ${DropMenu} {\n    margin: 0;\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n`;\n\n// Why you ask? Very well:\n// Mapbox's css has an instruction that sets the hover color for buttons to\n// near black. The only way to override it is to increase the specificity and\n// we need the button functions to get the correct color.\n// The infamous instruction:\n// .mapboxgl-ctrl button:not(:disabled):hover {\n//   background-color: rgba(0, 0, 0, 0.05);\n// }\nconst SelectorButton = styled(Button)`\n  &&& {\n    ${createButtonStyles({ variation: 'primary-fill', fitting: 'skinny' })}\n  }\n`;\n\nconst ContentGroup = styled.div`\n  display: flex;\n  flex-flow: column nowrap;\n`;\n\nconst ContentGroupHeader = styled.div`\n  padding: ${glsp(1, 1, 0.5, 1)};\n`;\n\nconst ContentGroupTitle = styled(Subtitle)`\n  /* styled-component */\n`;\n\nconst ContentGroupBody = styled.div`\n  /* styled-component */\n`;\n\nconst OptionSwitch = styled(FormSwitch)`\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  width: 100%;\n  font-size: inherit;\n`;\n\nconst OptionMedia = styled.figure`\n  position: relative;\n  height: 2rem;\n  overflow: hidden;\n  border-radius: ${themeVal('shape.rounded')};\n  flex-shrink: 0;\n  aspect-ratio: 1.5 / 1;\n  background: ${themeVal('color.base-50')};\n  margin-left: auto;\n\n  &::before {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 2;\n    content: '';\n    box-shadow: inset 0 0 0 1px ${themeVal('color.base-100a')};\n    border-radius: ${themeVal('shape.rounded')};\n    pointer-events: none;\n  }\n`;\n\nfunction MapOptions(props: MapOptionsProps) {\n  const {\n    projection,\n    onProjectionChange,\n    basemapStyleId,\n    onBasemapStyleIdChange,\n    labelsOption,\n    boundariesOption,\n    onOptionChange\n  } = props;\n\n  return (\n    <MapOptionsDropdown\n      triggerElement={(bag) => (\n        <SelectorButton {...bag}>\n          <CollecticonGlobe meaningful title='Configure map options' />\n        </SelectorButton>\n      )}\n      direction='down'\n      alignment='left'\n    >\n      <DropHeader>\n        <DropTitle>Map options</DropTitle>\n      </DropHeader>\n      <DropBody>\n        \n          <ContentGroup>\n            <ContentGroupHeader>\n              <ContentGroupTitle>Style</ContentGroupTitle>\n            </ContentGroupHeader>\n            <ContentGroupBody>\n              <DropMenu as='ol'>\n                {BASEMAP_STYLES.map((basemap) => (\n                  <li key={basemap.id}>\n                    <DropMenuItem\n                      href='#'\n                      active={basemapStyleId === basemap.id}\n                      onClick={(e) => {\n                        e.preventDefault();\n                        onBasemapStyleIdChange?.(basemap.id);\n                      }}\n                    >\n                      <span>{basemap.label}</span>\n                      <OptionMedia>\n                        <img\n                          src={basemap.thumbnailUrl}\n                          alt='Map style thumbnail'\n                        />\n                      </OptionMedia>\n                    </DropMenuItem>\n                  </li>\n                ))}\n              </DropMenu>\n            </ContentGroupBody>\n          </ContentGroup>\n\n          <ContentGroup>\n            <ContentGroupHeader>\n              <ContentGroupTitle>Details</ContentGroupTitle>\n            </ContentGroupHeader>\n            <ContentGroupBody>\n              <DropMenu>\n                <li>\n                  <DropMenuItem as='span'>\n                    <OptionSwitch\n                      name='labels'\n                      id='labels'\n                      value='labels'\n                      checked={labelsOption}\n                      onChange={(e) => {\n                        onOptionChange?.('labels', e.target.checked);\n                      }}\n                    >\n                      Labels\n                    </OptionSwitch>\n                  </DropMenuItem>\n                </li>\n                <li>\n                  <DropMenuItem as='span'>\n                    <OptionSwitch\n                      name='boundaries'\n                      id='boundaries'\n                      value='boundaries'\n                      checked={boundariesOption}\n                      onChange={(e) => {\n                        onOptionChange?.('boundaries', e.target.checked);\n                      }}\n                    >\n                      Boundaries\n                    </OptionSwitch>\n                  </DropMenuItem>\n                </li>\n              </DropMenu>\n            </ContentGroupBody>\n          </ContentGroup>\n\n          <ContentGroup>\n            <ContentGroupHeader>\n              <ContentGroupTitle>Projection</ContentGroupTitle>\n            </ContentGroupHeader>\n            <ContentGroupBody>\n              <DropMenu as='ol'>\n                {projectionsList.map((proj) => {\n                  if (proj.isCustom && proj.conicValues) {\n                    return (\n                      <ProjectionItemCustom\n                        key={proj.id}\n                        onChange={onProjectionChange}\n                        id={proj.id}\n                        label={proj.label}\n                        defaultConicValues={proj.conicValues}\n                        activeProjection={projection}\n                      />\n                    );\n                  } else if (proj.conicValues) {\n                    return (\n                      <ProjectionItemConic\n                        key={proj.id}\n                        onChange={onProjectionChange}\n                        id={proj.id}\n                        label={proj.label}\n                        defaultConicValues={proj.conicValues}\n                        activeProjection={projection}\n                      />\n                    );\n                  } else {\n                    return (\n                      <ProjectionItemSimple\n                        key={proj.id}\n                        onChange={onProjectionChange}\n                        id={proj.id}\n                        label={proj.label}\n                        activeProjection={projection}\n                      />\n                    );\n                  }\n                })}\n              </DropMenu>\n            </ContentGroupBody>\n          </ContentGroup>\n        \n      </DropBody>\n    </MapOptionsDropdown>\n  );\n}\n\nexport default MapOptions;\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { DropMenuItem } from '@devseed-ui/dropdown';\nimport { glsp } from '@devseed-ui/theme-provider';\nimport { FormFieldsetHeader, FormLegend } from '@devseed-ui/form';\n\nimport StressedFormGroupInput from '../../stressed-form-group-input';\n\nimport {\n  ProjectionItemConicProps,\n  ProjectionItemProps\n} from './types';\nimport { validateLat, validateLon } from './utils';\nimport { FormFieldsetBodyColumns, FormFieldsetCompact } from '$styles/fieldset';\n\nconst ProjectionOptionsForm = styled.div`\n  padding: ${glsp(0, 1)};\n\n  ${FormFieldsetHeader} {\n    padding-top: ${glsp(0.5)};\n    padding-bottom: 0;\n    border: none;\n  }\n\n  ${FormFieldsetBodyColumns} {\n    padding-top: ${glsp(0.5)};\n    padding-bottom: ${glsp(0.5)};\n  }\n`;\n\nconst projectionConicCenter = [\n  { id: 'lng', label: 'Center Longitude', validate: validateLon },\n  { id: 'lat', label: 'Center Latitude', validate: validateLat }\n];\n\nconst projectionConicParallel = [\n  { id: 'sParLat', label: 'Southern Parallel Lat', validate: validateLat },\n  { id: 'nParLat', label: 'Northern Parallel Lat', validate: validateLat }\n];\n\nexport function ProjectionItemSimple(props: ProjectionItemProps) {\n  const { onChange, id, label, activeProjection } = props;\n\n  return (\n    <li>\n      <DropMenuItem\n        active={id === activeProjection.id}\n        href='#'\n        onClick={(e) => {\n          e.preventDefault();\n          onChange({ id });\n        }}\n      >\n        {label}\n      </DropMenuItem>\n    </li>\n  );\n}\n\nexport function ProjectionItemConic(props: ProjectionItemConicProps) {\n  const { onChange, id, label, defaultConicValues, activeProjection } = props;\n\n  const isActive = id === activeProjection.id;\n\n  const activeConicValues = isActive && activeProjection.center\n    ? {\n        center: activeProjection.center,\n        parallels: activeProjection.parallels\n      }\n    : null;\n\n  // Keep the values the user enters to be able to restore them whenever they\n  // switch projections.\n  const [conicValues, setConicValues] = useState(\n    activeConicValues ?? defaultConicValues\n  );\n\n  // Store the conic values for the selected projection and register the change\n  // for the parent.\n  const onChangeConicValues = (value, field, idx) => {\n    const newConic = {\n      ...conicValues,\n      [field]: Object.assign([], conicValues[field], {\n        [idx]: value\n      })\n    };\n    setConicValues(newConic);\n    onChange({ id, ...newConic });\n  };\n\n  return (\n    <li>\n      <DropMenuItem\n        active={isActive}\n        href='#'\n        // data-dropdown='click.close'\n        onClick={(e) => {\n          e.preventDefault();\n          onChange({\n            ...conicValues,\n            id\n          });\n        }}\n      >\n        {label}\n      </DropMenuItem>\n      {isActive && (\n        <ProjectionOptionsForm>\n          <FormFieldsetCompact>\n            <FormFieldsetHeader>\n              <FormLegend>Center Lon/Lat</FormLegend>\n            </FormFieldsetHeader>\n            <FormFieldsetBodyColumns>\n              {projectionConicCenter.map((field, idx) => (\n                <StressedFormGroupInput\n                  key={field.id}\n                  hideHeader\n                  inputType='text'\n                  inputSize='small'\n                  id={`center-${field.id}`}\n                  name={`center-${field.id}`}\n                  label={field.label}\n                  value={conicValues.center?.[idx]}\n                  validate={field.validate}\n                  onChange={(value) => {\n                    onChangeConicValues(Number(value), 'center', idx);\n                  }}\n                />\n              ))}\n            </FormFieldsetBodyColumns>\n          </FormFieldsetCompact>\n          <FormFieldsetCompact>\n            <FormFieldsetHeader>\n              <FormLegend>S/N Parallels</FormLegend>\n            </FormFieldsetHeader>\n            <FormFieldsetBodyColumns>\n              {projectionConicParallel.map((field, idx) => (\n                <StressedFormGroupInput\n                  key={field.id}\n                  hideHeader\n                  inputType='text'\n                  inputSize='small'\n                  id={`parallels-${field.id}`}\n                  name={`parallels-${field.id}`}\n                  label={field.label}\n                  value={conicValues.parallels?.[idx].toString() ?? ''}\n                  validate={field.validate}\n                  onChange={(value) => {\n                    onChangeConicValues(Number(value), 'parallels', idx);\n                  }}\n                />\n              ))}\n            </FormFieldsetBodyColumns>\n          </FormFieldsetCompact>\n        </ProjectionOptionsForm>\n      )}\n    </li>\n  );\n}\n\nexport function ProjectionItemCustom(props: ProjectionItemConicProps) {\n  const { onChange, id, label, defaultConicValues, activeProjection } = props;\n\n  return (\n    <li>\n      <DropMenuItem\n        active={id === activeProjection.id}\n        href='#'\n        onClick={(e) => {\n          e.preventDefault();\n          onChange({ id, ...defaultConicValues });\n        }}\n      >\n        {label}\n      </DropMenuItem>\n    </li>\n  );\n}\n","import React, { Dispatch } from 'react';\nimport {\n  FormInput,\n  FormGroupStructure,\n  formSkinStylesProps\n} from '@devseed-ui/form';\n\nimport StressedField from './stressed-field';\n\ninterface StressedFormGroupInputProps {\n  id: string;\n  name: string;\n  label: string;\n  value: number | string;\n  inputType: 'number' | 'text';\n  inputSize?: formSkinStylesProps['size'];\n  placeholder?: number | string;\n  validate: (value: string) => boolean;\n  onChange: (draftValue: string, setDraftValue: Dispatch<string>) => void;\n  helper?: JSX.Element | null;\n  hideHeader: boolean;\n}\n\n/**\n * From group input structure implementing a stressed field.\n *\n * @prop {string} id Input field id\n * @prop {string} name Input field name\n * @prop {string} label Label for the input\n * @prop {mixed} value Input value\n * @prop {boolean} hideHeader Whether or not to hide the header\n * @prop {string} inputType Type of input: number or text\n * @prop {string} inputSize Styled input size option\n * @prop {string} inputVariation Styled input variation option\n * @prop {function} onChange On change event handler\n * @prop {string} placeholder Input placeholder value.\n * @prop {function} validate Validation function callback. Must return boolean\n */\nexport default function StressedFormGroupInput(\n  props: StressedFormGroupInputProps\n) {\n  const {\n    id,\n    name,\n    label,\n    value,\n    validate,\n    inputType,\n    inputSize,\n    placeholder,\n    onChange,\n    helper,\n    hideHeader\n  } = props;\n\n  return (\n    <FormGroupStructure\n      id={id}\n      label={label}\n      hideHeader={hideHeader}\n      helper={helper}\n    >\n      <StressedField\n        value={value.toString()}\n        validate={validate}\n        onChange={onChange}\n        render={({ ref, errored, value, handlers }) => (\n          <FormInput\n            ref={ref}\n            type={inputType}\n            name={name}\n            id={id}\n            invalid={errored}\n            stressed={errored}\n            size={inputSize}\n            value={value}\n            placeholder={placeholder?.toString()}\n            {...handlers}\n          />\n        )}\n      />\n    </FormGroupStructure>\n  );\n}\n","import {\n  Dispatch,\n  FormEvent,\n  KeyboardEvent,\n  Ref,\n  useCallback,\n  useEffect,\n  useRef\n} from 'react';\nimport T from 'prop-types';\n\nimport { useSafeState } from '$utils/use-safe-state';\n\ninterface StressedFieldProps {\n  render: (renderProps: {\n    ref: Ref<HTMLInputElement>;\n    errored: boolean;\n    value: string;\n    handlers: {\n      onKeyPress: (e: KeyboardEvent) => void;\n      onBlur: () => void;\n      onChange: (e: FormEvent<HTMLInputElement>) => void;\n    };\n  }) => JSX.Element;\n  value: string;\n  validate: (value: string) => boolean;\n  onChange: (draftValue: string, setDraftValue: Dispatch<string>) => void;\n}\n\n/**\n * Component to control the value of a given input.\n * The component accepts a validation function and validates the inserted value.\n * If the value is not valid, the field is marked with a error and then reverted\n * to its original value.\n *\n * @prop {string} value The input field value\n * @prop {function} onChange On change event handler\n * @prop {function} validate Validation function callback. Must return boolean\n * @prop {function} render Render function. Called with signature: (props) =>\n *  Where props:\n *    {boolean} errored Whether the field is in error state\n *    {string} value Value for the field\n *    {function} onChangeHandler Internal change handler to attach the field\n *    {function} onBlurHandler Internal blur handler to attach the field\n */\nexport default function StressedField(props: StressedFieldProps) {\n  const { render, value, validate, onChange } = props;\n\n  const fieldRef = useRef<HTMLInputElement>(null);\n  const [errored, setErrored] = useSafeState(false);\n  const [draftValue, setDraftValue] = useSafeState(value);\n\n  // Update internal state (draft), when incoming value changes.\n  useEffect(() => {\n    // setDraftValue is a hook and wont change.\n    setDraftValue(value);\n    /* eslint-disable-next-line react-hooks/exhaustive-deps */\n  }, [value]);\n\n  const validateField = () => {\n    if (!validate(draftValue)) {\n      setErrored(true);\n      // We have to clear the error state after the animation so it can error\n      // again.\n      setTimeout(() => {\n        setErrored(false);\n        setDraftValue(value);\n      }, 550);\n    } else {\n      // all good.\n      setErrored(false);\n      onChange(draftValue, setDraftValue);\n    }\n  };\n\n  // setDraftValue is a hook and wont change.\n  const onChangeHandler = useCallback(\n    (e: FormEvent<HTMLInputElement>) => setDraftValue(e.currentTarget.value),\n    /* eslint-disable-next-line react-hooks/exhaustive-deps */\n    []\n  );\n\n  const onKeypressHandler = (e: KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      if (validate(draftValue)) {\n        // If the field is valid blur which will trigger validation a store\n        // the value.\n        fieldRef.current?.blur();\n      } else {\n        validateField();\n      }\n    }\n  };\n\n  return render({\n    ref: fieldRef,\n    errored,\n    value: draftValue,\n    handlers: {\n      onKeyPress: onKeypressHandler,\n      onBlur: validateField,\n      onChange: onChangeHandler\n    }\n  });\n}\n\nStressedField.propTypes = {\n  value: T.oneOfType([T.string, T.number]),\n  onChange: T.func,\n  validate: T.func,\n  render: T.func.isRequired\n};\n","import { Dispatch, useCallback, useEffect, useRef, useState } from 'react';\n\n/**\n * React hook to set state. Same behavior as useState but won't set the state if\n * the component is unmounted.\n * @param {*} initialValue Initial state value.\n */\nexport const useSafeState = <T>(initialValue: T): [T, Dispatch<T>] => {\n  const isMountedRef = useRef(true);\n  const [currentValue, setCurrentValue] = useState(initialValue);\n\n  useEffect(() => {\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, [isMountedRef]);\n\n  const setSafeState = useCallback((value) => {\n    if (isMountedRef.current) {\n      setCurrentValue(value);\n    }\n  }, []);\n\n  return [currentValue, setSafeState];\n};\n","import styled from 'styled-components';\nimport {\n  FormFieldset,\n  FormFieldsetBody,\n  FormFieldsetHeader,\n  FormInput\n} from '@devseed-ui/form';\nimport { glsp } from '@devseed-ui/theme-provider';\n\nexport const FormFieldsetCompact = styled(FormFieldset)`\n  background: none;\n  border: none;\n  margin: ${glsp(0, -1)};\n\n  ${FormFieldsetHeader} {\n    padding-left: ${glsp()};\n    padding-right: ${glsp()};\n  }\n\n  ${FormFieldsetBody} {\n    padding: ${glsp()};\n  }\n`;\n\nexport const FormFieldsetBodyColumns = styled(FormFieldsetBody)`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: ${glsp()};\n\n  ${FormInput} {\n    min-width: 0;\n  }\n`;\n","/**\n * Basemap style requirements (followed by standaard Mapbox Studio styles)\n * - have a layer named \"admin-0-boundary-bg\". Data will be added below\n *   this layer to ensure country oulines and labels are visible.\n * - for label and boundaries layers to be toggled on and off, they must\n *   belong to a group specifically named - see GROUPS_BY_OPTION for the\n *   list of accepted group names\n */\n\nexport const BASE_STYLE_PATH = 'https://api.mapbox.com/styles/v1/covid-nasa';\n\nexport const getStyleUrl = (mapboxId: string) =>\n  `${BASE_STYLE_PATH}/${mapboxId}?access_token=${process.env.MAPBOX_TOKEN}`;\n\nexport const BASEMAP_STYLES = [\n  {\n    id: 'satellite',\n    label: 'Satellite',\n    mapboxId: 'cldu1cb8f00ds01p6gi583w1m',\n    thumbnailUrl: `https://api.mapbox.com/styles/v1/covid-nasa/cldu1cb8f00ds01p6gi583w1m/static/-9.14,38.7,10.5,0/480x320?access_token=${process.env.MAPBOX_TOKEN}`\n  },\n  {\n    id: 'dark',\n    label: 'Default dark',\n    mapboxId: 'cldu14gii006801mgq3dn1jpd',\n    thumbnailUrl: `https://api.mapbox.com/styles/v1/mapbox/dark-v10/static/-9.14,38.7,10.5,0/480x320?access_token=${process.env.MAPBOX_TOKEN}`\n  },\n  {\n    id: 'light',\n    label: 'Default light',\n    mapboxId: 'cldu0tceb000701qnrl7p9woh',\n    thumbnailUrl: `https://api.mapbox.com/styles/v1/mapbox/light-v10/static/-9.14,38.7,10.5,0/480x320?access_token=${process.env.MAPBOX_TOKEN}`\n  },\n  {\n    id: 'topo',\n    label: 'Topo',\n    mapboxId: 'cldu1yayu00au01qqrbdahb3m',\n    thumbnailUrl: `https://api.mapbox.com/styles/v1/covid-nasa/cldu1yayu00au01qqrbdahb3m/static/-9.14,38.7,10.5,0/480x320?access_token=${process.env.MAPBOX_TOKEN}`\n  }\n] as const;\n\nexport const BASEMAP_ID_DEFAULT = 'satellite';\n\n// Default style used in stories and analysis, satellite no labels\nexport const DEFAULT_MAP_STYLE_URL =\n  'mapbox://styles/covid-nasa/ckb01h6f10bn81iqg98ne0i2y';\n\nexport const GROUPS_BY_OPTION: Record<Option, string[]> = {\n  labels: [\n    'Natural features, natural-labels',\n    'Place labels, place-labels',\n    'Point of interest labels, poi-labels',\n    'Road network, road-labels',\n    'Transit, transit-labels'\n  ],\n  boundaries: [\n    'Country Borders, country-borders',\n    'Administrative boundaries, admin'\n  ]\n};\n\nexport type Basemap = typeof BASEMAP_STYLES[number];\n\nexport type BasemapId = typeof BASEMAP_STYLES[number]['id'];\n\nexport type Option = 'labels' | 'boundaries';\n","import { IControl } from 'mapbox-gl';\nimport React, { useEffect, useMemo, useRef } from 'react';\nimport { Root, createRoot } from 'react-dom/client';\nimport { ThemeProvider, useTheme } from 'styled-components';\n\n/**\n * Since it is rendered by Mapbox this component becomes detached from\n * react. To ensure that is becomes reconnected the render method should be\n * called with props and state on componentDidUpdate.\n * The constructor takes a render function with signature (props, state) => {}\n *\n * @example\n * function () {\n *   const control = useMapboxControl(() => (\n *     <SomeControl\n *        name={props.name}\n *        active={isActive}\n *     />\n *   ), [props.name, isActive]);\n *\n *  // Add the control to mapbox\n * }\n */\nexport function useMapboxControl(\n  renderFn: (el: HTMLDivElement) => React.ReactNode,\n  deps: any[] = []\n) {\n  const rootRef = useRef<Root>();\n  const elementRef = useRef<HTMLDivElement>();\n  const renderFnRef = useRef<() => void>(() => ({}));\n  const theme = useTheme();\n\n  // Use a ref so that we don't need to receive a memoized renderFn\n  renderFnRef.current = () => {\n    if (!rootRef.current) return;\n    rootRef.current.render(\n      <ThemeProvider theme={theme}>{renderFn(elementRef.current!)}</ThemeProvider>\n    );\n  };\n\n  useEffect(() => {\n    renderFnRef.current();\n  }, deps);\n\n  return useMemo(\n    () => ({\n      onAdd() {\n        const el = document.createElement('div');\n        el.className = 'mapboxgl-ctrl';\n        elementRef.current = el;\n\n        rootRef.current = createRoot(el);\n        renderFnRef.current();\n\n        return el as HTMLDivElement;\n      },\n      onRemove() {\n        if (!rootRef.current) return;\n\n        // Quicker way to access the node, instead of storing the created\n        // element in a ref.\n        // @ts-expect-error _internalRoot does not exist\n        const node = rootRef.current._internalRoot.containerInfo;\n\n        // Defer unmounting to next tick to avoid error:\n        // Attempted to synchronously unmount a root while React was already\n        // rendering.\n        setTimeout(() => rootRef.current?.unmount(), 1);\n\n        node.remove();\n      }\n    }),\n    []\n  ) as IControl;\n}\n","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Map } from 'mapbox-gl';\n\nimport { themeVal } from '@devseed-ui/theme-provider';\nimport { Button } from '@devseed-ui/button';\n\nimport { CopyField } from '../copy-field';\nimport { round } from '$utils/format';\n\nconst MapCoordsWrapper = styled.div`\n  /* Large width so parent will wrap */\n  width: 100vw;\n  pointer-events: none !important;\n\n  ${Button} {\n    pointer-events: auto;\n    background: ${themeVal('color.base-400a')};\n    font-weight: ${themeVal('type.base.regular')};\n    font-size: 0.75rem;\n  }\n\n  && ${Button /* sc-selector */}:hover {\n    background: ${themeVal('color.base-500')};\n  }\n`;\n\ninterface MapCoordsProps {\n  mapInstance: Map;\n}\n\nconst getCoords = (mapInstance: Map) => {\n  const mapCenter = mapInstance.getCenter();\n  return {\n    lng: round(mapCenter.lng, 4),\n    lat: round(mapCenter.lat, 4)\n  };\n};\n\nexport default function MapCoords(props: MapCoordsProps) {\n  const { mapInstance } = props;\n\n  const [position, setPosition] = useState(getCoords(mapInstance));\n\n  useEffect(() => {\n    const posListener = (e) => {\n      setPosition(getCoords(e.target));\n    };\n\n    mapInstance.on('moveend', posListener);\n\n    return () => {\n      mapInstance.off('moveend', posListener);\n    };\n  }, [mapInstance]);\n\n  const { lng, lat } = position;\n  const value = `W ${lng}, N ${lat}`;\n\n  return (\n    <MapCoordsWrapper>\n      <CopyField value={value}>\n        {({ ref, showCopiedMsg }) => (\n          <Button\n            ref={ref}\n            // @ts-expect-error achromic-text exists but ui-library types are\n            // not up to date\n            variation='achromic-text'\n            size='small'\n          >\n            {showCopiedMsg ? 'Copied!' : value}\n          </Button>\n        )}\n      </CopyField>\n    </MapCoordsWrapper>\n  );\n}\n","import { useEffect, useRef, useState } from 'react';\nimport Clipboard from 'clipboard';\n\ninterface CopyFieldProps {\n  value: string;\n  children: (props: {\n    value: string;\n    ref: React.MutableRefObject<any>;\n    originalValue: string;\n    showCopiedMsg: boolean;\n  }) => JSX.Element;\n}\n\nexport function CopyField(props: CopyFieldProps) {\n  const { value, children } = props;\n\n  const [showCopiedMsg, setShowCopiedMsg] = useState(false);\n  const triggerElement = useRef<any>();\n\n  const copyValue = useRef<string>(value);\n  copyValue.current = value;\n\n  useEffect(() => {\n    if (!triggerElement.current) throw new Error(\"ref for trigger element is not set\");\n    \n    let copiedMsgTimeout: NodeJS.Timeout | undefined;\n    const clipboard = new Clipboard(triggerElement.current, {\n      text: () => copyValue.current\n    });\n\n    clipboard.on('success', () => {\n      setShowCopiedMsg(true);\n      copiedMsgTimeout = setTimeout(() => {\n        setShowCopiedMsg(false);\n      }, 2000);\n    });\n\n    return () => {\n      clipboard.destroy();\n      if (copiedMsgTimeout) {\n        clearTimeout(copiedMsgTimeout);\n      }\n    };\n  }, []);\n\n  const val = showCopiedMsg ? 'Copied!' : value;\n\n  return children({\n    value: val,\n    ref: triggerElement,\n    originalValue: value,\n    showCopiedMsg\n  });\n}\n","import React, { ReactNode } from 'react';\nimport styled, { css } from 'styled-components';\nimport { Transition, TransitionGroup } from 'react-transition-group';\n\nimport { glsp, themeVal } from '@devseed-ui/theme-provider';\nimport { variableGlsp } from '$styles/variable-utils';\n\nconst fadeDuration = 240;\n\ninterface MessageProps {\n  show: boolean;\n  isInvalid?: boolean;\n  position?: 'left' | 'right' | 'center';\n}\n\nconst Message = styled.div<MessageProps>`\n  position: absolute;\n  z-index: 2;\n  transform: translate(-50%, 0);\n  padding: ${glsp(0.5, 0.75)};\n  box-shadow: ${themeVal('boxShadow.elevationA')};\n  border-radius: ${themeVal('shape.rounded')};\n  font-size: 0.75rem;\n  line-height: 1rem;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  gap: ${glsp(0.5)};\n\n  ${({ position }) => {\n    if (position === 'left') return 'left: 25%;';\n    if (position === 'right') return 'left: 75%;';\n    return 'left: 50%;';\n  }}\n\n  ${({ isInvalid }) =>\n    isInvalid\n      ? css`\n          background: ${themeVal('color.danger')};\n          color: ${themeVal('color.surface')};\n        `\n      : css`\n          background: #fff;\n        `}\n\n  transition: all ${fadeDuration}ms ease-in-out;\n  ${({ show }) =>\n    show\n      ? css`\n          visibility: visible;\n          top: ${variableGlsp()};\n          opacity: 1;\n        `\n      : css`\n          visibility: hidden;\n          top: ${variableGlsp(-1)};\n          opacity: 0;\n        `}\n`;\n\ninterface MapMessageProps extends Pick<MessageProps, 'isInvalid' | 'position'> {\n  id: string;\n  active: boolean;\n  children: ReactNode;\n}\n\nexport default function MapMessage(props: MapMessageProps) {\n  const { id, children, active, isInvalid, position } = props;\n\n  return (\n    <TransitionGroup component={null}>\n      {active && (\n        <Transition key={id} timeout={fadeDuration}>\n          {(state) => {\n            return (\n              <Message\n                show={state === 'entered' || state === 'entering'}\n                isInvalid={isInvalid}\n                position={position}\n              >\n                {children}\n              </Message>\n            );\n          }}\n        </Transition>\n      )}\n    </TransitionGroup>\n  );\n}\n","import React, { ReactNode, Fragment, useState, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { LayerLegendCategorical, LayerLegendGradient } from 'veda';\nimport { AccordionFold, AccordionManager } from '@devseed-ui/accordion';\nimport {\n  glsp,\n  themeVal,\n  truncated,\n  visuallyHidden\n} from '@devseed-ui/theme-provider';\nimport { CollecticonCircleInformation } from '@devseed-ui/collecticons';\nimport { Toolbar, ToolbarIconButton } from '@devseed-ui/toolbar';\nimport { followCursor } from 'tippy.js';\nimport { scaleLinear } from 'd3';\n\nimport { Tip } from '../tip';\nimport {\n  formatAsScientificNotation,\n  formatThousands,\n  round\n} from '$utils/format';\nimport { variableBaseType, variableGlsp } from '$styles/variable-utils';\nimport {\n  WidgetItemBodyInner,\n  WidgetItemHeader,\n  WidgetItemHeadline,\n  WidgetItemHGroup\n} from '$styles/panel';\n\ninterface LayerLegendCommonProps {\n  id: string;\n  title: string;\n  description: string;\n}\n\ninterface LegendSwatchProps {\n  hasHelp?: boolean;\n  stops: string | string[];\n}\n\ninterface LayerLegendContainerProps {\n  children: ReactNode | ReactNode[];\n}\n\nconst makeGradient = (stops: string[]) => {\n  if (stops.length === 1) return stops[0];\n  const d = 100 / (stops.length - 1);\n  const steps = stops.map((s, i) => `${s} ${i * d}%`);\n  return `linear-gradient(to right, ${steps.join(', ')})`;\n};\n\nconst printLegendVal = (val: string | number) => {\n  const number = Number(val);\n  if (isNaN(number)) return val;\n\n  if (number === 0) return 0;\n\n  if (Math.abs(number) < 9999 && Math.abs(number) > 0.0009) {\n    return formatThousands(number, { decimals: 3 });\n  } else {\n    return formatAsScientificNotation(number, 2);\n  }\n};\n\nconst formatTooltipValue = (rawVal, unit) => {\n  if (rawVal === 0) return 0;\n\n  let value;\n\n  if (Math.abs(rawVal) < 9999 && Math.abs(rawVal) > 0.0009) {\n    value = round(rawVal, 3);\n  } else {\n    value = formatAsScientificNotation(rawVal, 2);\n  }\n\n  return unit?.label ? `${value} ${unit.label}` : value;\n};\n\nexport const LegendContainer = styled.div`\n  position: absolute;\n  z-index: 8;\n  bottom: ${variableGlsp()};\n  right: ${variableGlsp()};\n  display: flex;\n  flex-flow: column nowrap;\n  box-shadow: ${themeVal('boxShadow.elevationB')};\n  border-radius: ${themeVal('shape.rounded')};\n  background-color: ${themeVal('color.surface')};\n\n  &.reveal-enter {\n    opacity: 0;\n    bottom: 4rem;\n  }\n  &.reveal-exit {\n    opacity: 1;\n    bottom: ${variableGlsp()};\n  }\n  &.reveal-enter-active {\n    opacity: 1;\n    bottom: ${variableGlsp()};\n  }\n  &.reveal-exit-active {\n    opacity: 0;\n    bottom: 4rem;\n  }\n  &.reveal-enter-active,\n  &.reveal-exit-active {\n    transition: bottom 240ms ease-in-out, opacity 240ms ease-in-out;\n  }\n`;\n\nconst LayerLegendSelf = styled.div`\n  display: flex;\n  flex-flow: column nowrap;\n  width: 16rem;\n  border-bottom: 1px solid ${themeVal('color.base-100')};\n\n  ${WidgetItemHeader} {\n    padding: ${variableGlsp(0.25, 0.5)};\n  }\n\n  &:only-child {\n    ${WidgetItemHeader} {\n      padding: ${variableGlsp(0.5)};\n    }\n    border-bottom: 0;\n  }\n`;\n\nconst LegendList = styled.dl`\n  display: grid;\n  grid-gap: 0 ${glsp(0.125)};\n  grid-auto-columns: minmax(1rem, 1fr);\n  grid-auto-flow: column;\n\n  dt {\n    grid-row: 1;\n  }\n\n  dd {\n    font-size: 0.75rem;\n    line-height: 1rem;\n    grid-row: 2;\n    display: flex;\n    justify-content: space-between;\n\n    /* stylelint-disable-next-line no-descending-specificity */\n    > * {\n      width: 8rem;\n\n      /* stylelint-disable-next-line no-descending-specificity */\n      > * {\n        ${truncated()}\n        display: block;\n      }\n\n      &:last-child:not(:first-child) {\n        text-align: right;\n      }\n    }\n\n    &:not(:first-of-type):not(:last-of-type) {\n      ${visuallyHidden()}\n    }\n  }\n\n  .unit {\n      grid-row: 3;\n      width: 100%;\n      text-align: center;\n      font-size: 0.75rem;\n      line-height: 1rem;\n      justify-content: center;\n    }\n`;\n\nconst LegendSwatch = styled.span<LegendSwatchProps>`\n  /* position is needed to ensure that the layerX on the event is relative to\n    this element */\n  position: relative;\n  display: block;\n  font-size: 0;\n  height: 0.5rem;\n  border-radius: ${themeVal('shape.rounded')};\n  background: ${({ stops }) =>\n    typeof stops === 'string' ? stops : makeGradient(stops)};\n  margin: 0 0 ${glsp(1 / 8)} 0;\n  box-shadow: inset 0 0 0 1px ${themeVal('color.base-100a')};\n  cursor: ${({ hasHelp }) => (hasHelp ? 'help' : 'auto')};\n`;\n\nconst LayerLegendTitle = styled.h3`\n  font-size: ${variableBaseType('0.75rem')};\n  line-height: ${variableBaseType('1rem')};\n`;\n\nconst LegendBody = styled(WidgetItemBodyInner)`\n  padding: 0;\n  min-height: 32px;\n  max-height: 120px;\n  overflow-y: auto;\n  overscroll-behavior: none;\n  .scroll-inner {\n    padding: ${variableGlsp(0.5, 0.75)};\n  }\n  .shadow-bottom {\n    border-radius: ${themeVal('shape.rounded')};\n  }\n`;\n\nexport function LayerLegend(\n  props: LayerLegendCommonProps & (LayerLegendGradient | LayerLegendCategorical)\n) {\n  const { id, type, title, description } = props;\n\n  return (\n    <AccordionFold\n      id={id}\n      forwardedAs={LayerLegendSelf}\n      renderHeader={({ isExpanded, toggleExpanded }) => (\n        <WidgetItemHeader>\n          <WidgetItemHGroup>\n            <WidgetItemHeadline>\n              <LayerLegendTitle>{title}</LayerLegendTitle>\n              {/* <Subtitle as='p'>Subtitle</Subtitle> */}\n            </WidgetItemHeadline>\n            <Toolbar size='small'>\n              <ToolbarIconButton\n                variation='base-text'\n                active={isExpanded}\n                onClick={toggleExpanded}\n              >\n                <CollecticonCircleInformation\n                  title='Information about layer'\n                  meaningful\n                />\n              </ToolbarIconButton>\n            </Toolbar>\n          </WidgetItemHGroup>\n          {type === 'categorical' && (\n            <LayerCategoricalGraphic type='categorical' stops={props.stops} />\n          )}\n          {type === 'gradient' && (\n            <LayerGradientGraphic\n              type='gradient'\n              stops={props.stops}\n              unit={props.unit}\n              min={props.min}\n              max={props.max}\n            />\n          )}\n        </WidgetItemHeader>\n      )}\n      renderBody={() => (\n        <LegendBody>\n\n            <div className='scroll-inner'>\n              {description || <p>No info available for this layer.</p>}\n            </div>\n          \n        </LegendBody>\n      )}\n    />\n  );\n}\n\nexport function LayerLegendContainer(props: LayerLegendContainerProps) {\n  return (\n    <LegendContainer>\n      <AccordionManager>{props.children}</AccordionManager>\n    </LegendContainer>\n  );\n}\n\nexport function LayerCategoricalGraphic(props: LayerLegendCategorical) {\n  const { stops } = props;\n\n  return (\n    <LegendList>\n      {stops.map((stop) => (\n        <Fragment key={stop.color}>\n          <dt>\n            <Tip content={stop.label}>\n              <LegendSwatch stops={stop.color} hasHelp>\n                {stop.color}\n              </LegendSwatch>\n            </Tip>\n          </dt>\n          <dd>\n            {/*\n                The 2 spans are needed so that the text can be correctly\n                truncated. The dd element is part of a grid and has an\n                implicit width. The first span overflows the dd, setting\n                the final width and the second span truncates the text.\n              */}\n            <span>\n              <span>{stop.label}</span>\n            </span>\n          </dd>\n        </Fragment>\n      ))}\n    </LegendList>\n  );\n}\n\nexport function LayerGradientGraphic(props: LayerLegendGradient) {\n  const { stops, min, max, unit } = props;\n\n  const [hoverVal, setHoverVal] = useState(0);\n\n  const moveListener = useCallback(\n    (e) => {\n      const width = e.nativeEvent.target.clientWidth;\n      const scale = scaleLinear()\n        .domain([0, width])\n        .range([Number(min), Number(max)]);\n      setHoverVal(scale(e.nativeEvent.layerX));\n    },\n    [min, max]\n  );\n\n  const hasNumericLegend = !isNaN(Number(min) + Number(max));\n  const tipText = formatTooltipValue(hoverVal, unit);\n\n  return (\n    <LegendList>\n      <dt>\n        <Tip\n          disabled={!hasNumericLegend}\n          content={tipText}\n          followCursor='horizontal'\n          plugins={[followCursor]}\n        >\n          <LegendSwatch stops={stops} onMouseMove={moveListener}>\n            {stops[0]} to {stops[stops.length - 1]}\n          </LegendSwatch>\n        </Tip>\n      </dt>\n      <dd>\n        <span>{printLegendVal(min)}</span>\n        <span>{printLegendVal(max)}</span>\n      </dd>\n      {unit?.label && <dd className='unit'>{unit.label}</dd>}\n    </LegendList>\n  );\n}\n","import Typpy from '@tippyjs/react';\nimport 'tippy.js/dist/tippy.css';\nimport { css } from 'styled-components';\nimport { glsp, themeVal } from '@devseed-ui/theme-provider';\n\n// Re-export.\n// Keeping everything tippy related in a single file\nexport const Tip = Typpy;\n\n// Wrap in body to increase specificity.\nexport const reactTippyStyles = () => css`\n  body {\n    [data-tippy-root] {\n      z-index: ${themeVal('zIndices.tooltip')} !important;\n    }\n\n    .tippy-box {\n      background-color: ${themeVal('color.base')};\n      border-radius: ${themeVal('shape.rounded')};\n    }\n\n    .tippy-arrow {\n      color: ${themeVal('color.base')};\n    }\n\n    .tippy-content {\n      padding: ${glsp(0.25, 0.5)};\n    }\n  }\n`;\n","import styled, { css } from 'styled-components';\nimport {\n  glsp,\n  themeVal,\n  visuallyHidden,\n  media\n} from '@devseed-ui/theme-provider';\nimport { Overline } from '@devseed-ui/typography';\nimport { Button } from '@devseed-ui/button';\n\nimport { variableGlsp } from './variable-utils';\nimport { VarProse } from './variable-components';\n\nconst panelWidth = {\n  xsmall: '20rem',\n  small: '22rem',\n  medium: '24rem'\n};\n\nexport const PANEL_REVEAL_DURATION = 240;\n\nexport const Panel = styled.div<{ revealed: boolean }>`\n  position: relative;\n  z-index: 10;\n  display: flex;\n  flex-direction: column;\n  width: ${panelWidth.xsmall};\n  margin-left: -${panelWidth.xsmall};\n  transition: margin ${PANEL_REVEAL_DURATION}ms ease 0s;\n\n  ${media.smallUp`\n    width: ${panelWidth.small};\n    margin-left: -${panelWidth.small};\n  `}\n\n  ${media.mediumUp`\n    width: ${panelWidth.medium};\n    margin-left: -${panelWidth.medium};\n  `}\n\n  ${media.mediumDown`\n    position: absolute;\n    inset: 0;\n  `}\n\n  ${({ revealed }) =>\n    revealed &&\n    css`\n      & {\n        margin-left: 0;\n      }\n    `}\n\n  &::after {\n    content: '';\n    position: absolute;\n    z-index: -1;\n    background: transparent;\n    width: 0;\n    height: 100%;\n    transition: background 0.64s ease 0s;\n\n    ${({ revealed }) =>\n      revealed &&\n      css`\n        ${media.mediumDown`\n          background: ${themeVal('color.base-400a')};\n          width: 200vw;\n        `}\n      `}\n  }\n`;\n\nexport const PanelInner = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  background: ${themeVal('color.surface')};\n  box-shadow: ${themeVal('boxShadow.elevationD')};\n`;\n\nexport const PanelHeader = styled.div`\n  position: relative;\n`;\n\nexport const PanelHeadline = styled.div`\n  ${visuallyHidden()}\n`;\n\nexport const PanelActions = styled.div`\n  /* styled-component */\n`;\n\nexport const PanelTitle = styled.h2`\n  /* styled-component */\n`;\n\nexport const PanelToggle = styled(Button)`\n  position: absolute;\n  top: ${variableGlsp()};\n  left: calc(100% + ${variableGlsp()});\n`;\n\nexport const PanelBody = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  position:relative;\n\n  > div > div:nth-child(2),\n  > div > div:nth-child(3) {\n    z-index: 1;\n  }\n`;\n\nexport const PanelWidget = styled.article`\n  display: flex;\n  flex-direction: column;\n  background: ${themeVal('color.surface')};\n`;\n\nexport const PanelWidgetHeader = styled.header`\n  position: relative;\n  z-index: 1;\n  padding: ${variableGlsp(0.5, 1, 0.25, 1)};\n  background: ${themeVal('color.surface')};\n`;\n\nexport const PanelWidgetTitle = styled(Overline).attrs({\n  as: 'h3'\n})`\n  /* styled-component */\n`;\n\nexport const PanelWidgetBody = styled.div`\n  /* styled-component */\n`;\n\nexport const WidgetItemHeader = styled.header`\n  display: flex;\n  flex-flow: column nowrap;\n  padding: ${variableGlsp(0.5, 1)};\n  gap: ${glsp(0.5)};\n  min-width: 0;\n`;\n\nexport const WidgetItemHeadline = styled.div`\n  min-width: 0px;\n`;\n\nexport const WidgetItemHGroup = styled.div`\n  display: flex;\n  flex-flow: row nowrap;\n  gap: ${glsp(0.5)};\n  justify-content: space-between;\n`;\n\nexport const WidgetItemBodyInner = styled(VarProse)`\n  position: relative;\n  z-index: 8;\n  box-shadow: inset 0 1px 0 0 ${themeVal('color.base-100a')};\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n  padding: ${variableGlsp(0.5, 1)};\n  background: ${themeVal('color.base-50a')};\n\n  /* stylelint-disable-next-line no-descending-specificity */\n  > * {\n    margin-bottom: ${glsp(0.75)};\n  }\n`;\n","import { useCallback, useState } from 'react';\nimport { Option } from './basemaps';\n\nexport function useBasemap() {\n  const [labelsOption, setLabelsOption] = useState(true);\n  const [boundariesOption, setBoundariesOption] = useState(true);\n  const onOptionChange = useCallback(\n    (option: Option, value: boolean) => {\n      if (option === 'labels') {\n        setLabelsOption(value);\n      } else {\n        setBoundariesOption(value);\n      }\n    },\n    [setLabelsOption, setBoundariesOption]\n  );\n\n  return {\n    labelsOption,\n    boundariesOption,\n    onOptionChange\n  };\n}\n","import { useQuery } from '@tanstack/react-query';\nimport { AnySourceImpl, Layer, Style } from 'mapbox-gl';\nimport { useEffect, useState } from 'react';\nimport {\n  BasemapId,\n  BASEMAP_STYLES,\n  getStyleUrl,\n  GROUPS_BY_OPTION\n} from '../map-options/basemaps';\nimport { ExtendedLayer, useMapStyle } from './styles';\n\ninterface BasemapProps {\n  basemapStyleId?: BasemapId;\n  labelsOption?: boolean;\n  boundariesOption?: boolean;\n}\n\nfunction mapGroupNameToGroupId(\n  groupNames: string[],\n  mapboxGroups: Record<string, { name: string }>\n) {\n  const groupsAsArray = Object.entries(mapboxGroups);\n\n  return groupNames.map((groupName) => {\n    return groupsAsArray.find(([, group]) => group.name === groupName)?.[0];\n  });\n}\n\nexport function Basemap({\n  basemapStyleId = 'satellite',\n  labelsOption = true,\n  boundariesOption = true\n}: BasemapProps) {\n  const { updateStyle } = useMapStyle();\n\n  const [baseStyle, setBaseStyle] = useState<Style | undefined>(undefined);\n\n  const { data: styleJson } = useQuery(\n    ['basemap', basemapStyleId],\n    async ({ signal }) => {\n      const mapboxId = basemapStyleId\n        ? BASEMAP_STYLES.find((b) => b.id === basemapStyleId)!.mapboxId\n        : BASEMAP_STYLES[0].mapboxId;\n\n      try {\n        const url = getStyleUrl(mapboxId);\n        const styleRaw = await fetch(url, { signal });\n        const styleJson = await styleRaw.json();\n        return styleJson;\n      } catch (e) {\n        /* eslint-disable-next-line no-console */\n        console.error(e);\n      }\n    }\n  );\n\n  useEffect(() => {\n    setBaseStyle(styleJson as Style);\n  }, [styleJson]);\n\n  // Apply labels and boundaries options, by setting visibility on related layers\n  // For simplicity's sake, the Mapbox layer group (as set in Mapbox Studio) is used\n  // to determine wehether a layer is a labels layer or boundaries or none of those.\n  useEffect(() => {\n    if (!baseStyle) return;\n\n    // Mapbox creates a groupId that can't be changed, so we need to get\n    // this id from the list of groups in the metadata section of the style.\n    const labelsGroupIds = mapGroupNameToGroupId(\n      GROUPS_BY_OPTION.labels,\n      baseStyle.metadata['mapbox:groups']\n    );\n    const boundariesGroupIds = mapGroupNameToGroupId(\n      GROUPS_BY_OPTION.boundaries,\n      baseStyle.metadata['mapbox:groups']\n    );\n\n    const layers = baseStyle.layers.map((layer) => {\n      const layerGroup = (layer as Layer).metadata?.['mapbox:group'];\n\n      if (layerGroup) {\n        const isLabelsLayer = labelsGroupIds.includes(layerGroup);\n        const isBoundariesLayer = boundariesGroupIds.includes(layerGroup);\n\n        const visibility =\n          (isLabelsLayer && labelsOption) ||\n          (isBoundariesLayer && boundariesOption)\n            ? 'visible'\n            : 'none';\n\n        if (isLabelsLayer || isBoundariesLayer) {\n          return {\n            ...layer,\n            layout: {\n              ...(layer as Layer).layout,\n              visibility\n            },\n            metadata: {\n              layerOrderPosition: 'basemap-foreground'\n            }\n          };\n        }\n        return { ...layer };\n      }\n      return { ...layer };\n    });\n\n    updateStyle({\n      generatorId: 'basemap',\n      sources: baseStyle.sources as Record<string, AnySourceImpl>,\n      layers: layers as ExtendedLayer[]\n    });\n  }, [updateStyle, labelsOption, boundariesOption, baseStyle]);\n\n  return null;\n}\n","import { format } from 'date-fns';\n\nimport { TimeDensity } from '$context/layer-data';\n\nconst dateFormats = {\n  year: 'yyyy',\n  month: 'LLL yyyy',\n  day: 'LLL do, yyyy'\n};\n\nexport function formatSingleDate(date: Date, timeDensity?: TimeDensity) {\n  return format(date, dateFormats[timeDensity || 'day']);\n}\n\nexport function formatCompareDate(\n  dateA: Date,\n  dateB: Date,\n  timeDensityA?: TimeDensity,\n  timeDensityB?: TimeDensity\n) {\n  return `${formatSingleDate(dateA, timeDensityA)} VS ${formatSingleDate(\n    dateB,\n    timeDensityB\n  )}`;\n}\n","import { useMemo } from 'react';\n\nimport { useDeepCompareMemo } from 'use-deep-compare';\nimport {\n  QueryState,\n  useQueries,\n  useQueryClient,\n  UseQueryOptions,\n  UseQueryResult\n} from '@tanstack/react-query';\nimport axios from 'axios';\nimport { DatasetLayer, DatasetLayerCompareNormalized, datasets } from 'veda';\n\nimport { getCompareLayerData } from '$components/common/mapbox/layers/utils';\nimport { S_SUCCEEDED } from '$utils/status';\n\nexport type TimeDensity = 'day' | 'month' | 'year' | null;\n\ninterface STACLayerData {\n  timeseries: {\n    isPeriodic: boolean;\n    timeDensity: TimeDensity;\n    domain: string[];\n  };\n}\n\nconst fetchLayerById = async (\n  layer: DatasetLayer | DatasetLayerCompareNormalized\n): Promise<STACLayerData | Error> => {\n  const { type, stacApiEndpoint, stacCol, time_density } = layer;\n  const stacApiEndpointToUse = stacApiEndpoint ?? process.env.API_STAC_ENDPOINT;\n\n  const { data } = await axios.get(\n    `${stacApiEndpointToUse}/collections/${stacCol}`\n  );\n\n  // CMR Layer needs to get time_density from MDX file\n  const commonTimeseriesParams = {\n    isPeriodic: !!time_density || data['dashboard:is_periodic'],\n    timeDensity: time_density ?? data['dashboard:time_density']\n  };\n\n  if (type === 'vector') {\n    const featuresApiEndpoint = data.links.find(\n      (l) => l.rel === 'external'\n    ).href;\n    const { data: featuresApiData } = await axios.get(featuresApiEndpoint);\n\n    return {\n      timeseries: {\n        ...commonTimeseriesParams,\n        domain: featuresApiData.extent.temporal.interval[0]\n      }\n    };\n  } else if (type === 'cmr') {\n    const domain = data.summaries?.datetime?.[0]\n      ? data.summaries.datetime\n      : data.extent.temporal.interval[0];\n    const domainStart = domain[0];\n    \n    // CMR STAC returns datetimes with `null` as the last value to indicate ongoing data.\n    const lastDatetime = domain[domain.length - 1] ||  new Date().toISOString();\n    \n    return {\n      timeseries: {\n        ...commonTimeseriesParams,\n        domain: [domainStart, lastDatetime]\n      }\n    };\n  } else {\n    const domain = data.summaries?.datetime?.[0]\n      ? data.summaries.datetime\n      : data.extent.temporal.interval[0];\n\n    if (domain.some((d) => !d)) {\n      throw new Error('Invalid datetime domain');\n    }\n    return {\n      timeseries: {\n        ...commonTimeseriesParams,\n        domain\n      }\n    };\n  }\n};\n\n// Create a query object for react query.\nconst makeQueryObject = (\n  layer: DatasetLayer | DatasetLayerCompareNormalized\n): UseQueryOptions => ({\n  queryKey: ['layer', layer.stacApiEndpoint, layer.stacCol],\n  queryFn: () => fetchLayerById(layer),\n  // This data will not be updated in the context of a browser session, so it is\n  // safe to set the staleTime to Infinity. As specified by react-query's\n  // \"Important Defaults\", cached data is considered stale which means that\n  // there would be a constant refetching.\n  staleTime: Infinity,\n  // Errors are always considered stale. If any layer errors, any refocus would\n  // cause a refetch. This is normally a good thing but since we have a refetch\n  // button, this is not needed.\n  refetchOnMount: false,\n  refetchOnReconnect: false,\n  refetchOnWindowFocus: false\n});\n\n// /////////////////////////////////////////////////////////////////////////////\n// Consumers and helpers\n// /////////////////////////////////////////////////////////////////////////////\n\n// Ensure that the data property cannot be undefined.\ntype NullableQueryState<TData, TError = unknown> = QueryState<\n  TData | null,\n  TError\n> & { data: TData | null };\n\nexport interface AsyncDatasetLayer {\n  baseLayer: NullableQueryState<Omit<DatasetLayer, 'compare'> & STACLayerData>;\n  compareLayer: NullableQueryState<\n    DatasetLayerCompareNormalized & STACLayerData\n  > | null;\n  reFetch: (() => void) | null;\n}\n\ninterface NullAsyncDatasetLayer {\n  baseLayer: null;\n  compareLayer: null;\n  reFetch: null;\n}\n\nconst useLayersInit = (layers: DatasetLayer[]): AsyncDatasetLayer[] => {\n  const queryClient = useQueryClient();\n\n  const queries = useMemo(\n    () =>\n      layers.reduce<UseQueryOptions[]>((acc, layer) => {\n        let queries = acc.concat(makeQueryObject(layer));\n\n        const compareLayer = getCompareLayerData(layer);\n        if (compareLayer && compareLayer.stacCol !== layer.stacCol) {\n          queries = queries.concat(makeQueryObject(compareLayer));\n        }\n\n        return queries;\n      }, []),\n    [layers]\n  );\n\n  // useQueries does not produce a stable result, so `layerQueries` will be\n  // changing on every render. This is a problem because we must compute the\n  // final layer data which should only be done if the data actually changes.\n  const layerQueries = useQueries({\n    queries\n  }) as UseQueryResult<STACLayerData>[];\n  // There is an issue for this behavior but seems like it won't be fixed in the\n  // near future:\n  // https://github.com/tannerlinsley/react-query/issues/3049\n  // The proposed solution is to use useDeepCompareMemo which compares the\n  // dependency by value instead of by reference.\n  return useDeepCompareMemo(() => {\n    // Merge the data from STAC and the data from the configuration into a\n    // single object with meta information about the request status.\n    function mergeSTACData<\n      T extends Omit<DatasetLayer, 'compare'> | DatasetLayerCompareNormalized\n    >(baseData: T) {\n      // At this point the result of queryClient.getQueryState will never be\n      // undefined.\n      /* eslint-disable-next-line @typescript-eslint/non-nullable-type-assertion-style */\n      const dataSTAC = queryClient.getQueryState([\n        'layer',\n        baseData.stacApiEndpoint,\n        baseData.stacCol\n      ]) as QueryState<STACLayerData>;\n\n      if (dataSTAC.status !== S_SUCCEEDED) {\n        return dataSTAC as unknown as NullableQueryState<null>;\n      }\n\n      return {\n        ...dataSTAC,\n        data: {\n          ...baseData,\n          ...dataSTAC.data\n        }\n      } as NullableQueryState<T & STACLayerData>;\n    }\n\n    return layers.map((layer) => {\n      // Remove compare from layer.\n      /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\n      const { compare, ...layerProps } = layer;\n\n      // The compare definition needs to be resolved to a real layer before\n      // returning. The values for the compare layer will depend on how it is\n      // defined:\n      // is if from a dataset?\n      // is it a layer defined in-line?\n      const compareLayer = getCompareLayerData(layer);\n\n      return {\n        baseLayer: mergeSTACData(layerProps),\n        compareLayer: compareLayer && mergeSTACData(compareLayer),\n        reFetch: () =>\n          queryClient.refetchQueries(\n            ['layer', layer.stacApiEndpoint, layer.stacCol],\n            {\n              type: 'active',\n              exact: true\n            }\n          )\n      };\n    });\n  }, [layers, queryClient, layerQueries]);\n};\n\n// Context consumers.\nexport const useDatasetAsyncLayer = (\n  datasetId?: string,\n  layerId?: string\n): NullAsyncDatasetLayer | AsyncDatasetLayer => {\n  const hasParams = !!datasetId && !!layerId;\n  const dataset = datasets[datasetId ?? ''];\n  // Get the layer information from the dataset defined in the configuration.\n  const layersList = dataset ? dataset.data.layers : [];\n  const layer = layersList.find((l) => l.id === layerId);\n\n  // The layers must be defined in the configuration otherwise it is not\n  // possible to load them.\n  if (hasParams && !layer) {\n    throw new Error(`Layer [${layerId}] not found in dataset [${datasetId}]`);\n  }\n\n  const layerAsArray = useMemo(() => (layer ? [layer] : []), [layer]);\n  const asyncLayers = useLayersInit(layerAsArray);\n\n  return useMemo(\n    () =>\n      asyncLayers[0] || {\n        baseLayer: null,\n        compareLayer: null,\n        reFetch: null\n      },\n    [asyncLayers]\n  );\n};\n\nexport const useDatasetAsyncLayers = (datasetId) => {\n  const dataset = datasets[datasetId ?? ''];\n  // Get the layer information from the dataset defined in the configuration.\n  return useLayersInit(dataset?.data.layers ?? []);\n};\n\ninterface ReferencedLayer {\n  datasetId: string;\n  layerId: string;\n  skipCompare?: boolean;\n}\n\nexport const useAsyncLayers = (referencedLayers: ReferencedLayer[]) => {\n  // Get the layers from the different datasets.\n  const layers = useMemo(\n    () =>\n      referencedLayers.map(({ datasetId, layerId, skipCompare }) => {\n        const layers = datasets[datasetId]?.data.layers;\n        // Get the layer information from the dataset defined in the configuration.\n        const layer = layers?.find(\n          (l) => l.id === layerId\n        ) as DatasetLayer | null;\n\n        // The layers must be defined in the configuration otherwise it is not\n        // possible to load them.\n        if (!layer) {\n          throw new Error(\n            `Layer [${layerId}] not found in dataset [${datasetId}]`\n          );\n        }\n\n        // Skip the compare to avoid unnecessary network requests.\n        if (skipCompare) {\n          return {\n            ...layer,\n            compare: null\n          };\n        }\n\n        return layer;\n      }),\n    [referencedLayers]\n  );\n\n  // Get the layer information from the dataset defined in the configuration.\n  return useLayersInit(layers);\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { HintedError } from '$utils/hinted-error';\nimport BrowserFrame from '$styles/browser-frame';\n\nconst EmbedWrapper = styled.div`\n  width: 100%;\n\n  > div {\n    width: 100%;\n  }\n`;\n\nconst IframeWrapper = styled.iframe`\n  width: 100%;\n  border: 0;\n  height: ${(props: { height: number }) => props.height}px;\n`;\n\ninterface EmbedProps {\n  className?: string;\n  src: string;\n  height: number;\n}\n\nexport default function Embed({\n  className,\n  src,\n  height = 800,\n  ...props\n}: EmbedProps) {\n  if (!src) {\n    throw new HintedError('Embed block requires a URL');\n  }\n\n  return (\n    <EmbedWrapper className={className}>\n      <BrowserFrame link={src}>\n        <IframeWrapper loading='lazy' src={src} height={height} {...props} />\n      </BrowserFrame>\n    </EmbedWrapper>\n  );\n}\n","import React, { ReactNode } from 'react';\nimport styled from 'styled-components';\nimport { themeVal } from '@devseed-ui/theme-provider';\nimport { CollecticonExpandTopRight } from '@devseed-ui/collecticons';\n\nfunction BrowserFrameComponent(props: { children: ReactNode; link?: string }) {\n  const { children, link, ...rest } = props;\n  return (\n    <div {...rest}>\n      <div className='controls'>\n        <div className='buttons'>\n          <span />\n          <span />\n          <span />\n        </div>\n        {link && (\n          <div className='link'>\n            <a target='_blank' rel='noreferrer' href={link}>\n              Open in a new browser tab {' '}\n              <CollecticonExpandTopRight size='small' />\n            </a>\n          </div>\n        )}\n      </div>\n      <div>{children}</div>\n    </div>\n  );\n}\n\nconst BrowserFrame = styled(BrowserFrameComponent)`\n  position: relative;\n  padding: 0 0 1rem 0;\n  background: ${themeVal('color.base-200')};\n  box-shadow: 0 0 1px 0 ${themeVal('color.base-400')};\n  width: fit-content;\n  border-radius: ${themeVal('shape.rounded')};\n\n  .controls {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    .buttons {\n      gap: 0.5rem;\n      padding: 0.625rem 0.5rem;\n      display: flex;\n      span {\n        display: block;\n        width: 0.75rem;\n        height: 0.75rem;\n        content: '';\n        border-radius: ${themeVal('shape.ellipsoid')};\n        background: ${themeVal('color.base-300')};\n      }\n    }\n\n    .link {\n      padding-right: .625rem;\n      font-size: 0.875rem;\n    }\n  }\n`;\n\nexport default BrowserFrame;\n","import React, {\n  Children,\n  FunctionComponent,\n  ReactElement,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState\n} from 'react';\nimport T from 'prop-types';\nimport styled, { css } from 'styled-components';\n// Avoid error: node_modules/date-fns/esm/index.js does not export 'default'\nimport * as dateFns from 'date-fns';\nimport scrollama from 'scrollama';\nimport { CSSTransition, SwitchTransition } from 'react-transition-group';\nimport { Map as MapboxMap } from 'mapbox-gl';\nimport { CollecticonCircleXmark } from '@devseed-ui/collecticons';\n\nimport { BlockErrorBoundary } from '..';\nimport {\n  chapterDisplayName,\n  ChapterProps,\n  ScrollyChapter,\n  validateChapter\n} from './chapter';\nimport {\n  getLayerComponent,\n  resolveConfigFunctions\n} from '$components/common/mapbox/layers/utils';\nimport { AsyncDatasetLayer, useAsyncLayers } from '$context/layer-data';\nimport { userTzDate2utcString, utcString2userTzDate } from '$utils/date';\nimport { S_FAILED, S_SUCCEEDED } from '$utils/status';\n\nimport { SimpleMap } from '$components/common/mapbox/map';\nimport Hug from '$styles/hug';\nimport {\n  LayerLegendContainer,\n  LayerLegend\n} from '$components/common/mapbox/layer-legend';\nimport MapMessage from '$components/common/mapbox/map-message';\nimport { MapLoading } from '$components/common/loading-skeleton';\nimport { HintedError } from '$utils/hinted-error';\nimport { formatSingleDate } from '$components/common/mapbox/utils';\nimport { convertProjectionToMapbox } from '$components/common/mapbox/map-options/utils';\nimport { useSlidingStickyHeaderProps } from '$components/common/layout-root';\nimport { HEADER_TRANSITION_DURATION } from '$utils/use-sliding-sticky-header';\nimport { Styles } from '$components/common/mapbox/layers/styles';\nimport { Basemap } from '$components/common/mapbox/layers/basemap';\n\ntype ResolvedLayer = {\n  layer: Exclude<AsyncDatasetLayer['baseLayer']['data'], null>;\n  Component: FunctionComponent<any> | null;\n  runtimeData: { datetime?: Date; id: string };\n} | null;\n\nexport const scrollyMapHeight = 'calc(100vh - 3rem)';\n\nconst ScrollyMapWrapper = styled.div``;\n\nconst TheMap = styled.div<{ topOffset: number }>`\n  height: ${scrollyMapHeight};\n  position: sticky;\n  transition: top ${HEADER_TRANSITION_DURATION}ms ease-out,\n    height ${HEADER_TRANSITION_DURATION}ms ease-out;\n\n  ${({ topOffset }) => css`\n    top: ${topOffset}px;\n    height: calc(100vh - ${topOffset}px);\n  `}\n  .mapboxgl-canvas {\n    height: 100%;\n  }\n`;\n\nconst TheChapters = styled(Hug)`\n  position: relative;\n  z-index: 2;\n  pointer-events: none;\n`;\n\n/**\n * Get's the chapter props from the scrollytelling block's children.\n * Converts the props to the correct format. (like the datetime).\n *\n * @throws Error if any children is not a Chapter\n *\n * @param children ScrollytellingBlock children elements\n */\nfunction useChapterPropsFromChildren(children): ScrollyChapter[] {\n  return useMemo(() => {\n    const chapters = Children.toArray(children) as ReactElement<\n      ChapterProps,\n      any\n    >[];\n\n    if (chapters.some((c) => c.type.displayName !== chapterDisplayName)) {\n      throw new HintedError('Invalid ScrollytellingBlock children', [\n        'You can only use <Chapter> inside <ScrollytellingBlock>'\n      ]);\n    }\n\n    const chErrors = chapters.reduce<string[]>(\n      (acc, ch, idx) => acc.concat(validateChapter(ch.props, idx)),\n      []\n    );\n\n    if (chErrors.length) {\n      throw new HintedError('Malformed ScrollytellingBlock Chapter', chErrors);\n    }\n\n    // Extract the props from the chapters.\n    return chapters.map(\n      (c) =>\n        ({\n          ...c.props,\n          datetime: c.props.datetime\n            ? utcString2userTzDate(c.props.datetime)\n            : undefined\n        } as unknown as ScrollyChapter)\n    );\n  }, [children]);\n}\n\n/**\n * Get a key that uniquely identifies the layer.\n *\n * @param ch The chapter\n * @returns string\n */\nfunction getChapterLayerKey(ch: ScrollyChapter) {\n  return `${ch.datasetId}-${ch.layerId}-${userTzDate2utcString(ch.datetime)}`;\n}\n\n/**\n *\n * @param {array} chList List of chapters\n */\nfunction useMapLayersFromChapters(chList: ScrollyChapter[]) {\n  // The layers are unique based on the dataset, layer id and datetime.\n  // Filter out scrollytelling block that doesn't have layer first.\n  const uniqueChapterLayers = useMemo(() => {\n    const unique = chList\n      .filter(({ showBaseMap }) => !showBaseMap)\n      .reduce(\n        (acc, ch) => acc.set(getChapterLayerKey(ch), ch),\n        new Map<string, ScrollyChapter>()\n      );\n    return Array.from(unique.values());\n  }, [chList]);\n\n  // Create an array of datasetId & layerId to pass useAsyncLayers so that the\n  // layers can be loaded. The skipCompare prevents the compare layer to be\n  // loaded, since it will never be used.\n  const uniqueLayerRefs = useMemo(() => {\n    return uniqueChapterLayers.map(({ datasetId, layerId }) => ({\n      datasetId,\n      layerId,\n      skipCompare: true\n    }));\n  }, [uniqueChapterLayers]);\n\n  const asyncLayers = useAsyncLayers(uniqueLayerRefs);\n\n  // Create a ref to cache each of the async layers.\n  // After the async layer data is loaded from STAC, the layer functions have\n  // to be resolved by the `resolveConfigFunctions`. This function will return a\n  // new object every time causing useEffects that depend on this data to fire\n  // multiple times, even though the data didn't actually change. An example of\n  // this is the `sourceParams` in `MapLayerRasterTimeseries`.\n  // Since the these values only have to be computed once, when the layer loads,\n  // we can use this cache. On every hook run the asyncLayers.map below will\n  // return the cached value if it exists or compute and cache.\n  const resolvedLayersCache = useRef<ResolvedLayer[]>([]);\n\n  // Each resolved layer will be an object with:\n  // layer: The resolved layerData\n  // Component: The component to render the layer\n  // runtimeData: The runtime data for the layer\n  //\n  // The difference between runtimeData and layer is that the layer has the\n  // layer definition data, the runtimeData belongs to the application and not\n  // the layer. For example the datetime, results from a user action (picking\n  // on the calendar or in this case setting it in the MDX).\n  const resolvedLayers = useMemo(\n    () =>\n      asyncLayers.map(({ baseLayer }, index) => {\n        if (baseLayer.status !== S_SUCCEEDED || !baseLayer.data) return null;\n\n        if (resolvedLayersCache.current[index]) {\n          return resolvedLayersCache.current[index];\n        }\n\n        // Some properties defined in the dataset layer config may be functions\n        // that need to be resolved before rendering them. These functions accept\n        // data to return the correct value. Include access to raw data.\n        const datetime = uniqueChapterLayers[index].datetime;\n        const bag = {\n          datetime,\n          dateFns,\n          raw: baseLayer.data\n        };\n        const data = resolveConfigFunctions(baseLayer.data, bag);\n\n        const resolved = {\n          layer: data,\n          Component: getLayerComponent(!!data.timeseries, data.type),\n          runtimeData: {\n            datetime,\n            id: getChapterLayerKey(uniqueChapterLayers[index])\n          }\n        };\n\n        // Need to set it as ResolvedLayer because the \"resolveConfigFunctions\"\n        // is doing something weird to the tuples and converting something like\n        // \"center: [number, number]\" to \"center: number[]\" which fails\n        // validation.\n        resolvedLayersCache.current[index] = resolved as ResolvedLayer;\n\n        return resolved;\n      }),\n    [uniqueChapterLayers, asyncLayers]\n  );\n\n  const resolvedStatus = useMemo(\n    () => asyncLayers.map(({ baseLayer }) => baseLayer.status),\n    [asyncLayers]\n  );\n\n  return [resolvedLayers, resolvedStatus] as [\n    typeof resolvedLayers,\n    typeof resolvedStatus\n  ];\n}\n\n/**\n * Returns a tuple of [areAllLayersAddedToTheMap, onLoadCb]. All layers will be\n * considered added when the onLoadCb is called `count` times with the\n * \"succeeded\" status.\n *\n * @param count Total count to reach.\n * @returns [areAllLayersAddedToTheMap, onLoadCb]\n */\nfunction useAllLayersAdded(count): [boolean, (cb: { status: string }) => void] {\n  const succeededCount = useRef(0);\n  const [allAdded, setAdded] = useState(false);\n\n  const onLoadCb = useCallback(\n    ({ status }) => {\n      if (status === S_SUCCEEDED && ++succeededCount.current >= count) {\n        setAdded(true);\n      }\n    },\n    [count]\n  );\n\n  return [allAdded, onLoadCb];\n}\n\nconst mapOptions = {\n  interactive: false,\n  trackResize: true,\n  center: [0, 0] as [number, number],\n  zoom: 1\n};\n\n//\n// Scrollytelling Block React Component\n//\nfunction Scrollytelling(props) {\n  const { children } = props;\n\n  const { isHeaderHidden, headerHeight, wrapperHeight } =\n    useSlidingStickyHeaderProps();\n\n  const mapContainer = useRef<HTMLDivElement>(null);\n  const mapRef = useRef<MapboxMap>(null);\n  const [isMapLoaded, setMapLoaded] = useState(false);\n\n  // Extract the props from the chapters.\n  const chapterProps = useChapterPropsFromChildren(children);\n\n  const [resolvedLayers, resolvedStatus] =\n    useMapLayersFromChapters(chapterProps);\n  const [activeChapter, setActiveChapter] = useState<ScrollyChapter | null>(\n    null\n  );\n\n  // All layers must be loaded, resolved, and added to the map before we\n  // initialize scrollama. This is needed because in a scrollytelling map we\n  // need to preload everything so smooth transitions can be applied.\n  const [areAllLayersLoaded, onLayerLoadSuccess] = useAllLayersAdded(\n    resolvedLayers.length\n  );\n\n  useEffect(() => {\n    if (!areAllLayersLoaded) return;\n\n    // Setup initial map state which will be the values on the first chapter.\n    const initialCh = chapterProps[0];\n    mapRef.current?.setZoom(initialCh.zoom);\n    mapRef.current?.setCenter(initialCh.center);\n\n    setActiveChapter(initialCh);\n\n    const scroller = scrollama();\n\n    // setup the instance, pass callback functions\n    scroller\n      .setup({\n        step: '[data-step]',\n        offset: 0.8\n        // ,debug: true\n      })\n      .onStepEnter((response) => {\n        const { index } = response;\n\n        const chapter = chapterProps[index];\n        setActiveChapter(chapter);\n\n        mapRef.current?.flyTo({\n          center: chapter.center,\n          zoom: chapter.zoom\n        });\n\n        const projection = chapter.projectionId\n          ? {\n              id: chapter.projectionId,\n              center: chapter.projectionCenter,\n              parallels: chapter.projectionParallels\n            }\n          : undefined;\n\n        projection &&\n          // @ts-expect-error setProjection is missing on type\n          mapRef.current?.setProjection(convertProjectionToMapbox(projection));\n      });\n\n    return () => {\n      scroller.destroy();\n    };\n  }, [chapterProps, areAllLayersLoaded]);\n\n  const activeChapterLayerId =\n    activeChapter &&\n    !activeChapter.showBaseMap &&\n    getChapterLayerKey(activeChapter);\n\n  const activeChapterLayer = resolvedLayers.find(\n    (resolvedLayer) => resolvedLayer?.runtimeData.id === activeChapterLayerId\n  );\n\n  const didFailLayerLoading = resolvedStatus.some((s) => s === S_FAILED);\n  const areLayersLoading = !didFailLayerLoading && !areAllLayersLoaded;\n\n  // The top offset for the scrollytelling element will depend on whether the\n  // header is visible or not.\n  const topOffset = isHeaderHidden\n    ? // With the header hidden the offset is just the nav bar height.\n      wrapperHeight - headerHeight\n    : // Otherwise it's the full header height.\n      wrapperHeight;\n\n  return (\n    <ScrollyMapWrapper>\n      <TheMap topOffset={topOffset}>\n        {areLayersLoading && <MapLoading />}\n\n        {/*\n          Map overlay element\n          Map message for loading error\n        */}\n        <MapMessage\n          id='scrolly-map-message'\n          active={didFailLayerLoading}\n          isInvalid\n        >\n          <CollecticonCircleXmark /> There was a problem loading the map data.\n          Refresh the page and try again.\n        </MapMessage>\n\n        {/*\n        Map overlay element\n        Message shown with the current date.\n      */}\n        <MapMessage\n          id='scrolly-map-date-message'\n          active={!!activeChapterLayer?.runtimeData.datetime}\n        >\n          {activeChapterLayer?.runtimeData.datetime\n            ? formatSingleDate(\n                activeChapterLayer.runtimeData.datetime,\n                activeChapterLayer.layer.timeseries.timeDensity\n              )\n            : null}\n        </MapMessage>\n\n        {/*\n          Map overlay element\n          Layer legend for the active layer.\n\n          The SwitchTransition animated between 2 elements, so when there's no\n          legend we use an empty div to ensure that there's an out animation.\n          We also have to set the timeout to 1 because the empty div will not\n          have transitions defined for it. This causes the transitionend\n          listener to never fire leading to an infinite wait.\n        */}\n        <SwitchTransition>\n          <CSSTransition\n            key={activeChapterLayer?.layer.name}\n            timeout={!activeChapterLayer ? 1 : undefined}\n            addEndListener={(node, done) => {\n              if (!activeChapterLayer) return;\n              node?.addEventListener('transitionend', done, false);\n            }}\n            classNames='reveal'\n          >\n            {activeChapterLayer?.layer.legend ? (\n              <LayerLegendContainer>\n                <LayerLegend\n                  id={`base-${activeChapterLayer.layer.id}`}\n                  description={activeChapterLayer.layer.description}\n                  title={activeChapterLayer.layer.name}\n                  {...activeChapterLayer.layer.legend}\n                />\n              </LayerLegendContainer>\n            ) : (\n              <div />\n            )}\n          </CSSTransition>\n        </SwitchTransition>\n\n        <Styles>\n          <Basemap />\n          {isMapLoaded &&\n            resolvedLayers.map((resolvedLayer, lIdx) => {\n              if (!resolvedLayer || !mapRef.current) return null;\n\n              const { runtimeData, Component: LayerCmp, layer } = resolvedLayer;\n              const isHidden =\n                !activeChapterLayerId ||\n                activeChapterLayerId !== runtimeData.id ||\n                activeChapter.showBaseMap;\n\n              if (!LayerCmp) return null;\n\n              // Each layer type is added to the map through a component. This\n              // component has all the logic needed to add/update/remove the\n              // layer. Which component to use will depend on the characteristics\n              // of the layer and dataset.\n              // The function getLayerComponent() should be used to get the\n              // correct component.\n              return (\n                <LayerCmp\n                  key={runtimeData.id}\n                  id={runtimeData.id}\n                  mapInstance={mapRef.current}\n                  stacApiEndpoint={layer.stacApiEndpoint}\n                  tileApiEndpoint={layer.tileApiEndpoint}\n                  stacCol={layer.stacCol}\n                  date={runtimeData.datetime}\n                  sourceParams={layer.sourceParams}\n                  zoomExtent={layer.zoomExtent}\n                  onStatusChange={onLayerLoadSuccess}\n                  idSuffix={'scrolly-' + lIdx}\n                  isHidden={isHidden}\n                />\n              );\n            })}\n          <SimpleMap\n            className='root'\n            mapRef={mapRef}\n            containerRef={mapContainer}\n            onLoad={() => {\n              setMapLoaded(true);\n              // Fit the map to the container once  loaded.\n              mapRef.current?.resize();\n            }}\n            mapOptions={mapOptions}\n          />\n        </Styles>\n      </TheMap>\n      <TheChapters>{children}</TheChapters>\n    </ScrollyMapWrapper>\n  );\n}\n\nScrollytelling.propTypes = {\n  children: T.node\n};\n\nexport function ScrollytellingBlock(props) {\n  return <BlockErrorBoundary {...props} childToRender={Scrollytelling} />;\n}\n","import React, {\n  Dispatch,\n  ReactNode,\n  SetStateAction,\n  createContext,\n  useCallback,\n  useContext,\n  useState\n} from 'react';\nimport { useDeepCompareEffect } from 'use-deep-compare';\nimport styled from 'styled-components';\nimport { Outlet } from 'react-router';\n\nimport { reveal } from '@devseed-ui/animation';\n\nimport MetaTags from './meta-tags';\nimport PageFooter from './page-footer';\n\nimport { useGoogleTagManager } from '$utils/use-google-tag-manager';\nimport { useSlidingStickyHeader } from '$utils/use-sliding-sticky-header';\nimport NavWrapper from '$components/common/nav-wrapper';\n\nconst appTitle = process.env.APP_TITLE;\nconst appDescription = process.env.APP_DESCRIPTION;\nexport const PAGE_BODY_ID = 'pagebody';\nconst Page = styled.div`\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n  overflow-anchor: none;\n`;\n\nconst PageBody = styled.div`\n  flex-grow: 1;\n  animation: ${reveal} 0.48s ease 0s 1;\n  display: flex;\n  flex-direction: column;\n  overflow-anchor: auto;\n`;\n\nfunction LayoutRoot(props: { children?: ReactNode }) {\n  const { children } = props;\n\n  useGoogleTagManager();\n\n  const { title, thumbnail, description, hideFooter } =\n    useContext(LayoutRootContext);\n\n  const truncatedTitle =\n    title?.length > 32 ? `${title.slice(0, 32)}...` : title;\n\n  const fullTitle = truncatedTitle ? `${truncatedTitle} — ` : '';\n  return (\n    <Page>\n      <MetaTags\n        title={`${fullTitle}${appTitle}`}\n        description={description || appDescription}\n        thumbnail={thumbnail}\n      />\n      <NavWrapper />\n      <PageBody id={PAGE_BODY_ID} tabIndex={-1}>\n        <Outlet />\n        {children}\n      </PageBody>\n      <PageFooter isHidden={hideFooter} />\n    </Page>\n  );\n}\n\nexport default LayoutRoot;\n\ninterface LayoutRootContextProps extends Record<string, any> {\n  setLayoutProps: Dispatch<SetStateAction<Record<string, any>>>;\n  isHeaderHidden: boolean;\n  headerHeight: number;\n  wrapperHeight: number;\n  feedbackModalRevealed: boolean;\n  setFeedbackModalRevealed: Dispatch<SetStateAction<boolean>>;\n}\n\n// Context\nexport const LayoutRootContext = createContext({} as LayoutRootContextProps);\n\nexport function LayoutRootContextProvider({\n  children\n}: {\n  children: ReactNode;\n}) {\n  const [layoutProps, setLayoutProps] = useState<Record<string, any>>({});\n  const [feedbackModalRevealed, setFeedbackModalRevealed] =\n    useState<boolean>(false);\n\n  // Put the header size and visibility status in the context so that children\n  // elements can access them for positioning purposes.\n  const { isHeaderHidden, headerHeight, wrapperHeight } =\n    useSlidingStickyHeader();\n\n  const ctx = {\n    ...layoutProps,\n    setLayoutProps,\n    isHeaderHidden,\n    headerHeight,\n    wrapperHeight,\n    feedbackModalRevealed,\n    setFeedbackModalRevealed\n  };\n\n  return (\n    <LayoutRootContext.Provider value={ctx}>\n      {children}\n    </LayoutRootContext.Provider>\n  );\n}\n\nexport function LayoutProps(props) {\n  const { setLayoutProps } = useContext(LayoutRootContext);\n\n  useDeepCompareEffect(() => {\n    setLayoutProps(props);\n  }, [setLayoutProps, props]);\n\n  return null;\n}\n\n/**\n * Hook to access the values needed to position the sticky headers.\n */\nexport function useSlidingStickyHeaderProps() {\n  const { isHeaderHidden, headerHeight, wrapperHeight } =\n    useContext(LayoutRootContext);\n\n  return {\n    isHeaderHidden,\n    headerHeight,\n    wrapperHeight\n  };\n}\n\n/**\n * Hook to access the feedback modal.\n */\nexport function useFeedbackModal() {\n  const { feedbackModalRevealed, setFeedbackModalRevealed } =\n    useContext(LayoutRootContext);\n\n  return {\n    isRevealed: feedbackModalRevealed,\n    show: useCallback(\n      () => setFeedbackModalRevealed(true),\n      [setFeedbackModalRevealed]\n    ),\n    hide: useCallback(\n      () => setFeedbackModalRevealed(false),\n      [setFeedbackModalRevealed]\n    )\n  };\n}\n","import React from 'react';\nimport T from 'prop-types';\nimport { Helmet } from 'react-helmet';\nimport { useTheme } from 'styled-components';\nimport { useLocation } from 'react-router-dom';\n\nconst appTitle = process.env.APP_TITLE;\nconst baseUrl = window.location.origin;\n\nconst defaultMetaImage = `${process.env.PUBLIC_URL ?? ''}/meta/meta-image.png`;\n\nfunction MetaTags({ title, description, thumbnail, children }) {\n  const theme = useTheme();\n  const location = useLocation();\n\n  return (\n    <Helmet>\n      <title>{title}</title>\n      {description ? <meta name='description' content={description} /> : null}\n      <meta name='theme-color' content={theme?.color.primary} />\n\n      {/* Twitter */}\n      <meta name='twitter:card' content='summary' />\n      <meta name='twitter:creator' content='author' />\n      <meta name='twitter:title' content={title} />\n      {description ? (\n        <meta name='twitter:description' content={description} />\n      ) : null}\n      <meta name='twitter:image' content={thumbnail || defaultMetaImage} />\n\n      {/* Open Graph */}\n      <meta property='og:type' content='website' />\n      <meta\n        property='og:url'\n        content={`${baseUrl}${location.pathname}` || baseUrl}\n      />\n      <meta property='og:site_name' content={appTitle} />\n      <meta property='og:title' content={title} />\n      <meta property='og:image' content={thumbnail || defaultMetaImage} />\n      {description ? (\n        <meta property='og:description' content={description} />\n      ) : null}\n\n      {/* Additional children */}\n      {children}\n\n      {/* Additional javascript */}\n      {/* @NOTE https://github.com/NASA-IMPACT/veda-ui/pull/846 */}\n      {process.env.CUSTOM_SCRIPT_SRC ? (\n        <script\n          async\n          type='text/javascript'\n          src={process.env.CUSTOM_SCRIPT_SRC}\n          id={\n            process.env.CUSTOM_SCRIPT_ID\n              ? process.env.CUSTOM_SCRIPT_ID\n              : 'custom_script_id'\n          }\n        />\n      ) : null}\n    </Helmet>\n  );\n}\n\nMetaTags.propTypes = {\n  title: T.string,\n  description: T.string,\n  thumbnail: T.string,\n  children: T.node\n};\n\nexport default MetaTags;\n","import React from 'react';\nimport T from 'prop-types';\nimport styled from 'styled-components';\nimport { format } from 'date-fns';\n\nimport {\n  glsp,\n  themeVal,\n  visuallyHidden,\n  media\n} from '@devseed-ui/theme-provider';\nimport { reveal } from '@devseed-ui/animation';\nimport { Button } from '@devseed-ui/button';\nimport {\n  CollecticonBrandGithub,\n  CollecticonEnvelope\n} from '@devseed-ui/collecticons';\nimport { createSubtitleStyles } from '@devseed-ui/typography';\n\nimport { variableGlsp } from '../../styles/variable-utils';\nimport { Tip } from '$components/common/tip';\nimport { ComponentOverride } from '$components/common/page-overrides';\n\nimport SmartLink from '$components/common/smart-link';\n\nconst PageFooterSelf = styled.footer`\n  padding: ${variableGlsp(0.75, 1)};\n  background: ${themeVal('color.base-50')};\n  animation: ${reveal} 0.32s ease 0s 1;\n  display: flex;\n  flex-flow: column nowrap;\n\n  ${({ isHidden }) => isHidden && visuallyHidden()}\n\n  ${media.smallUp`\n    flex-flow: row nowrap;\n  `}\n\n  a {\n    &,\n    &:visited {\n      color: inherit;\n    }\n  }\n`;\n\nconst FooterCredits = styled.address`\n  font-size: 0.875rem;\n  line-height: 1.5rem;\n  font-style: normal;\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: flex-end;\n\n  a span {\n    ${visuallyHidden()}\n  }\n\n  h3 {\n    ${visuallyHidden()}\n  }\n\n  small {\n    font-size: inherit;\n    display: block;\n    opacity: 0.64;\n  }\n`;\n\nconst InfoList = styled.dl`\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  grid-auto-flow: column;\n  gap: ${glsp(0, 1)};\n  align-items: start;\n  margin-bottom: ${variableGlsp()};\n\n  ${media.smallUp`\n    gap: ${glsp(0, 2)};\n    margin: 0 0 0 auto;\n    order: 2;\n  `}\n\n  ${media.mediumUp`\n    grid-template-columns: repeat(4, auto);\n    grid-auto-flow: auto;\n    grid-gap: ${variableGlsp(0, 0.5)};\n    align-items: center;\n  `}\n\n  dt {\n    ${createSubtitleStyles()}\n    text-transform: uppercase;\n    font-size: 0.75rem;\n    line-height: 1rem;\n    grid-row: 1;\n\n    ${media.mediumUp`\n      margin-left: ${variableGlsp()};\n    `}\n  }\n\n  dd {\n    grid-row: 2;\n\n    ${media.mediumUp`\n      grid-row: 1;\n    `}\n  }\n`;\n\nfunction PageFooter(props) {\n  const nowDate = new Date();\n\n  return (\n    <PageFooterSelf isHidden={props.isHidden}>\n      <ComponentOverride\n        with='pageFooter'\n        appVersion={process.env.APP_VERSION}\n        appUiVersion={process.env.APP_UI_VERSION}\n        appBuildTime={process.env.APP_BUILD_TIME}\n      >\n        <InfoList>\n          <dt>NASA official</dt>\n          <dd>\n            <Button\n              forwardedAs='a'\n              href='mailto:manil.maskey@nasa.gov'\n              variation='base-text'\n              size='small'\n              fitting='skinny'\n            >\n              <CollecticonEnvelope title='Get in touch' meaningful />\n              Manil Maskey\n            </Button>\n          </dd>\n          <dt>Open source code</dt>\n          <dd>\n            <Button\n              forwardedAs='a'\n              href='https://github.com/NASA-IMPACT/veda-config'\n              variation='base-text'\n              size='small'\n              fitting='skinny'\n              target='_blank'\n              rel='noopener noreferrer'\n            >\n              <CollecticonBrandGithub title='Explore the code' meaningful />\n              GitHub\n            </Button>\n          </dd>\n        </InfoList>\n        <FooterCredits>\n          <p>\n            <SmartLink to='https://earthdata.nasa.gov/'>\n              <span>By</span> NASA <strong>Earthdata</strong> <span>on</span>{' '}\n              <time dateTime={nowDate.getFullYear()}>\n                {nowDate.getFullYear()}\n              </time>\n            </SmartLink>\n            {' • '}\n            <Tip\n              content={`Released on ${format(\n                new Date(+process.env.APP_BUILD_TIME),\n                'PPPP'\n              )} (veda-ui v${process.env.APP_VERSION}))`}\n            >\n              <span>v{process.env.APP_VERSION}</span>\n            </Tip>\n          </p>\n        </FooterCredits>\n      </ComponentOverride>\n    </PageFooterSelf>\n  );\n}\n\nexport default PageFooter;\n\nPageFooter.propTypes = {\n  isHidden: T.bool\n};\n","import React, { lazy, ReactNode } from 'react';\nimport { MDXProvider } from '@mdx-js/react';\nimport { getOverride, PageOverrides } from 'veda';\n\nimport { useMdxPageLoader } from '$utils/veda-data';\nimport { S_SUCCEEDED } from '$utils/status';\n\nconst MdxContent = lazy(() => import('./mdx-content'));\n\ninterface ComponentOverrideProps {\n  [key: string]: any;\n  with: PageOverrides;\n  children: ReactNode;\n}\n\nexport function ComponentOverride(props: ComponentOverrideProps) {\n  const { with: _with, children, ...rest } = props;\n  const loader = getOverride(_with)?.content;\n  const pageMdx = useMdxPageLoader(loader);\n\n  if (!loader) {\n    return <>{children}</>;\n  }\n\n  if (pageMdx.status === S_SUCCEEDED) {\n    return (\n      <MDXProvider>\n        <pageMdx.MdxContent {...rest} />\n      </MDXProvider>\n    );\n  }\n\n  return <>{false}</>;\n}\n\nexport function ContentOverride(props: ComponentOverrideProps) {\n  const { with: _with, children, ...rest } = props;\n  const loader = getOverride(_with)?.content;\n\n  return loader ? (\n    <MdxContent loader={loader} throughProps={rest} />\n  ) : (\n    <>{children}</>\n  );\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { getLinkProps } from '$utils/url';\n\ninterface SmartLinkProps {\n  to: string;\n}\n\n/**\n * Switches between a `a` and a `Link` depending on the url.\n */\nexport default function SmartLink(props: SmartLinkProps) {\n  const { to, ...rest } = props;\n  const isExternalLink = /^https?:\\/\\//.test(to);\n  const linkProps = getLinkProps(to);\n  return isExternalLink ? (\n      <a {...linkProps} {...rest} />\n  ) : (\n    <Link {...linkProps} {...rest} />\n  );\n}\n\n\ninterface CustomLinkProps {\n  href: string;\n}\n\n/**\n * For links defined as markdown, this component will open the external link in a new tab.\n */\nexport function CustomLink(props: CustomLinkProps) {\n  const { href, ...rest } = props;\n  const isExternalLink = /^https?:\\/\\//.test(href);\n  const linkProps = getLinkProps(href);\n  return isExternalLink ? (\n      <a {...linkProps} {...rest} />\n  ) : (\n    <Link {...linkProps} {...rest} />\n  );\n}\n","import React, { MouseEventHandler } from 'react';\nimport { getBoolean } from 'veda';\nimport { LinkProps } from 'react-router-dom';\n\n\nexport const getLinkProps = (\n    linkTo: string,\n    as?: React.ForwardRefExoticComponent<LinkProps & React.RefAttributes<HTMLAnchorElement>>,\n    onClick?: (() => void) | MouseEventHandler\n  ) => {\n    const externalLinksInNewTab = getBoolean('externalLinksInNewTab');\n    const isExternalLink = /^https?:\\/\\//.test(linkTo);\n    return isExternalLink\n    ? {\n        href: linkTo,\n        to: linkTo,\n        ...(externalLinksInNewTab\n          ? {target: '_blank', rel: 'noopener noreferrer'}\n          : {}),\n        ...(onClick ? {onClick: onClick} : {})\n      }\n    : {\n        ...(as ? {as: as} : {}),\n        to: linkTo,\n        ...(onClick ? {onClick: onClick} : {})\n      };\n  };","import { useEffect } from 'react';\nimport TagManager from 'react-gtm-module';\n\nconst gtMCode = process.env.GOOGLE_TAG_MANAGER_ID;\nconst gtmAuth = process.env.GOOGLE_TAG_AUTH;\nconst gtmPreviewEnv = process.env.GOOGLE_TAG_PREVIEW;\n\n// This variables should be saved in env.local or CI\nconst tagManagerArgs = {\n  gtmId: gtMCode,\n  auth: gtmAuth,\n  preview: gtmPreviewEnv,\n  cookies_win:'x'\n};\n\nexport function useGoogleTagManager() {\n\n  useEffect(() => {\n    if (gtMCode) {\n      TagManager.initialize(tagManagerArgs);\n    }\n  }, []);\n}","import { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router';\nimport { useEffectPrevious } from './use-effect-previous';\n\nexport const HEADER_ID = 'page-header';\nexport const HEADER_WRAPPER_ID = 'header-wrapper';\nexport const HEADER_TRANSITION_DURATION = 320;\n\nexport function useSlidingStickyHeader() {\n  const [isHidden, setHidden] = useState(false);\n  const [headerHeight, setHeaderHeight] = useState(0);\n  const [wrapperHeight, setWrapperHeight] = useState(0);\n\n  const { pathname } = useLocation();\n  \n  const navWrapperElement = document.querySelector<HTMLElement>(\n    `#${HEADER_WRAPPER_ID}`\n  );\n\n  useEffectPrevious(\n    ([pathnamePrev]) => {\n      const pageChanged = pathnamePrev !== pathname;\n      if (pageChanged) {\n        setHidden(false);\n        setHeaderHeight(0);\n        setWrapperHeight(0);\n      }\n    },\n    [pathname]\n  );\n  \n  useEffect(() => {\n    let ticking = false;\n    let prevY = window.scrollY;\n    let scrollUpDelta = 0;\n\n    // navWrapperElement should be mounted before the hook\n    if (!navWrapperElement) return;\n\n    // When the element mounts the <Suspense> element is still in the DOM and\n    // the page has display: none. The result is that any measurement of the\n    // header would be 0. By using an IntersectionObserver we are able to get\n    // the correct height once the element becomes visible.\n    const observer = new IntersectionObserver(([e]) => {\n      if (e.isIntersecting) {\n        observer.unobserve(navWrapperElement);\n\n        // Initial height.\n        // Get the height of the header and he wrapper. Both are needed because in\n        // some pages the wrapper contains the local nav as well.\n        const headerHeightQueried =\n          document.querySelector<HTMLElement>(`#${HEADER_ID}`)?.offsetHeight ||\n          0;\n\n        setHeaderHeight(headerHeightQueried);\n        setWrapperHeight(navWrapperElement.offsetHeight);\n        // The header is hidden if the page is loaded and the user is scrolled\n        // mid-way.\n        setHidden(window.scrollY > headerHeightQueried);\n      }\n    });\n    observer.observe(navWrapperElement);\n\n    function tick(currY) {\n      const wrapperEl = document.querySelector<HTMLElement>(\n        `#${HEADER_WRAPPER_ID}`\n      );\n\n      if (!wrapperEl)\n        throw new Error(\n          `Header element with ID ${HEADER_WRAPPER_ID} not found.`\n        );\n\n      setWrapperHeight(wrapperEl.offsetHeight);\n\n      const el = document.querySelector<HTMLElement>(`#${HEADER_ID}`);\n      const headerHeightQueried = el?.offsetHeight ?? 0;\n      setHeaderHeight(headerHeightQueried);\n\n      // When the document is scrolled quickly to the bottom of the page, the\n      // shrinking header causes the scroll event to be fired again, and since\n      // the page is shrinking, the scrollY is decreasing leading to the page\n      // header being shown as it is being considered a scroll up.\n      // By checking if we are at the bottom, we can prevent this.\n      const atTheBottom =\n        window.innerHeight + Math.ceil(window.pageYOffset) >=\n        document.body.offsetHeight;\n\n      if (currY <= headerHeightQueried) {\n        // When the header gets hidden the css transitions the element out of\n        // the viewport by applying a negative translate. (See NavWrapper). If\n        // the user scrolls to the top of the page quickly and the header\n        // still has to animate to be shown it looks like a glitch because a\n        // white area will be seen. In this situation we remove the\n        // translation so that it looks like the header is already there.\n        // Additionally this has to be done by accessing the DOM node directly\n        // instead of using a state because the styled component does not\n        // update fast enough.\n        wrapperEl.style.transition = 'none';\n        // Visible if within its height.\n        setHidden(false);\n        scrollUpDelta = 0;\n      } else if (currY < prevY && !atTheBottom) {\n        // Scrolling up.\n        scrollUpDelta += prevY - currY;\n        // When scrolling up we want some travel before showing the header\n        // again.\n        if (scrollUpDelta > 64) {\n          wrapperEl.style.transition = '';\n          setHidden(false);\n        }\n      } else if (currY > prevY) {\n        wrapperEl.style.transition = '';\n        // Scrolling down.\n        setHidden(true);\n        scrollUpDelta = 0;\n      }\n\n      prevY = currY;\n    }\n\n    function onViewportPositionChange() {\n      if (!ticking) {\n        // instead of setting a specific number of ms to wait (throttling),\n        // pass it to the browser to be processed on the next frame, whenever that may be.\n        window.requestAnimationFrame(() => {\n          tick(window.scrollY);\n          ticking = false;\n        });\n        ticking = true;\n      }\n    }\n\n    window.addEventListener('scroll', onViewportPositionChange);\n    window.addEventListener('resize', onViewportPositionChange);\n\n    return () => {\n      window.removeEventListener('scroll', onViewportPositionChange);\n      window.removeEventListener('resize', onViewportPositionChange);\n    };\n  }, [navWrapperElement]);\n\n  return { isHeaderHidden: isHidden, headerHeight, wrapperHeight };\n}\n","import { DependencyList, useEffect, useLayoutEffect, useRef } from 'react';\n\ntype EffectPreviousCb<T> = (\n  previous: T,\n  mounted: boolean\n) => void | (() => void);\n\nfunction makePreviousHook(effectHook) {\n  return <T extends DependencyList>(\n    cb: EffectPreviousCb<T | undefined[]>,\n    deps: T\n  ) => {\n    const prev = useRef<DependencyList | undefined[]>([]);\n    const mounted = useRef(false);\n    const unchangingCb = useRef<EffectPreviousCb<T | undefined[]>>(cb);\n    unchangingCb.current = cb;\n\n    effectHook(() => {\n      const r = unchangingCb.current(prev.current as T, mounted.current);\n      prev.current = deps;\n      if (!mounted.current) mounted.current = true;\n      return r;\n      /* eslint-disable-next-line react-hooks/exhaustive-deps */\n    }, deps);\n  };\n}\n\n/**\n * Same behavior as React's useEffect but called with the values for the\n * previous dependencies and with a flag tracking whether or not the component\n * is mounted\n * @param {func} cb Hook callback\n * @param {array} deps Hook dependencies.\n */\nexport const useEffectPrevious = makePreviousHook(useEffect);\n\n/**\n * Same behavior as React's useLayoutEffect but called with the values for the\n * previous dependencies and with a flag tracking whether or not the component\n * is mounted\n * @param {func} cb Hook callback\n * @param {array} deps Hook dependencies.\n */\nexport const useLayoutEffectPrevious = makePreviousHook(useLayoutEffect);\n\n/**\n * Hook to store the previous value of a variable.\n *\n * @param value The value to store\n * @param isEqualFunc Fuction to compare the previous value with the current\n * value.\n * @returns The previous value\n */\nexport const usePreviousValue = <T>(\n  value: T,\n  isEqualFunc = (a: T | undefined, b: T) => a === b\n): T | undefined => {\n  const ref = useRef<T | undefined>(undefined);\n\n  const current = ref.current;\n\n  if (!isEqualFunc(current, value)) {\n    ref.current = value;\n  }\n\n  return current;\n};\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { themeVal } from '@devseed-ui/theme-provider';\n\nimport PageHeader from './page-header';\nimport { useSlidingStickyHeaderProps } from './layout-root';\n\nimport {\n  HEADER_WRAPPER_ID,\n  HEADER_TRANSITION_DURATION\n} from '$utils/use-sliding-sticky-header';\n\nconst NavWrapper = styled.div`\n  position: sticky;\n  top: 0;\n  width: 100%;\n  z-index: ${themeVal('zIndices.sticky')};\n\n  transition: top ${HEADER_TRANSITION_DURATION}ms ease-out;\n  ${({ shouldSlideHeader, headerHeight }) =>\n    // Hide the header by translating the nav by the header's height. The\n    // translate is in the NavWrapper and not the header because in this way the\n    // localNav (also inside the NavWrapper) will stick to the top.\n    shouldSlideHeader &&\n    css`\n      top: -${headerHeight}px;\n    `}\n`;\n\nfunction PageNavWrapper() {\n  const { isHeaderHidden, headerHeight } = useSlidingStickyHeaderProps();\n\n  return (\n    <NavWrapper\n      id={HEADER_WRAPPER_ID}\n      shouldSlideHeader={isHeaderHidden}\n      headerHeight={headerHeight}\n    >\n      <PageHeader />\n    </NavWrapper>\n  );\n}\n\nexport default PageNavWrapper;\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport { Link, NavLink } from 'react-router-dom';\nimport { userPages, getOverride, getString } from 'veda';\nimport {\n  glsp,\n  listReset,\n  media,\n  rgba,\n  themeVal,\n  visuallyHidden\n} from '@devseed-ui/theme-provider';\nimport { reveal } from '@devseed-ui/animation';\nimport { Heading, Overline } from '@devseed-ui/typography';\nimport { Button } from '@devseed-ui/button';\nimport {\n  CollecticonEllipsisVertical,\n  CollecticonHamburgerMenu\n} from '@devseed-ui/collecticons';\nimport { DropMenu, DropMenuItem } from '@devseed-ui/dropdown';\n\nimport DropdownScrollable from './dropdown-scrollable';\nimport NasaLogo from './nasa-logo';\nimport GoogleForm from './google-form';\nimport { Tip } from './tip';\nimport UnscrollableBody from './unscrollable-body';\n\nimport { checkEnvFlag } from '$utils/utils';\nimport { variableGlsp } from '$styles/variable-utils';\nimport {\n  STORIES_PATH,\n  DATASETS_PATH,\n  ANALYSIS_PATH,\n  ABOUT_PATH,\n  EXPLORATION_PATH\n} from '$utils/routes';\nimport { PAGE_BODY_ID } from '$components/common/layout-root';\nimport GlobalMenuLinkCSS from '$styles/menu-link';\nimport { useMediaQuery } from '$utils/use-media-query';\nimport { HEADER_ID } from '$utils/use-sliding-sticky-header';\nimport { ComponentOverride } from '$components/common/page-overrides';\n\nconst rgbaFixed = rgba as any;\n\nconst appTitle = process.env.APP_TITLE;\nconst appVersion = process.env.APP_VERSION;\n\nconst PageHeaderSelf = styled.header`\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: space-between;\n  gap: ${variableGlsp()};\n  padding: ${variableGlsp(0.75, 1)};\n  background: ${themeVal('color.primary')};\n  animation: ${reveal} 0.32s ease 0s 1;\n\n  &,\n  &:visited {\n    color: ${themeVal('color.surface')};\n  }\n`;\n\nconst Brand = styled.div`\n  display: flex;\n  flex-shrink: 0;\n\n  a {\n    display: grid;\n    align-items: center;\n    gap: ${glsp(0, 0.5)};\n\n    &,\n    &:visited {\n      color: inherit;\n      text-decoration: none;\n    }\n\n    #nasa-logo-neg-mono {\n      opacity: 1;\n      transition: all 0.32s ease 0s;\n    }\n\n    #nasa-logo-pos {\n      opacity: 0;\n      transform: translate(0, -100%);\n      transition: all 0.32s ease 0s;\n    }\n\n    &:hover {\n      opacity: 1;\n\n      #nasa-logo-neg-mono {\n        opacity: 0;\n      }\n\n      #nasa-logo-pos {\n        opacity: 1;\n      }\n    }\n\n    svg {\n      grid-row: 1 / span 2;\n      height: 2.5rem;\n      width: auto;\n\n      ${media.largeUp`\n        transform: scale(1.125);\n      `}\n    }\n\n    span:first-of-type {\n      font-size: 0.875rem;\n      line-height: 1rem;\n      font-weight: ${themeVal('type.base.extrabold')};\n      text-transform: uppercase;\n    }\n\n    span:last-of-type {\n      grid-row: 2;\n      font-size: 1.25rem;\n      line-height: 1.5rem;\n      font-weight: ${themeVal('type.base.regular')};\n      letter-spacing: -0.025em;\n    }\n  }\n`;\n\nconst PageTitleSecLink = styled(Link)`\n  align-self: end;\n  font-size: 0.75rem;\n  font-weight: ${themeVal('type.base.bold')};\n  line-height: 1rem;\n  text-transform: uppercase;\n  background: ${themeVal('color.surface')};\n  padding: ${glsp(0, 0.25)};\n  border-radius: ${themeVal('shape.rounded')};\n  margin: ${glsp(0.125, 0.5)};\n\n  &&,\n  &&:visited {\n    color: ${themeVal('color.primary')};\n  }\n\n  ${media.largeUp`\n    margin: ${glsp(0, 0.5)};\n    font-size: 0.875rem;\n    line-height: 1.25rem;\n    padding: 0 ${glsp(0.5)};\n  `}\n`;\n\nconst GlobalNav = styled.nav<{ revealed: boolean }>`\n  position: fixed;\n  inset: 0 0 0 auto;\n  z-index: 900;\n  display: flex;\n  flex-flow: column nowrap;\n  width: 20rem;\n  margin-right: -20rem;\n  transition: margin 0.24s ease 0s;\n\n  ${({ revealed }) =>\n    revealed &&\n    css`\n      & {\n        margin-right: 0;\n      }\n    `}\n\n  ${media.largeUp`\n    position: static;\n    flex: 1;\n    margin: 0;\n  }\n\n    &:before {\n      content: '';\n    }\n  `}\n\n  /* Show page nav backdrop on small screens */\n\n  &::after {\n    content: '';\n    position: absolute;\n    inset: 0 0 0 auto;\n    z-index: -1;\n    background: transparent;\n    width: 0;\n    transition: background 0.64s ease 0s;\n\n    ${({ revealed }) =>\n      revealed &&\n      css`\n        ${media.mediumDown`\n          background: ${themeVal('color.base-400a')};\n          width: 200vw;\n        `}\n      `}\n  }\n`;\n\nconst GlobalNavInner = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  background-color: ${themeVal('color.primary')};\n\n  ${media.mediumDown`\n    box-shadow: ${themeVal('boxShadow.elevationD')};\n  `}\n`;\n\nconst GlobalNavHeader = styled.div`\n  padding: ${variableGlsp(1)};\n  box-shadow: inset 0 -1px 0 0 ${themeVal('color.surface-200a')};\n  ${media.largeUp`\n    display: none;\n  `}\n`;\n\nconst GlobalNavTitle = styled(Heading).attrs({\n  as: 'span',\n  size: 'small'\n})`\n  /* styled-component */\n`;\n\nexport const GlobalNavActions = styled.div`\n  align-self: start;\n  ${media.largeUp`\n    display: none;\n  `}\n`;\n\nexport const GlobalNavToggle = styled(Button)`\n  z-index: 2000;\n`;\n\nconst GlobalNavBody = styled.div`\n  display: flex;\n  flex: 1;\n\n  .shadow-top {\n    background: linear-gradient(\n      to top,\n      ${themeVal('color.primary-600')}00 0%,\n      ${themeVal('color.primary-600')} 100%\n    );\n  }\n\n  .shadow-bottom {\n    background: linear-gradient(\n      to bottom,\n      ${themeVal('color.primary-600')}00 0%,\n      ${themeVal('color.primary-600')} 100%\n    );\n  }\n`;\n\nconst GlobalNavBodyInner = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  gap: ${variableGlsp()};\n  padding: ${variableGlsp(1, 0)};\n\n  ${media.largeUp`\n    flex-direction: row;\n    justify-content: space-between;\n    padding: 0;\n  `}\n`;\n\nconst NavBlock = styled.div`\n  display: flex;\n  flex-flow: column nowrap;\n  gap: ${glsp(0.25)};\n\n  ${media.largeUp`\n    flex-direction: row;\n    align-items: center;\n    gap: ${glsp(1.5)};\n  `}\n`;\n\nconst SROnly = styled.a`\n  height: 1px;\n  left: -10000px;\n  overflow: hidden;\n  position: absolute;\n  top: auto;\n  width: 1px;\n  color: ${themeVal('color.link')};\n  &:focus {\n    top: 0;\n    left: 0;\n    background-color: ${themeVal('color.surface')};\n    padding: ${glsp(0.25)};\n    height: auto;\n    width: auto;\n  }\n`;\n\nconst SectionsNavBlock = styled(NavBlock)`\n  /* styled-component */\n`;\n\nconst GlobalNavBlockTitle = styled(Overline).attrs({\n  as: 'span'\n})`\n  ${visuallyHidden}\n  display: block;\n  padding: ${variableGlsp(1, 1, 0.25, 1)};\n  color: currentColor;\n  opacity: 0.64;\n\n  ${media.largeUp`\n    padding: 0;\n  `}\n`;\n\nconst GlobalMenu = styled.ul`\n  ${listReset()}\n  display: flex;\n  flex-flow: column nowrap;\n  gap: ${glsp(0.5)};\n\n  ${media.largeUp`\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n    gap: ${glsp(1.5)};\n  `}\n`;\n\nconst GlobalMenuLink = styled(NavLink)`\n  ${GlobalMenuLinkCSS}\n`;\n\nconst DropMenuNavItem = styled(DropMenuItem)`\n  &.active {\n    background-color: ${rgbaFixed(themeVal('color.link'), 0.08)};\n  }\n`;\n\nfunction PageHeader() {\n  const { isMediumDown } = useMediaQuery();\n\n  const [globalNavRevealed, setGlobalNavRevealed] = useState(false);\n\n  const globalNavBodyRef = useRef<HTMLDivElement>(null);\n  // Click listener for the whole global nav body so we can close it when clicking\n  // the overlay on medium down media query.\n  const onGlobalNavClick = useCallback((e) => {\n    if (!globalNavBodyRef.current?.contains(e.target)) {\n      setGlobalNavRevealed(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    // Close global nav when media query changes.\n    // NOTE: isMediumDown is returning document.body's width, not the whole window width\n    // which conflicts with how mediaquery decides the width.\n    // JSX element susing isMediumDown is also protected with css logic because of this.\n    // ex. Look at GlobalNavActions\n    if (!isMediumDown) setGlobalNavRevealed(false);\n  }, [isMediumDown]);\n\n  const closeNavOnClick = useCallback(() => {\n    setGlobalNavRevealed(false);\n  }, []);\n\n  const userPagesMainNavItem = userPages.map((id) => {\n    const page = getOverride(id as any);\n    if (!(page?.data.mainNavItem && page.data.mainNavItem.navTitle)) return false;\n\n    return (\n      <li key={id}>\n        <GlobalMenuLink to={id} onClick={closeNavOnClick}>\n          {page.data.mainNavItem.navTitle }\n        </GlobalMenuLink>\n      </li>\n    );\n  });\n\n  function skipNav(e) {\n    // a tag won't appear for keyboard focus without href\n    // so we are preventing the default behaviour of a link here\n    e.preventDefault();\n    // Then find a next focusable element in pagebody,focus it.\n    const pageBody = document.getElementById(PAGE_BODY_ID);\n    if (pageBody) {\n        pageBody.focus();\n    }\n  }\n\n  return (\n    <>\n    <SROnly href='#' onClick={skipNav}>Skip to main content</SROnly>\n    <PageHeaderSelf id={HEADER_ID}>\n      \n      {globalNavRevealed && isMediumDown && <UnscrollableBody />}\n      <ComponentOverride with='headerBrand'>\n        <Brand>\n          <Link to='/'>\n            <NasaLogo />\n            <span>Earthdata</span> <span>{appTitle}</span>\n          </Link>\n          <Tip content={`v${appVersion}`}>\n            <PageTitleSecLink to='/development'>Beta</PageTitleSecLink>\n          </Tip>\n        </Brand>\n      </ComponentOverride>\n      {isMediumDown && (\n        <GlobalNavActions>\n          <GlobalNavToggle\n            aria-label={\n              globalNavRevealed\n                ? 'Close Global Navigation'\n                : 'Open Global Navigation'\n            }\n            // @ts-expect-error UI lib error. achromic-text does exit\n            variation='achromic-text'\n            fitting='skinny'\n            onClick={() => setGlobalNavRevealed((v) => !v)}\n            active={globalNavRevealed}\n          >\n            <CollecticonHamburgerMenu />\n          </GlobalNavToggle>\n        </GlobalNavActions>\n      )}\n      <GlobalNav\n        aria-label='Global Navigation'\n        role='navigation'\n        revealed={globalNavRevealed}\n        onClick={onGlobalNavClick}\n      >\n        <GlobalNavInner ref={globalNavBodyRef}>\n          {isMediumDown && (\n            <>\n              <GlobalNavHeader>\n                <GlobalNavTitle aria-hidden='true'>Browse</GlobalNavTitle>\n              </GlobalNavHeader>\n            </>\n          )}\n          <GlobalNavBody as={isMediumDown ? undefined : 'div'}>\n            <GlobalNavBodyInner>\n              <SectionsNavBlock>\n                <GlobalNavBlockTitle>Global</GlobalNavBlockTitle>\n                <GlobalMenu>\n                  <li>\n                    <GlobalMenuLink\n                      to={DATASETS_PATH}\n                      onClick={closeNavOnClick}\n                    >\n                      Data Catalog\n                    </GlobalMenuLink>\n                  </li>\n                  <li>\n                    {checkEnvFlag(process.env.FEATURE_NEW_EXPLORATION) ? (\n                      <GlobalMenuLink\n                        to={EXPLORATION_PATH}\n                        onClick={closeNavOnClick}\n                      >\n                        Exploration\n                      </GlobalMenuLink>\n                    ) : (\n                      <GlobalMenuLink\n                        to={ANALYSIS_PATH}\n                        onClick={closeNavOnClick}\n                      >\n                        Data Analysis\n                      </GlobalMenuLink>\n                    )}\n                  </li>\n                  <li>\n                    <GlobalMenuLink to={STORIES_PATH} onClick={closeNavOnClick}>\n                      {getString('stories').other}\n                    </GlobalMenuLink>\n                  </li>\n\n                  {/*\n                    Temporarily add hub link through env variables.\n                    This does not scale for the different instances, but it's a\n                    quick fix for the GHG app.\n                  */}\n                  {!!process.env.HUB_URL && !!process.env.HUB_NAME && (\n                    <li>\n                      <GlobalMenuLink\n                        as='a'\n                        target='_blank'\n                        rel='noopener'\n                        href={process.env.HUB_URL}\n                        onClick={closeNavOnClick}\n                      >\n                        {process.env.HUB_NAME}\n                      </GlobalMenuLink>\n                    </li>\n                  )}\n                </GlobalMenu>\n              </SectionsNavBlock>\n              <SectionsNavBlock>\n                <GlobalNavBlockTitle>Meta</GlobalNavBlockTitle>\n                <GlobalMenu>\n                  {userPagesMainNavItem}\n                  <li>\n                    <GlobalMenuLink to={ABOUT_PATH} onClick={closeNavOnClick}>\n                      About\n                    </GlobalMenuLink>\n                  </li>\n                  {!!process.env.GOOGLE_FORM && (\n                    <li>\n                      <GoogleForm />\n                    </li>\n                  )}\n\n                  <UserPagesDotMenu\n                    onItemClick={closeNavOnClick}\n                    isMediumDown={isMediumDown}\n                  />\n                </GlobalMenu>\n              </SectionsNavBlock>\n            </GlobalNavBodyInner>\n          </GlobalNavBody>\n        </GlobalNavInner>\n      </GlobalNav>\n    </PageHeaderSelf>\n    </>\n  );\n}\n\nexport default PageHeader;\n\ninterface DotMenuItem {\n  id: any;\n  menu: string;\n}\n\nfunction UserPagesDotMenu(props: {\n  isMediumDown: boolean;\n  onItemClick: () => void;\n}) {\n  const { isMediumDown, onItemClick } = props;\n\n  const dotMenuItems = userPages.reduce((menuItems: DotMenuItem[], id: any) => {\n    const page = getOverride(id as any);\n    if (page?.data.menu)\n      // eslint-disable-next-line fp/no-mutating-methods\n      return menuItems.concat({\n        id,\n        menu: page.data.menu\n      });\n    return menuItems;\n  }, []);\n\n  if (!dotMenuItems.length) return <>{false}</>;\n\n  if (isMediumDown) {\n    return (\n      <>\n        {dotMenuItems.map((menuItem) => {\n          const page = getOverride(menuItem.id as any);\n          if (!page?.data.menu) return false;\n\n          return (\n            <li key={menuItem.id}>\n              <GlobalMenuLink to={menuItem.id} onClick={onItemClick}>\n                {menuItem.menu}\n              </GlobalMenuLink>\n            </li>\n          );\n        })}\n      </>\n    );\n  }\n\n  return (\n    <DropdownScrollable\n      alignment='right'\n      triggerElement={(props) => (\n        // @ts-expect-error UI lib error. achromic-text does exit\n        <Button {...props} variation='achromic-text' fitting='skinny'>\n          <CollecticonEllipsisVertical meaningful title='View pages menu' />\n        </Button>\n      )}\n    >\n      <DropMenu>\n        {userPages.map((id) => {\n          const page = getOverride(id as any);\n          if (!page?.data.menu) return false;\n\n          return (\n            <li key={id}>\n              <DropMenuNavItem as={NavLink} to={id} data-dropdown='click.close'>\n                {page.data.menu}\n              </DropMenuNavItem>\n            </li>\n          );\n        })}\n      </DropMenu>\n    </DropdownScrollable>\n  );\n}\n","import React, { forwardRef } from 'react';\nimport styled from 'styled-components';\nimport { glsp } from '@devseed-ui/theme-provider';\nimport {\n  Dropdown,\n  DropdownProps,\n  DropdownRef,\n  DropMenu,\n  DropTitle\n} from '@devseed-ui/dropdown';\n\n/**\n * Override Dropdown styles to play well with the shadow scrollbar.\n */\nconst DropdownWithScroll = styled(Dropdown)`\n  padding: 0;\n  overflow: hidden;\n  max-height: 320px;\n  overscroll-behavior: none;\n  overflow-y: scroll;\n\n  ${DropTitle} {\n    margin: 0;\n    padding: ${glsp(1, 1, 0, 1)};\n  }\n\n  ${DropMenu} {\n    margin: 0;\n  }\n`;\n\nexport default forwardRef<DropdownRef, DropdownProps>(\n  function DropdownScrollable(props, ref) {\n    const { children, ...rest } = props;\n    return (\n      <DropdownWithScroll ref={ref} {...rest}>\n        {children}  \n      </DropdownWithScroll>\n    );\n  }\n);\n","import React from 'react';\n\nexport default function NasaLogo() {\n  return (\n    <svg\n      width={312}\n      height={258}\n      viewBox='0 0 312 258'\n      style={{\n        fillRule: 'evenodd',\n        clipRule: 'evenodd',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: 2\n      }}\n    >\n      <title>NASA</title>\n      <g id='nasa-logo-pos'>\n        <path\n          d='M273.427,387C273.427,457.761 215.188,516 144.427,516C73.665,516 15.427,457.761 15.427,387C15.427,316.239 73.665,258 144.427,258C215.188,258 273.427,316.239 273.427,387Z'\n          style={{ fill: 'rgb(0,102,179)', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M146.205,269.721C146.205,270.297 145.731,270.771 145.154,270.771C144.578,270.771 144.104,270.297 144.104,269.721C144.104,269.145 144.578,268.67 145.154,268.67C145.731,268.67 146.205,269.145 146.205,269.721Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M153.48,285.643C153.48,286.353 152.896,286.936 152.187,286.936C151.477,286.936 150.893,286.353 150.893,285.643C150.893,284.934 151.477,284.35 152.187,284.35C152.896,284.35 153.48,284.934 153.48,285.643Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M172.393,311.67C172.393,312.379 171.81,312.963 171.1,312.963C170.39,312.963 169.807,312.379 169.807,311.67C169.807,310.959 170.39,310.376 171.1,310.376C171.81,310.376 172.393,310.959 172.393,311.67Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M142.002,294.615C142.002,295.191 141.528,295.666 140.951,295.666C140.375,295.666 139.901,295.191 139.901,294.615C139.901,294.039 140.375,293.564 140.951,293.564C141.528,293.564 142.002,294.039 142.002,294.615Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M153.318,300.596C153.318,301.172 152.843,301.647 152.267,301.647C151.691,301.647 151.217,301.172 151.217,300.596C151.217,300.02 151.691,299.545 152.267,299.545C152.843,299.545 153.318,300.02 153.318,300.596Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M138.607,283.865C138.607,284.574 138.023,285.158 137.314,285.158C136.604,285.158 136.021,284.574 136.021,283.865C136.021,283.156 136.604,282.572 137.314,282.572C138.023,282.572 138.607,283.156 138.607,283.865Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M121.472,294.292C121.472,294.869 120.998,295.343 120.422,295.343C119.845,295.343 119.371,294.869 119.371,294.292C119.371,293.716 119.845,293.241 120.422,293.241C120.998,293.241 121.472,293.716 121.472,294.292Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M124.544,296.394C124.544,296.97 124.069,297.444 123.493,297.444C122.917,297.444 122.442,296.97 122.442,296.394C122.442,295.817 122.917,295.343 123.493,295.343C124.069,295.343 124.544,295.817 124.544,296.394Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M127.615,298.495C127.615,299.071 127.14,299.545 126.564,299.545C125.987,299.545 125.513,299.071 125.513,298.495C125.513,297.918 125.987,297.444 126.564,297.444C127.14,297.444 127.615,297.918 127.615,298.495Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M122.927,302.536C122.927,303.112 122.453,303.587 121.877,303.587C121.3,303.587 120.826,303.112 120.826,302.536C120.826,301.959 121.3,301.485 121.877,301.485C122.453,301.485 122.927,301.959 122.927,302.536Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M98.517,319.671C98.517,320.248 98.043,320.722 97.466,320.722C96.89,320.722 96.415,320.248 96.415,319.671C96.415,319.095 96.89,318.621 97.466,318.621C98.043,318.621 98.517,319.095 98.517,319.671Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M103.044,325.168C103.044,325.744 102.569,326.218 101.993,326.218C101.417,326.218 100.942,325.744 100.942,325.168C100.942,324.591 101.417,324.117 101.993,324.117C102.569,324.117 103.044,324.591 103.044,325.168Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M99.487,413.915C99.487,414.491 99.012,414.966 98.436,414.966C97.86,414.966 97.385,414.491 97.385,413.915C97.385,413.339 97.86,412.864 98.436,412.864C99.012,412.864 99.487,413.339 99.487,413.915Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M100.134,438.404C100.134,439.115 99.549,439.699 98.84,439.699C98.131,439.699 97.547,439.115 97.547,438.404C97.547,437.696 98.131,437.113 98.84,437.113C99.549,437.113 100.134,437.696 100.134,438.404Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M86.231,450.935C86.231,451.511 85.756,451.986 85.18,451.986C84.604,451.986 84.13,451.511 84.13,450.935C84.13,450.357 84.604,449.884 85.18,449.884C85.756,449.884 86.231,450.357 86.231,450.935Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M69.58,456.027C69.58,456.736 68.996,457.32 68.287,457.32C67.578,457.32 66.994,456.736 66.994,456.027C66.994,455.316 67.578,454.732 68.287,454.732C68.996,454.732 69.58,455.316 69.58,456.027Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M66.186,444.71C66.186,445.419 65.602,446.003 64.893,446.003C64.183,446.003 63.599,445.419 63.599,444.71C63.599,444.001 64.183,443.417 64.893,443.417C65.602,443.417 66.186,444.001 66.186,444.71Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M64.246,451.904C64.246,452.48 63.772,452.954 63.195,452.954C62.619,452.954 62.145,452.48 62.145,451.904C62.145,451.327 62.619,450.853 63.195,450.853C63.772,450.853 64.246,451.327 64.246,451.904Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M51.798,445.923C51.798,446.499 51.324,446.974 50.747,446.974C50.171,446.974 49.697,446.499 49.697,445.923C49.697,445.347 50.171,444.872 50.747,444.872C51.324,444.872 51.798,445.347 51.798,445.923Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M95.283,466.129C95.283,466.705 94.809,467.18 94.233,467.18C93.656,467.18 93.182,466.705 93.182,466.129C93.182,465.553 93.656,465.078 94.233,465.078C94.809,465.078 95.283,465.553 95.283,466.129Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M108.378,456.511C108.378,457.22 107.794,457.804 107.085,457.804C106.376,457.804 105.792,457.22 105.792,456.511C105.792,455.802 106.376,455.218 107.085,455.218C107.794,455.218 108.378,455.802 108.378,456.511Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M109.833,468.877C109.833,469.453 109.359,469.928 108.782,469.928C108.206,469.928 107.731,469.453 107.731,468.877C107.731,468.301 108.206,467.828 108.782,467.828C109.359,467.828 109.833,468.301 109.833,468.877Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M163.664,457.077C163.664,457.654 163.19,458.128 162.613,458.128C162.037,458.128 161.563,457.654 161.563,457.077C161.563,456.499 162.037,456.027 162.613,456.027C163.19,456.027 163.664,456.499 163.664,457.077Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M138.607,465.967C138.607,466.545 138.132,467.018 137.556,467.018C136.98,467.018 136.506,466.545 136.506,465.967C136.506,465.391 136.98,464.918 137.556,464.918C138.132,464.918 138.607,465.391 138.607,465.967Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M206.017,478.739C206.017,479.315 205.543,479.789 204.966,479.789C204.39,479.789 203.915,479.315 203.915,478.739C203.915,478.162 204.39,477.688 204.966,477.688C205.543,477.688 206.017,478.162 206.017,478.739Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M211.513,429.029C211.513,429.738 210.929,430.322 210.22,430.322C209.511,430.322 208.927,429.738 208.927,429.029C208.927,428.321 209.511,427.737 210.22,427.737C210.929,427.737 211.513,428.321 211.513,429.029Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M201.167,436.061C201.167,436.639 200.693,437.113 200.116,437.113C199.54,437.113 199.066,436.639 199.066,436.061C199.066,435.487 199.54,435.012 200.116,435.012C200.693,435.012 201.167,435.487 201.167,436.061Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M211.352,438.082C211.352,438.791 210.768,439.375 210.059,439.375C209.35,439.375 208.766,438.791 208.766,438.082C208.766,437.373 209.35,436.789 210.059,436.789C210.768,436.789 211.352,437.373 211.352,438.082Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M201.167,450.611C201.167,451.187 200.693,451.661 200.116,451.661C199.54,451.661 199.066,451.187 199.066,450.611C199.066,450.034 199.54,449.56 200.116,449.56C200.693,449.56 201.167,450.034 201.167,450.611Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M227.517,421.998C227.517,422.574 227.043,423.049 226.467,423.049C225.889,423.049 225.414,422.574 225.414,421.998C225.414,421.422 225.889,420.947 226.467,420.947C227.043,420.947 227.517,421.422 227.517,421.998Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M230.104,428.383C230.104,429.094 229.52,429.676 228.811,429.676C228.101,429.676 227.517,429.094 227.517,428.383C227.517,427.674 228.101,427.09 228.811,427.09C229.52,427.09 230.104,427.674 230.104,428.383Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M248.209,435.981C248.209,436.69 247.625,437.274 246.915,437.274C246.205,437.274 245.621,436.69 245.621,435.981C245.621,435.272 246.205,434.688 246.915,434.688C247.625,434.688 248.209,435.272 248.209,435.981Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M229.781,449.48C229.781,450.056 229.306,450.53 228.73,450.53C228.154,450.53 227.679,450.056 227.679,449.48C227.679,448.904 228.154,448.429 228.73,448.429C229.306,448.429 229.781,448.904 229.781,449.48Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M241.419,438.487C241.419,439.063 240.945,439.537 240.368,439.537C239.792,439.537 239.318,439.063 239.318,438.487C239.318,437.91 239.792,437.436 240.368,437.436C240.945,437.436 241.419,437.91 241.419,438.487Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M239.318,455.46C239.318,456.036 238.843,456.511 238.267,456.511C237.691,456.511 237.216,456.036 237.216,455.46C237.216,454.884 237.691,454.409 238.267,454.409C238.843,454.409 239.318,454.884 239.318,455.46Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M168.848,282.647C169.026,281.99 169.558,281.478 170.227,281.329L170.594,278.562L171.137,281.355C171.785,281.54 172.287,282.07 172.434,282.733L175.235,283.13L172.408,283.628C172.23,284.267 171.717,284.765 171.07,284.923L170.594,287.77L170.114,284.902C169.485,284.72 168.993,284.21 168.837,283.569L166.135,283.13L168.848,282.647Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M96.37,480.946C96.548,480.289 97.081,479.776 97.749,479.627L98.117,476.862L98.661,479.655C99.308,479.838 99.811,480.367 99.956,481.031L102.758,481.428L99.931,481.926C99.753,482.565 99.239,483.063 98.592,483.221L98.117,486.07L97.637,483.201C97.007,483.018 96.516,482.508 96.359,481.867L93.657,481.428L96.37,480.946Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M229.659,455.38C229.837,454.722 230.368,454.21 231.037,454.062L231.405,451.294L231.949,454.087C232.596,454.271 233.099,454.802 233.244,455.466L236.045,455.863L233.219,456.361C233.04,456.999 232.528,457.497 231.88,457.655L231.405,460.503L230.925,457.634C230.295,457.452 229.805,456.941 229.648,456.302L226.947,455.863L229.659,455.38Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M240.211,426.869C240.388,426.211 240.92,425.699 241.588,425.551L241.956,422.783L242.5,425.576C243.148,425.762 243.651,426.291 243.796,426.955L246.597,427.352L243.771,427.85C243.592,428.488 243.079,428.987 242.433,429.145L241.956,431.992L241.477,429.123C240.847,428.942 240.357,428.432 240.2,427.791L237.497,427.352L240.211,426.869Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M109.303,321.556C109.481,320.898 110.013,320.387 110.681,320.237L111.049,317.471L111.593,320.264C112.241,320.448 112.743,320.978 112.889,321.642L115.69,322.039L112.863,322.536C112.685,323.175 112.172,323.674 111.525,323.832L111.049,326.679L110.569,323.811C109.94,323.628 109.449,323.118 109.293,322.478L106.59,322.039L109.303,321.556Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M100.756,381.578C110.286,398.228 121.393,410.411 130.341,421.988C138.283,432.264 153.757,437.408 148.307,442.286C142.164,447.782 127.292,423.533 127.292,423.533C117.408,411.614 107.949,398.97 98.299,382.433L100.756,381.578Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M0,425.268C46.046,395.026 126.409,375.502 192.597,349.225C242.884,329.26 287.601,304.198 311.639,269.689C250.721,393.777 81.066,379.089 3.312,426.424L0,425.268Z'\n          style={{ fill: 'rgb(237,28,36)', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M107.05,363.738L130.11,363.738L146.644,405.374L152.155,410.905L122.134,410.905L127.645,405.374L125.687,400.294L109.117,400.294L107.413,406.103L111.365,410.905L95.701,410.905L101.213,405.374L111.837,368.554L107.05,363.738ZM122.751,393.004L116.078,376.098L111.184,393.004L122.751,393.004Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M214.184,363.738L238.118,363.738L254.653,405.374L260.164,410.905L230.143,410.905L235.654,405.374L233.696,400.294L217.125,400.294L215.421,406.103L219.373,410.905L203.71,410.905L209.222,405.374L219.845,368.554L214.184,363.738ZM230.759,393.004L224.087,376.098L219.192,393.004L230.759,393.004Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M75.758,393.113L75.758,368.554L70.972,363.738L86.925,363.738L82.14,368.554L82.14,405.374L87.651,410.905L66.693,410.905L48.637,380.361L48.637,405.374L53.277,410.905L36.6,410.905L42.111,405.374L42.111,368.554L37.325,363.738L58.21,363.738L75.758,393.113Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M196.553,375.835L196.063,361.15L191.12,364.562C184.156,362.127 176.051,362.219 170.364,364.91C165.071,367.415 159.36,372.704 160.055,380.22C160.752,387.736 166.577,390.645 171.826,393.024C178.582,396.086 185.936,397.121 185.827,401.167C185.757,403.741 181.485,405.587 178.165,405.482C175.135,405.386 165.28,404.646 160.125,398.523L161.101,413.97L166.604,409.935C173.289,412.3 181.392,413.292 188.889,410.847C196.341,408.419 204.174,402.183 199.827,391.285C197.956,386.596 192.804,383.705 189.731,382.447C186.917,381.295 178.333,377.92 175.936,376.671C173.136,375.212 173.448,370.582 180.185,369.642C186.288,368.791 194.742,373.678 196.553,375.835Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M35.658,497.677C128.131,403.298 265.971,359.693 311.639,269.689C284.138,357.193 136.85,405.454 35.408,502.115L35.658,497.677Z'\n          style={{ fill: 'rgb(237,28,36)', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M98.299,382.433C97.216,380.577 96.131,378.672 95.042,376.714C70.388,332.361 73.944,287.098 118.563,306.82C156.431,323.559 192.6,370.511 207.146,403.857C213.887,419.307 231.96,479.946 173.764,455.374L173.65,455.019C228.613,477.651 219.111,420.301 189.691,376.331C173.042,351.45 151.331,330.725 137.637,320.722C92.05,287.421 64.246,307.79 96.253,373.097C97.702,376.053 99.208,378.875 100.756,381.578L98.299,382.433Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n      </g>\n      <g id='nasa-logo-neg-mono'>\n        <path\n          d='M273.427,129.05C273.427,199.811 215.188,258.05 144.427,258.05C73.665,258.05 15.427,199.811 15.427,129.05C15.427,58.289 73.665,0.05 144.427,0.05C215.188,0.05 273.427,58.289 273.427,129.05ZM263.427,129.05C263.427,194.326 209.703,248.05 144.427,248.05C79.151,248.05 25.427,194.326 25.427,129.05C25.427,63.774 79.151,10.05 144.427,10.05C209.703,10.05 263.427,63.774 263.427,129.05Z'\n          style={{ fill: 'white' }}\n        />\n        <path\n          d='M146.205,11.771C146.205,12.347 145.731,12.821 145.154,12.821C144.578,12.821 144.104,12.347 144.104,11.771C144.104,11.195 144.578,10.719 145.154,10.719C145.731,10.719 146.205,11.195 146.205,11.771Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M153.48,27.693C153.48,28.403 152.896,28.986 152.187,28.986C151.477,28.986 150.893,28.403 150.893,27.693C150.893,26.984 151.477,26.4 152.187,26.4C152.896,26.4 153.48,26.984 153.48,27.693Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M172.393,53.719C172.393,54.429 171.81,55.013 171.1,55.013C170.39,55.013 169.807,54.429 169.807,53.719C169.807,53.009 170.39,52.426 171.1,52.426C171.81,52.426 172.393,53.009 172.393,53.719Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M142.002,36.665C142.002,37.241 141.528,37.716 140.951,37.716C140.375,37.716 139.901,37.241 139.901,36.665C139.901,36.089 140.375,35.614 140.951,35.614C141.528,35.614 142.002,36.089 142.002,36.665Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M153.318,42.646C153.318,43.222 152.843,43.697 152.267,43.697C151.691,43.697 151.217,43.222 151.217,42.646C151.217,42.07 151.691,41.595 152.267,41.595C152.843,41.595 153.318,42.07 153.318,42.646Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M138.607,25.915C138.607,26.624 138.023,27.208 137.314,27.208C136.604,27.208 136.021,26.624 136.021,25.915C136.021,25.206 136.604,24.622 137.314,24.622C138.023,24.622 138.607,25.206 138.607,25.915Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M121.472,36.342C121.472,36.919 120.998,37.393 120.422,37.393C119.845,37.393 119.371,36.919 119.371,36.342C119.371,35.766 119.845,35.291 120.422,35.291C120.998,35.291 121.472,35.766 121.472,36.342Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M124.544,38.444C124.544,39.02 124.069,39.494 123.493,39.494C122.917,39.494 122.442,39.02 122.442,38.444C122.442,37.867 122.917,37.393 123.493,37.393C124.069,37.393 124.544,37.867 124.544,38.444Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M127.615,40.545C127.615,41.121 127.14,41.595 126.564,41.595C125.987,41.595 125.513,41.121 125.513,40.545C125.513,39.968 125.987,39.494 126.564,39.494C127.14,39.494 127.615,39.968 127.615,40.545Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M122.927,44.586C122.927,45.162 122.453,45.637 121.877,45.637C121.3,45.637 120.826,45.162 120.826,44.586C120.826,44.009 121.3,43.535 121.877,43.535C122.453,43.535 122.927,44.009 122.927,44.586Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M98.517,61.721C98.517,62.298 98.043,62.772 97.466,62.772C96.89,62.772 96.415,62.298 96.415,61.721C96.415,61.145 96.89,60.671 97.466,60.671C98.043,60.671 98.517,61.145 98.517,61.721Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M103.044,67.218C103.044,67.794 102.569,68.268 101.993,68.268C101.417,68.268 100.942,67.794 100.942,67.218C100.942,66.641 101.417,66.167 101.993,66.167C102.569,66.167 103.044,66.641 103.044,67.218Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M99.487,155.965C99.487,156.541 99.012,157.016 98.436,157.016C97.86,157.016 97.385,156.541 97.385,155.965C97.385,155.389 97.86,154.914 98.436,154.914C99.012,154.914 99.487,155.389 99.487,155.965Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M100.134,180.454C100.134,181.165 99.549,181.749 98.84,181.749C98.131,181.749 97.547,181.165 97.547,180.454C97.547,179.746 98.131,179.163 98.84,179.163C99.549,179.163 100.134,179.746 100.134,180.454Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M86.231,192.985C86.231,193.561 85.756,194.036 85.18,194.036C84.604,194.036 84.13,193.561 84.13,192.985C84.13,192.407 84.604,191.934 85.18,191.934C85.756,191.934 86.231,192.407 86.231,192.985Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M69.58,198.077C69.58,198.786 68.996,199.37 68.287,199.37C67.578,199.37 66.994,198.786 66.994,198.077C66.994,197.366 67.578,196.782 68.287,196.782C68.996,196.782 69.58,197.366 69.58,198.077Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M66.186,186.76C66.186,187.469 65.602,188.053 64.893,188.053C64.183,188.053 63.599,187.469 63.599,186.76C63.599,186.051 64.183,185.467 64.893,185.467C65.602,185.467 66.186,186.051 66.186,186.76Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M64.246,193.954C64.246,194.53 63.772,195.004 63.195,195.004C62.619,195.004 62.145,194.53 62.145,193.954C62.145,193.377 62.619,192.903 63.195,192.903C63.772,192.903 64.246,193.377 64.246,193.954Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M51.798,187.973C51.798,188.549 51.324,189.024 50.747,189.024C50.171,189.024 49.697,188.549 49.697,187.973C49.697,187.397 50.171,186.922 50.747,186.922C51.324,186.922 51.798,187.397 51.798,187.973Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M95.283,208.179C95.283,208.755 94.809,209.23 94.233,209.23C93.656,209.23 93.182,208.755 93.182,208.179C93.182,207.603 93.656,207.128 94.233,207.128C94.809,207.128 95.283,207.603 95.283,208.179Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M108.378,198.561C108.378,199.27 107.794,199.854 107.085,199.854C106.376,199.854 105.792,199.27 105.792,198.561C105.792,197.852 106.376,197.268 107.085,197.268C107.794,197.268 108.378,197.852 108.378,198.561Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M109.833,210.927C109.833,211.503 109.359,211.978 108.782,211.978C108.206,211.978 107.731,211.503 107.731,210.927C107.731,210.351 108.206,209.878 108.782,209.878C109.359,209.878 109.833,210.351 109.833,210.927Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M163.664,199.127C163.664,199.704 163.19,200.178 162.613,200.178C162.037,200.178 161.563,199.704 161.563,199.127C161.563,198.549 162.037,198.077 162.613,198.077C163.19,198.077 163.664,198.549 163.664,199.127Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M138.607,208.017C138.607,208.595 138.132,209.068 137.556,209.068C136.98,209.068 136.506,208.595 136.506,208.017C136.506,207.441 136.98,206.968 137.556,206.968C138.132,206.968 138.607,207.441 138.607,208.017Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M206.017,220.789C206.017,221.365 205.543,221.839 204.966,221.839C204.39,221.839 203.915,221.365 203.915,220.789C203.915,220.212 204.39,219.738 204.966,219.738C205.543,219.738 206.017,220.212 206.017,220.789Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M211.513,171.079C211.513,171.788 210.929,172.372 210.22,172.372C209.511,172.372 208.927,171.788 208.927,171.079C208.927,170.371 209.511,169.787 210.22,169.787C210.929,169.787 211.513,170.371 211.513,171.079Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M201.167,178.111C201.167,178.689 200.693,179.163 200.116,179.163C199.54,179.163 199.066,178.689 199.066,178.111C199.066,177.537 199.54,177.062 200.116,177.062C200.693,177.062 201.167,177.537 201.167,178.111Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M211.352,180.132C211.352,180.841 210.768,181.425 210.059,181.425C209.35,181.425 208.766,180.841 208.766,180.132C208.766,179.423 209.35,178.839 210.059,178.839C210.768,178.839 211.352,179.423 211.352,180.132Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M201.167,192.661C201.167,193.237 200.693,193.711 200.116,193.711C199.54,193.711 199.066,193.237 199.066,192.661C199.066,192.084 199.54,191.61 200.116,191.61C200.693,191.61 201.167,192.084 201.167,192.661Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M227.517,164.048C227.517,164.624 227.043,165.099 226.467,165.099C225.889,165.099 225.414,164.624 225.414,164.048C225.414,163.472 225.889,162.997 226.467,162.997C227.043,162.997 227.517,163.472 227.517,164.048Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M230.104,170.433C230.104,171.144 229.52,171.726 228.811,171.726C228.101,171.726 227.517,171.144 227.517,170.433C227.517,169.724 228.101,169.14 228.811,169.14C229.52,169.14 230.104,169.724 230.104,170.433Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M248.209,178.031C248.209,178.74 247.625,179.324 246.915,179.324C246.205,179.324 245.621,178.74 245.621,178.031C245.621,177.322 246.205,176.738 246.915,176.738C247.625,176.738 248.209,177.322 248.209,178.031Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M229.781,191.53C229.781,192.106 229.306,192.58 228.73,192.58C228.154,192.58 227.679,192.106 227.679,191.53C227.679,190.954 228.154,190.479 228.73,190.479C229.306,190.479 229.781,190.954 229.781,191.53Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M241.419,180.537C241.419,181.113 240.945,181.587 240.368,181.587C239.792,181.587 239.318,181.113 239.318,180.537C239.318,179.96 239.792,179.486 240.368,179.486C240.945,179.486 241.419,179.96 241.419,180.537Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M239.318,197.51C239.318,198.086 238.843,198.561 238.267,198.561C237.691,198.561 237.216,198.086 237.216,197.51C237.216,196.934 237.691,196.459 238.267,196.459C238.843,196.459 239.318,196.934 239.318,197.51Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M168.848,24.697C169.026,24.04 169.558,23.528 170.227,23.379L170.594,20.612L171.137,23.405C171.785,23.59 172.287,24.12 172.434,24.783L175.235,25.18L172.408,25.678C172.23,26.317 171.717,26.815 171.07,26.973L170.594,29.82L170.114,26.952C169.485,26.77 168.993,26.26 168.837,25.619L166.135,25.18L168.848,24.697Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M96.37,222.996C96.548,222.339 97.081,221.826 97.749,221.677L98.117,218.912L98.661,221.705C99.308,221.888 99.811,222.417 99.956,223.081L102.758,223.478L99.931,223.976C99.753,224.615 99.239,225.113 98.592,225.271L98.117,228.12L97.637,225.251C97.007,225.068 96.516,224.558 96.359,223.917L93.657,223.478L96.37,222.996Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M229.659,197.43C229.837,196.772 230.368,196.26 231.037,196.112L231.405,193.344L231.949,196.137C232.596,196.321 233.099,196.852 233.244,197.516L236.045,197.913L233.219,198.411C233.04,199.049 232.528,199.547 231.88,199.705L231.405,202.553L230.925,199.684C230.295,199.502 229.805,198.991 229.648,198.352L226.947,197.913L229.659,197.43Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M240.211,168.919C240.388,168.261 240.92,167.749 241.588,167.601L241.956,164.833L242.5,167.626C243.148,167.812 243.651,168.341 243.796,169.005L246.597,169.402L243.771,169.9C243.592,170.538 243.079,171.037 242.433,171.195L241.956,174.042L241.477,171.173C240.847,170.992 240.357,170.482 240.2,169.841L237.497,169.402L240.211,168.919Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M109.303,63.606C109.481,62.948 110.013,62.437 110.681,62.287L111.049,59.521L111.593,62.314C112.241,62.498 112.743,63.028 112.889,63.692L115.69,64.089L112.863,64.586C112.685,65.225 112.172,65.724 111.525,65.882L111.049,68.729L110.569,65.861C109.94,65.678 109.449,65.168 109.293,64.528L106.59,64.089L109.303,63.606Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M100.756,123.628C110.286,140.277 121.393,152.461 130.341,164.038C138.283,174.314 153.757,179.458 148.307,184.336C142.164,189.832 127.292,165.583 127.292,165.583C117.408,153.664 107.949,141.02 98.299,124.483L100.756,123.628Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M0,167.318C46.046,137.076 126.409,117.552 192.597,91.275C242.884,71.31 287.601,46.248 311.639,11.739C250.721,135.827 81.066,121.139 3.312,168.474L0,167.318Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M107.05,105.788L130.11,105.788L146.644,147.424L152.155,152.955L122.134,152.955L127.645,147.424L125.687,142.344L109.117,142.344L107.413,148.153L111.365,152.955L95.701,152.955L101.213,147.424L111.837,110.604L107.05,105.788ZM122.751,135.054L116.078,118.147L111.184,135.054L122.751,135.054Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M214.184,105.788L238.118,105.788L254.653,147.424L260.164,152.955L230.143,152.955L235.654,147.424L233.696,142.344L217.125,142.344L215.421,148.153L219.373,152.955L203.71,152.955L209.222,147.424L219.845,110.604L214.184,105.788ZM230.759,135.054L224.087,118.147L219.192,135.054L230.759,135.054Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M75.758,135.163L75.758,110.604L70.972,105.788L86.925,105.788L82.14,110.604L82.14,147.424L87.651,152.955L66.693,152.955L48.637,122.411L48.637,147.424L53.277,152.955L36.6,152.955L42.111,147.424L42.111,110.604L37.325,105.788L58.21,105.788L75.758,135.163Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M196.553,117.885L196.063,103.2L191.12,106.612C184.156,104.177 176.051,104.269 170.364,106.96C165.071,109.465 159.36,114.754 160.055,122.27C160.752,129.786 166.577,132.695 171.826,135.074C178.582,138.136 185.936,139.171 185.827,143.217C185.757,145.791 181.485,147.637 178.165,147.532C175.135,147.436 165.28,146.696 160.125,140.573L161.101,156.02L166.604,151.985C173.289,154.35 181.392,155.342 188.889,152.897C196.341,150.469 204.174,144.233 199.827,133.335C197.956,128.646 192.804,125.755 189.731,124.497C186.917,123.345 178.333,119.97 175.936,118.72C173.136,117.262 173.448,112.632 180.185,111.692C186.288,110.841 194.742,115.728 196.553,117.885Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M35.658,239.727C128.131,145.348 265.971,101.743 311.639,11.739C284.138,99.243 136.85,147.504 35.408,244.165L35.658,239.727Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n        <path\n          d='M98.299,124.483C97.216,122.627 96.131,120.722 95.042,118.763C70.388,74.411 73.944,29.148 118.563,48.87C156.431,65.609 192.6,112.561 207.146,145.907C213.887,161.356 231.96,221.996 173.764,197.424L173.65,197.069C228.613,219.701 219.111,162.351 189.691,118.38C173.042,93.5 151.331,72.775 137.637,62.772C92.05,29.471 64.246,49.84 96.253,115.147C97.702,118.102 99.208,120.925 100.756,123.628L98.299,124.483Z'\n          style={{ fill: 'white', fillRule: 'nonzero' }}\n        />\n      </g>\n    </svg>\n  );\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Button } from '@devseed-ui/button';\nimport { Modal } from '@devseed-ui/modal';\nimport { media, themeVal } from '@devseed-ui/theme-provider';\n\nimport { useFeedbackModal } from './layout-root';\n\nimport GlobalMenuLinkCSS from '$styles/menu-link';\n\nconst StyledGoogleForm = styled.iframe`\n  width: 100%;\n`;\n\ninterface BtnMediaProps {\n  active?: boolean;\n}\n\n// Global menu link style\nconst ButtonAsNavLink = styled(Button)`\n  ${media.mediumUp<BtnMediaProps>`\n    background-color: ${themeVal('color.primary-700')};\n\n    &:hover {\n      background-color: ${themeVal('color.primary-800')};\n    }\n\n    /* Print & when prop is passed */\n    ${({ active }) => active && '&,'}\n    &:active,\n    &.active {\n      background-color: ${themeVal('color.primary-900')};\n    }\n\n    &:focus-visible {\n      background-color: ${themeVal('color.primary-200a')};\n    }\n  `}\n\n  ${media.mediumDown`\n    ${GlobalMenuLinkCSS}\n  `}\n`;\n\nfunction GoogleForm() {\n  const { isRevealed, show, hide } = useFeedbackModal();\n\n  return (\n    <>\n      <ButtonAsNavLink\n        type='button'\n        size='large'\n        onClick={show}\n        style={{ color: 'white' }}\n      >\n        Contact Us\n      </ButtonAsNavLink>\n      <Modal\n        id='modal'\n        size='large'\n        title='Contact Us'\n        revealed={isRevealed}\n        onCloseClick={hide}\n        onOverlayClick={hide}\n        closeButton\n        content={\n          <StyledGoogleForm\n            src={process.env.GOOGLE_FORM}\n            height={504}\n            frameBorder={0}\n            marginHeight={0}\n            marginWidth={0}\n          >\n            Loading…\n          </StyledGoogleForm>\n        }\n      />\n    </>\n  );\n}\n\nexport default GoogleForm;\n","import { css } from 'styled-components';\n\nimport { glsp, media, themeVal } from '@devseed-ui/theme-provider';\nimport { variableGlsp } from '$styles/variable-utils';\n\nconst GlobalMenuLinkCSS = css`\n  appearance: none;\n  position: relative;\n  display: flex;\n  gap: ${glsp(0.25)};\n  align-items: center;\n  border: 0;\n  background: none;\n  cursor: pointer;\n  color: currentColor;\n  text-decoration: none;\n  text-align: left;\n  padding: ${variableGlsp(0, 1)};\n  transition: all 0.32s ease 0s;\n  text-transform: ${themeVal('button.type.case')};\n  font-weight: ${themeVal('button.type.weight')};\n\n  ${media.largeUp`\n    padding: ${glsp(0.5, 0)};\n  `}\n\n  &:hover {\n    opacity: 0.64;\n  }\n\n  > * {\n    flex-shrink: 0;\n  }\n\n  /* Menu link line decoration */\n\n  &::after {\n    content: '';\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 0.125rem;\n    height: 0;\n    background: currentColor;\n\n    ${media.largeUp`\n      width: 0;\n      height: 0.125rem;\n    `}\n  }\n\n  &.active::after {\n    ${media.mediumDown`\n      height: 100%;\n    `}\n\n    ${media.largeUp`\n      width: 100%;\n    `}\n  }\n`;\n\nexport default GlobalMenuLinkCSS;\n","import { useEffect } from 'react';\n\nfunction UnscrollableBody() {\n  useEffect(() => {\n    document.body.style.overflow = 'hidden';\n\n    return () => {\n      document.body.style.overflow = '';\n    };\n  }, []);\n\n  return null;\n}\n\nexport default UnscrollableBody;\n","import { DatasetData, StoryData } from 'veda';\nimport { checkEnvFlag } from './utils';\n\nexport const ABOUT_PATH = '/about';\nexport const STORIES_PATH = '/stories';\nexport const DATASETS_PATH = '/data-catalog';\nexport const EXPLORATION_PATH = '/exploration';\nexport const ANALYSIS_PATH = '/analysis';\nexport const ANALYSIS_RESULTS_PATH = '/analysis/results';\n\nexport const getStoryPath = (d: StoryData | string) =>\n  `${STORIES_PATH}/${typeof d === 'string' ? d : d.id}`;\n\nexport const getDatasetPath = (d: DatasetData | string) =>\n  `${DATASETS_PATH}/${typeof d === 'string' ? d : d.id}`;\n\nexport const getDatasetExplorePath = (d: DatasetData | string) => {\n  if (!checkEnvFlag(process.env.FEATURE_NEW_EXPLORATION)) {\n    return `${DATASETS_PATH}/${typeof d === 'string' ? d : d.id}/explore`;\n  }\n\n  const id = typeof d === 'string' ? d : d.id;\n  return `${EXPLORATION_PATH}?search=${id}`;\n};\n","import React, { ReactNode, useCallback, useMemo, useState } from 'react';\nimport styled from 'styled-components';\nimport { media, multiply, themeVal } from '@devseed-ui/theme-provider';\nimport { Button, ButtonProps } from '@devseed-ui/button';\nimport {\n  CollecticonBook,\n  CollecticonCode,\n  CollecticonCog,\n  CollecticonDownload2\n} from '@devseed-ui/collecticons';\nimport { Modal } from '@devseed-ui/modal';\nimport { DatasetData, datasets } from 'veda';\n\nimport { HintedError } from '$utils/hinted-error';\nimport { variableGlsp } from '$styles/variable-utils';\n\ninterface NotebookConnectButtonProps {\n  compact?: boolean;\n  variation?: ButtonProps['variation'];\n  size?: ButtonProps['size'];\n  dataset?: DatasetData;\n  className?: string;\n}\n\nconst DatasetUsages = styled.ul`\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: ${variableGlsp()};\n  margin-bottom: ${variableGlsp()};\n  list-style-type: none;\n  padding: 0;\n\n  ${media.smallUp`\n    grid-template-columns: 1fr 1fr;\n  `}\n`;\n\nconst DatasetUsageLink = styled.a`\n  display: flex;\n  padding: ${variableGlsp()};\n  text-decoration: none;\n  color: ${themeVal('color.primary')};\n  border-radius: ${themeVal('shape.rounded')};\n  background: ${themeVal('color.primary-50')};\n  outline: 0 solid transparent;\n  transition: transform 0.24s ease-in-out 0s, outline-width 0.16s ease-in-out 0s;\n\n  & > svg {\n    flex: 0 0 auto;\n    margin: 0.25rem 0.5rem 0 0;\n  }\n\n  &:visited {\n    color: ${themeVal('color.primary')};\n  }\n\n  &:hover {\n    transform: translate(0, 0.125rem);\n  }\n\n  &:focus-visible {\n    outline-width: 0.25rem;\n    outline-color: ${themeVal('color.primary')};\n  }\n\n  &:focus:not(:focus-visible) {\n    outline: 0;\n  }\n`;\n\nconst DatasetUsageLabel = styled.div`\n  & > h4 {\n    font-weight: normal;\n  }\n\n  & > p {\n    color: ${themeVal('color.base')};\n    font-size: 0.875rem;\n  }\n`;\n\ntype DatasetUsageType = 'jupyter' | 'github' | 'download' | 'unknown';\n\nconst IconByType: Record<DatasetUsageType, any> = {\n  jupyter: <CollecticonCog />,\n  github: <CollecticonBook />,\n  download: <CollecticonDownload2 />,\n  unknown: <CollecticonCog />\n};\n\nexport function NotebookConnectModal(props: {\n  dataset?: DatasetData;\n  revealed: boolean;\n  onClose: () => void;\n}) {\n  const { dataset, revealed, onClose } = props;\n\n  const datasetUsages = dataset?.usage;\n\n  const datasetUsagesWithIcon = useMemo(() => {\n    return datasetUsages?.map((d) => {\n      let type = 'unknown';\n      if (d.url.match('nasa-veda.2i2c.cloud')) type = 'jupyter';\n      else if (d.url.match('github.com/NASA-IMPACT/veda-docs')) type = 'github';\n      // TO DO: browser UI url pattern check\n      else if (d.url.match('browseui')) type = 'download';\n      return {\n        ...d,\n        type\n      };\n    });\n  }, [datasetUsages]);\n\n  if (!datasetUsages || !datasetUsagesWithIcon) {\n    return null;\n  }\n\n  const layerIdsSet = dataset.layers.reduce(\n    (acc, layer) => acc.add(layer.stacCol),\n    new Set<string>()\n  );\n\n  return (\n    <Modal\n      id='modal'\n      size='medium'\n      title='How to use this dataset'\n      revealed={revealed}\n      onCloseClick={onClose}\n      onOverlayClick={onClose}\n      closeButton\n      content={\n        <>\n          <DatasetUsages>\n            {datasetUsagesWithIcon.map((datasetUsage) => (\n              <li key={datasetUsage.url}>\n                <DatasetUsageLink href={datasetUsage.url} target='_blank' rel='noopener'>\n                  {IconByType[datasetUsage.type]}\n                  <DatasetUsageLabel>\n                    <h4>{datasetUsage.title}</h4>\n                    <p>{datasetUsage.label}</p>\n                  </DatasetUsageLabel>\n                </DatasetUsageLink>\n              </li>\n            ))}\n          </DatasetUsages>\n          <p>\n            For reference, the following STAC collection ID&apos;s are\n            associated with this dataset:\n          </p>\n          <ul>\n            {Array.from(layerIdsSet).map((id) => (\n              <li key={id}>\n                <code>{id}</code>\n              </li>\n            ))}\n          </ul>\n        </>\n      }\n    />\n  );\n}\n\nfunction NotebookConnectButtonSelf(props: NotebookConnectButtonProps) {\n  const {\n    className,\n    compact = true,\n    variation = 'primary-fill',\n    size = 'medium',\n    dataset\n  } = props;\n\n  const [revealed, setRevealed] = useState(false);\n  const close = useCallback(() => setRevealed(false), []);\n\n  const datasetUsages = dataset?.usage;\n\n  if (!datasetUsages) {\n    return null;\n  }\n\n  return (\n    <>\n      <Button\n        className={className}\n        type='button'\n        variation={variation}\n        fitting={compact ? 'skinny' : 'regular'}\n        onClick={() => setRevealed(true)}\n        size={size}\n      >\n        <CollecticonCode meaningful={compact} title='Open data usage options' />\n        {compact ? '' : 'Access Data'}\n      </Button>\n      <NotebookConnectModal\n        dataset={dataset}\n        revealed={revealed}\n        onClose={close}\n      />\n    </>\n  );\n}\n\nexport const NotebookConnectButton = styled(NotebookConnectButtonSelf)`\n  /* Convert to styled-component: https://styled-components.com/docs/advanced#caveat */\n`;\n\ninterface NotebookConnectCalloutProps {\n  children: ReactNode;\n  datasetId: string;\n  className?: string;\n}\n\nfunction NotebookConnectCalloutSelf(props: NotebookConnectCalloutProps) {\n  const { children, datasetId, className } = props;\n\n  if (!datasetId) {\n    throw new HintedError('Malformed Map Block', [\n      'Missing property: datasetId'\n    ]);\n  }\n\n  const dataset = datasets[datasetId];\n\n  if (!dataset) {\n    throw new HintedError('Malformed Map Block', [\n      `Dataset not found: ${datasetId}`\n    ]);\n  }\n\n  if (!dataset.data.usage?.length) {\n    throw new HintedError('Malformed Map Block', [\n      `Dataset does not have 'usage' defined: ${datasetId}`\n    ]);\n  }\n\n  return (\n    <div className={className}>\n      <div>{children}</div>\n      <NotebookConnectButton\n        // compact={false}\n        variation='base-outline'\n        dataset={dataset.data}\n      />\n    </div>\n  );\n}\n\nexport const NotebookConnectCalloutBlock = styled(NotebookConnectCalloutSelf)`\n  /* Convert to styled-component: https://styled-components.com/docs/advanced#caveat */\n  display: flex;\n  flex-flow: row nowrap;\n  border-radius: ${multiply(themeVal('shape.rounded'), 2)};\n  background: ${themeVal('color.base-50')};\n  padding: ${variableGlsp()};\n  gap: ${variableGlsp()};\n  box-shadow: inset 0 -1px 0 0 ${themeVal('color.base-50a')};\n\n  ${NotebookConnectButton} {\n    margin-left: auto;\n  }\n`;\n","import BlockChart from './components/common/chart/block';\nimport DataCatalog from './components/data-catalog';\nimport MdxContent from './components/common/mdx-content';\n\nexport {\n  BlockChart,\n  DataCatalog,\n  MdxContent\n};\n","import React, { useRef, useState, useMemo, useEffect, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { DatasetData } from 'veda';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { themeVal } from '@devseed-ui/theme-provider';\nimport { VerticalDivider } from '@devseed-ui/toolbar';\n\nimport DatasetMenu from './dataset-menu';\nimport FiltersControl from './filters-control';\nimport FilterTag from './filter-tag';\nimport prepareDatasets from './prepare-datasets';\nimport {\n  Actions,\n  useBrowserControls\n} from '$components/common/browse-controls/use-browse-controls';\nimport {\n  useSlidingStickyHeaderProps\n} from '$components/common/layout-root';\n\nimport {\n  FoldHeader,\n  FoldHeadline,\n  FoldTitle\n} from '$components/common/fold';\nimport { Card } from '$components/common/card';\nimport { CardList, CardMeta, CardTopicsList } from '$components/common/card/styles';\nimport EmptyHub from '$components/common/empty-hub';\nimport { DATASETS_PATH, getDatasetPath } from '$utils/routes';\nimport TextHighlight from '$components/common/text-highlight';\nimport { Pill } from '$styles/pill';\nimport { CardSourcesList } from '$components/common/card-sources';\nimport {\n  getAllTaxonomyValues,\n  getTaxonomy,\n  getTaxonomyByIds,\n  generateTaxonomies,\n  TAXONOMY_SOURCE,\n  TAXONOMY_TOPICS\n} from '$utils/veda-data';\nimport { DatasetClassification } from '$components/common/dataset-classification';\nimport { variableBaseType, variableGlsp } from '$styles/variable-utils';\nimport { OptionItem } from '$components/common/form/checkable-filter';\nimport { usePreviousValue } from '$utils/use-effect-previous';\nimport { getAllDatasetsWithEnhancedLayers } from '$components/exploration/data-utils';\n\n/**\n * DATA CATALOG Feature component \n * Allows you to browse through datasets using the filters sidebar control\n */\n\nconst BrowseFoldHeader = styled(FoldHeader)`\n  margin-bottom: 4rem;\n`;\n\nconst Content = styled.div`\n  display: flex;\n  margin-bottom: 8rem;\n  position: relative;\n`;\n\nconst CatalogWrapper = styled.div`\n  width: 100%;\n`;\n\nconst BrowseSection = styled.div`\n  width: 100%;\n  max-width: ${themeVal('layout.max')};\n  margin: 0 auto;\n  margin-top: ${variableGlsp(2)};\n  padding-left: ${variableGlsp()};\n  padding-right: ${variableGlsp()};\n  gap: ${variableGlsp()};\n`;\n\nconst Cards = styled(CardList)`\n  padding: 0 0 0 2rem;\n`;\n\nconst Tags = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  padding: 0 0 2.4rem 2rem;\n`;\n\nconst PlainTextButton = styled.button`\n  background: none;\n  border: none;\n  outline: none;\n  box-shadow: none;\n  color: ${themeVal('color.primary-400')};\n  text-decoration: underline;\n  font-size: ${variableBaseType('0.6rem')};\n  &:hover {\n    color: ${themeVal('color.primary-800')};\n  }\n`;\n\nconst EmptyState = styled(EmptyHub)`\n  margin-left: 2rem;\n`;\n\nexport const sortOptions = [{ id: 'name', name: 'Name' }];\n\nexport interface DataCatalogProps {\n  datasets: DatasetData[];\n}\n\nfunction DataCatalog({ datasets }: DataCatalogProps) {\n  const controlVars = useBrowserControls({\n    sortOptions\n  });\n\n  const navigate = useNavigate();\n\n  const { taxonomies, sortField, sortDir, onAction } = controlVars;\n  const search = controlVars.search ?? '';\n\n  const datasetTaxonomies = generateTaxonomies(datasets);\n\n  \n  const urlTaxonomyItems = taxonomies? Object.entries(taxonomies).map(([key, val]) => getTaxonomyByIds(key, val, datasetTaxonomies)).flat(): [];\n  \n  const allDatasetsWithEnhancedLayers = useMemo(() => getAllDatasetsWithEnhancedLayers(datasets), [datasets]);\n\n  const [datasetsToDisplay, setDatasetsToDisplay] = useState<DatasetData[]>(\n    prepareDatasets(allDatasetsWithEnhancedLayers, {\n    search,\n    taxonomies,\n    sortField,\n    sortDir,\n    filterLayers: false\n  }));\n\n  const [allSelectedFilters, setAllSelectedFilters] = useState<OptionItem[]>(urlTaxonomyItems);\n  const [clearedTagItem, setClearedTagItem] = useState<OptionItem>();\n\n  const prevSelectedFilters = usePreviousValue(allSelectedFilters) || [];\n\n  // Handlers\n  const handleChangeAllSelectedFilters = useCallback((item: OptionItem, action: 'add' | 'remove') => {\n    if(action == 'add') {\n      setAllSelectedFilters([...allSelectedFilters, item]);\n    } \n    \n    if (action == 'remove') {\n      setAllSelectedFilters(allSelectedFilters.filter((selected) => selected.id !== item.id));\n    }\n    onAction(Actions.TAXONOMY_MULTISELECT, { key: item.taxonomy, value: item.id });\n  }, [setAllSelectedFilters, allSelectedFilters, onAction]);\n\n  const handleClearTag = useCallback((item: OptionItem) => {\n    setAllSelectedFilters(allSelectedFilters.filter((selected) => selected !== item));\n    setClearedTagItem(item);\n\n  }, [allSelectedFilters]);\n\n  const handleClearTags = useCallback(() => {\n    setAllSelectedFilters([]);\n  }, [setAllSelectedFilters]);\n\n  useEffect(() => {\n    if (clearedTagItem && (allSelectedFilters.length == prevSelectedFilters.length-1)) {\n      onAction(Actions.TAXONOMY_MULTISELECT, { key: clearedTagItem.taxonomy, value: clearedTagItem.id}); \n      setClearedTagItem(undefined);\n    }\n  }, [allSelectedFilters, clearedTagItem]);\n\n  useEffect(() => {\n    if(!allSelectedFilters.length) {\n      onAction(Actions.CLEAR);\n      navigate(DATASETS_PATH);\n    }\n  }, [allSelectedFilters]);\n\n  useEffect(() => {\n    const updated = prepareDatasets(allDatasetsWithEnhancedLayers, {\n      search,\n      taxonomies,\n      sortField,\n      sortDir,\n      filterLayers: false\n    });\n    setDatasetsToDisplay(updated);\n  }, [allSelectedFilters, taxonomies, search]);\n\n  const browseControlsHeaderRef = useRef<HTMLDivElement>(null);\n  const { headerHeight } = useSlidingStickyHeaderProps();\n\n  const renderTags = useMemo(() => {\n    if (allSelectedFilters.length > 0 || urlTaxonomyItems.length > 0) {\n      return (\n        <Tags>\n          {\n            (allSelectedFilters.length > 0) ? (\n              allSelectedFilters.map((filter) => <FilterTag key={`${filter.taxonomy}-${filter.id}`} item={filter} onClick={handleClearTag} />)\n            ) : (\n              urlTaxonomyItems.map((filter) => <FilterTag key={`${filter.taxonomy}-${filter.id}`} item={filter} onClick={handleClearTag} />)\n            )\n          }\n          <PlainTextButton onClick={handleClearTags}>Clear all</PlainTextButton>\n        </Tags>\n      );\n    }\n    return null;\n  }, [allSelectedFilters, handleClearTag, handleClearTags, urlTaxonomyItems]);\n\n  return (\n    <BrowseSection>\n      <BrowseFoldHeader\n        ref={browseControlsHeaderRef}\n        style={{\n          scrollMarginTop: `${headerHeight + 16}px`\n        }}\n      >\n        <FoldHeadline>\n          <FoldTitle>Search datasets</FoldTitle>\n        </FoldHeadline>\n      </BrowseFoldHeader>\n      <Content>\n        <FiltersControl\n          {...controlVars}\n          taxonomiesOptions={datasetTaxonomies}\n          onChangeToFilters={handleChangeAllSelectedFilters}\n          clearedTagItem={clearedTagItem}\n          setClearedTagItem={setClearedTagItem}\n          allSelected={allSelectedFilters}\n        />\n        <CatalogWrapper>\n          {renderTags}\n          {datasetsToDisplay.length ? (\n            <Cards>\n              {datasetsToDisplay.map((d) => {\n                const topics = getTaxonomy(d, TAXONOMY_TOPICS)?.values;\n                const allTaxonomyValues = getAllTaxonomyValues(d).map((v) => v.name);\n                return (\n                  <li key={d.id}>\n                    <Card\n                      cardType='horizontal-info'\n                      tagLabels={allTaxonomyValues}\n                      overline={\n                        <CardMeta>\n                          <DatasetClassification dataset={d} />\n                          <CardSourcesList\n                            sources={getTaxonomy(d, TAXONOMY_SOURCE)?.values}\n                            rootPath={DATASETS_PATH}\n                            onSourceClick={(id) => {\n                              onAction(Actions.TAXONOMY_MULTISELECT, {\n                                key: TAXONOMY_SOURCE,\n                                value: id\n                              });\n                              browseControlsHeaderRef.current?.scrollIntoView();\n                            }}\n                          />\n                          <VerticalDivider variation='light' />\n                          {/* TODO: Implement modified date: https://github.com/NASA-IMPACT/veda-ui/issues/514 */}\n                          {/* \n                        <Link\n                          to={`${DATASETS_PATH}?${Actions.SORT_FIELD}=date`}\n                          onClick={(e) => {\n                            e.preventDefault();\n                            onAction(Actions.SORT_FIELD, 'date');\n                          }}\n                        >\n                          Updated <time dateTime='2023-01-01'>X time ago</time>\n                        </Link> */}\n                        </CardMeta>\n                      }\n                      linkLabel='View more'\n                      linkTo={getDatasetPath(d)}\n                      title={\n                        <TextHighlight\n                          value={search}\n                          disabled={search.length < 3}\n                        >\n                          {d.name}\n                        </TextHighlight>\n                      }\n                      description={\n                        <TextHighlight\n                          value={search}\n                          disabled={search.length < 3}\n                        >\n                          {d.description}\n                        </TextHighlight>\n                      }\n                      imgSrc={d.media?.src}\n                      imgAlt={d.media?.alt}\n                      footerContent={\n                        <>\n                          {topics?.length ? (\n                            <CardTopicsList>\n                              <dt>Topics</dt>\n                              {topics.map((t) => {\n                                const path = `${DATASETS_PATH}?${\n                                  Actions.TAXONOMY\n                                }=${encodeURIComponent(\n                                  JSON.stringify({ Topics: [t.id] })\n                                )}`;\n                                return (\n                                  <dd key={t.id}>\n                                    <Pill\n                                      variation='achromic'\n                                      as={Link}\n                                      to={path}\n                                      onClick={(e) => {\n                                        e.preventDefault();\n                                        onAction(Actions.TAXONOMY_MULTISELECT, {\n                                          key: TAXONOMY_TOPICS,\n                                          value: t.id\n                                        });\n                                        browseControlsHeaderRef.current?.scrollIntoView();\n                                      }}\n                                    >\n                                      <TextHighlight\n                                        value={search}\n                                        disabled={search.length < 3}\n                                      >\n                                        {t.name}\n                                      </TextHighlight>\n                                    </Pill>\n                                  </dd>\n                                );\n                              })}\n                            </CardTopicsList>\n                          ) : null}\n                          <DatasetMenu dataset={d} />\n                        </>\n                      }\n                    />\n                  </li>\n                );\n              })}\n            </Cards>\n          ) : (\n            <EmptyState>\n              There are no datasets to show with the selected filters.\n            </EmptyState>\n          )}\n        </CatalogWrapper>\n      </Content>\n    </BrowseSection>\n  );\n}\n\nexport default DataCatalog;","import React, { useCallback, useState } from 'react';\nimport styled from 'styled-components';\nimport { visuallyDisabled } from '@devseed-ui/theme-provider';\nimport { Link } from 'react-router-dom';\nimport { DatasetData } from 'veda';\nimport {\n  DropMenu,\n  Dropdown,\n  DropMenuItem,\n  DropTitle\n} from '@devseed-ui/dropdown';\nimport {\n  CollecticonCode,\n  CollecticonCompass,\n  CollecticonEllipsisVertical,\n  CollecticonPage\n} from '@devseed-ui/collecticons';\nimport { Button } from '@devseed-ui/button';\n\nimport { getDatasetPath, getDatasetExplorePath } from '$utils/routes';\nimport { NotebookConnectModal } from '$components/common/notebook-connect';\nimport DropMenuItemButton from '$styles/drop-menu-item-button';\nimport { Tip } from '$components/common/tip';\n\nconst TriggerButton = styled(Button)`\n  margin-left: auto;\n`;\n\nconst DropMenuItemButtonDisable = styled(DropMenuItemButton)<{\n  visuallyDisabled: boolean;\n}>`\n  ${({ visuallyDisabled: v }) => v && visuallyDisabled()}\n`;\n\ninterface DatasetMenuProps {\n  dataset: DatasetData;\n}\n\nfunction DatasetMenu(props: DatasetMenuProps) {\n  const { dataset } = props;\n\n  const [revealed, setRevealed] = useState(false);\n  const close = useCallback(() => setRevealed(false), []);\n\n  const hasUsage = !!dataset.usage?.length;\n\n  return (\n    <>\n      <NotebookConnectModal\n        dataset={dataset}\n        revealed={revealed}\n        onClose={close}\n      />\n      <Dropdown\n        alignment='right'\n        direction='up'\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        triggerElement={({ className, ...rest }) => (\n          <TriggerButton\n            // @ts-expect-error achromic-text exists. The problem is bad typing in the UI library.\n            variation='achromic-text'\n            fitting='skinny'\n            size='small'\n            {...rest}\n          >\n            <CollecticonEllipsisVertical />\n          </TriggerButton>\n        )}\n      >\n        <DropTitle>Options</DropTitle>\n        <DropMenu>\n          <li>\n            <DropMenuItem\n              as={Link}\n              data-dropdown='click.close'\n              to={getDatasetPath(dataset)}\n            >\n              <CollecticonPage /> Learn more\n            </DropMenuItem>\n          </li>\n          <li>\n            <DropMenuItem\n              as={Link}\n              data-dropdown='click.close'\n              to={getDatasetExplorePath(dataset)}\n            >\n              <CollecticonCompass /> Explore data\n            </DropMenuItem>\n          </li>\n          <li>\n            <Tip\n              content='This dataset has no usage information'\n              disabled={hasUsage}\n            >\n              <DropMenuItemButtonDisable\n                onClick={() => setRevealed(true)}\n                visuallyDisabled={!hasUsage}\n              >\n                <CollecticonCode />\n                Access data\n              </DropMenuItemButtonDisable>\n            </Tip>\n          </li>\n        </DropMenu>\n      </Dropdown>\n    </>\n  );\n}\n\nexport default DatasetMenu;\n","import styled, { css } from 'styled-components';\nimport { DropMenuItem, DropMenuItemProps } from '@devseed-ui/dropdown';\nimport { themeVal } from '@devseed-ui/theme-provider';\n\ninterface DropMenuItemButtonProps extends DropMenuItemProps {\n  variation?:\n    | 'base'\n    | 'primary'\n    | 'secondary'\n    | 'danger'\n    | 'success'\n    | 'warning'\n    | 'info';\n}\n\nconst DropMenuItemButton = styled(DropMenuItem).attrs({\n  as: 'button',\n  'data-dropdown': 'click.close'\n})<DropMenuItemButtonProps>`\n  background: none;\n  border: none;\n  width: 100%;\n  cursor: pointer;\n  text-align: left;\n\n  ${(props) => renderVariation(props)}\n`;\n\nexport default DropMenuItemButton;\n\nfunction renderVariation(props: DropMenuItemButtonProps) {\n  const { variation = 'base', active } = props;\n\n  return css`\n    color: ${themeVal(`color.${variation}`)};\n\n    &:hover {\n      color: ${themeVal(`color.${variation}`)};\n      background-color: ${themeVal(`color.${variation}-50a`)};\n    }\n\n    /* Print & when prop is passed */\n    ${active && '&,'}\n    &.active {\n      background-color: ${themeVal(`color.${variation}-100a`)};\n    }\n\n    &:focus-visible {\n      outline-color: ${themeVal(`color.${variation}-200a`)};\n    }\n  `;\n}\n","import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { Taxonomy } from 'veda';\nimport SearchField from '$components/common/search-field';\nimport CheckableFilters, { OptionItem } from '$components/common/form/checkable-filter';\nimport { Actions, useBrowserControls } from '$components/common/browse-controls/use-browse-controls';\nimport { useSlidingStickyHeader, HEADER_TRANSITION_DURATION }  from '$utils/use-sliding-sticky-header';\n\nconst ControlsWrapper = styled.div<{ widthValue?: string; heightValue?: string; topValue: string }>`\n  min-width: 20rem;\n  width: ${props => props.widthValue ?? '20rem'};\n  position: sticky;\n  top: calc(${props => props.topValue} + 1rem);\n  height: ${props => props.heightValue};\n  transition: top ${HEADER_TRANSITION_DURATION}ms ease-out;\n`;\n\ninterface FiltersMenuProps extends ReturnType<typeof useBrowserControls> {\n  taxonomiesOptions: Taxonomy[];\n  allSelected: OptionItem[];\n  clearedTagItem?: OptionItem;\n  setClearedTagItem?: React.Dispatch<React.SetStateAction<OptionItem | undefined>>;\n  width?: string;\n  onChangeToFilters?: (item: OptionItem, action: 'add' | 'remove') => void;\n}\n\nexport default function FiltersControl(props: FiltersMenuProps) {\n  const {\n    allSelected,\n    onAction,\n    taxonomiesOptions,\n    search,\n    width,\n    onChangeToFilters,\n    clearedTagItem,\n    setClearedTagItem\n  } = props;\n\n  const controlsRef = useRef<HTMLDivElement>(null);\n  const [controlsHeight, setControlsHeight] =  useState<number>(0);\n  const { isHeaderHidden, wrapperHeight } = useSlidingStickyHeader();\n\n\n  const handleChanges = useCallback((item: OptionItem) => {\n    if(allSelected.some((selected) => selected.id == item.id && selected.taxonomy == item.taxonomy)) {\n      setClearedTagItem?.(undefined);\n      if(onChangeToFilters) onChangeToFilters(item, 'remove');\n    }\n    else {\n      setClearedTagItem?.(undefined);\n      if(onChangeToFilters) onChangeToFilters(item, 'add');\n    }\n  }, [allSelected, setClearedTagItem, onChangeToFilters]);\n\n  useEffect(() => {\n    if (!controlsRef.current) return;\n    \n    const height = controlsRef.current.offsetHeight;\n    setControlsHeight(height);\n    // Observe the height change of controls (from accordion folding)\n    const resizeObserver = new ResizeObserver(([entry]) => {\n      if (entry.borderBoxSize.length > 0) {\n        const borderBoxSize = entry.borderBoxSize[0];\n         // blockSize: For boxes with a horizontal writing-mode, this is the vertical dimension\n        setControlsHeight(borderBoxSize.blockSize);\n      }\n    });\n    resizeObserver.observe(controlsRef.current);\n    return () => resizeObserver.disconnect(); // clean up \n  }, [controlsRef]);\n\n\n  return (\n    <ControlsWrapper widthValue={width} heightValue={controlsHeight+'px'} topValue={isHeaderHidden? '0px': `${wrapperHeight}px`}>\n      <div ref={controlsRef}>\n        <SearchField\n          size='large'\n          placeholder='Search by title, description'\n          value={search ?? ''}\n          onChange={(v) => onAction(Actions.SEARCH, v)}\n        />\n        {\n          taxonomiesOptions.map((taxonomy) => {\n            const items = taxonomy.values.map((t) => ({...t, taxonomy: taxonomy.name}));\n            return (\n              <CheckableFilters \n                key={taxonomy.name}\n                items={items}\n                title={taxonomy.name}\n                onChanges={handleChanges}\n                globallySelected={allSelected}\n                tagItemCleared={{item: clearedTagItem, callback: setClearedTagItem}}\n              />\n            );\n          })\n        }\n      </div>\n    </ControlsWrapper>\n  );\n}\n","import React, { InputHTMLAttributes, useRef, useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport {\n  FormHelperMessage,\n  FormInput,\n  formSkinStylesProps\n} from '@devseed-ui/form';\nimport { Button } from '@devseed-ui/button';\nimport {\n  CollecticonDiscXmark,\n  CollecticonMagnifierLeft\n} from '@devseed-ui/collecticons';\nimport { themeVal } from '@devseed-ui/theme-provider';\n\nconst SearchFieldWrapper = styled.div`\n  display: flex;\n  flex-flow: column;\n  align-items: flex-end;\n  width: 100%;\n`;\n\ninterface SearchFieldMessageProps {\n  isOpen: boolean;\n  isFocused: boolean;\n}\n\nconst SearchFieldMessage = styled(FormHelperMessage)<SearchFieldMessageProps>`\n  line-height: 1.5rem;\n  transition: max-width 320ms ease-in-out, opacity 160ms ease-in-out 160ms;\n  white-space: nowrap;\n  max-width: 0;\n  opacity: 0;\n\n  ${({ isOpen }) =>\n    isOpen &&\n    css`\n      width: 100%;\n      max-width: 100%;\n    `}\n\n  ${({ isFocused }) =>\n    isFocused &&\n    css`\n      opacity: 1;\n    `}\n`;\n\nconst SearchFieldContainer = styled.div`\n  position: relative;\n  display: flex;\n  width: 100%;\n  background-color: ${themeVal('color.surface')};\n  ::before {\n    position: absolute;\n    inset: 0;\n    pointer-events: none;\n    display: block;\n    content: '';\n    border-radius: ${themeVal('shape.rounded')};\n    box-shadow: inset 0 0 0 1px ${themeVal('color.base')};\n  }\n  &:focus-within {\n    border-radius: ${themeVal('shape.rounded')};\n    outline-width: 0.25rem;\n    outline-color: ${themeVal('color.primary-200a')};\n    outline-style: solid;\n  }\n`;\n\nconst SearchFieldClearable = styled.div<{ isOpen: boolean }>`\n  display: flex;\n  overflow: hidden;\n  transition: max-width 320ms ease-in-out;\n  width: 100%;\n  ${({ isOpen }) =>\n    isOpen &&\n    css`\n      width: 100%;\n      max-width: 100%;\n    `}\n`;\n\nconst FormInputSearch = styled(FormInput)`\n  border: 0;\n  padding-left: 0;\n  padding-right: 0;\n  width: 100%;\n`;\n\ninterface SearchFieldProps\n  extends Omit<\n    InputHTMLAttributes<HTMLInputElement>,\n    'size' | 'onChange' | 'dangerouslySetInnerHTML'\n  > {\n  size: formSkinStylesProps['size'];\n  value: string;\n  onChange: (value: string) => void;\n  keepOpen?: boolean;\n}\n\nfunction SearchField(props: SearchFieldProps) {\n  const { value, onChange, keepOpen, size, ...rest } = props;\n\n  const fieldRef = useRef<HTMLInputElement>(null);\n  const [isFocused, setFocused] = useState(false);\n\n  const isOpen = isFocused || !!value.length || !!keepOpen;\n\n  return (\n    <SearchFieldWrapper className='search-field'>\n      <SearchFieldContainer>\n        <Button\n          size={size}\n          fitting='skinny'\n          onClick={() => {\n            fieldRef.current?.focus();\n            setFocused(true);\n          }}\n        >\n          <CollecticonMagnifierLeft meaningful title='Open search' />\n        </Button>\n        <SearchFieldClearable isOpen={isOpen}>\n          <FormInputSearch\n            ref={fieldRef}\n            {...rest}\n            size={size}\n            value={value}\n            onChange={(e) => onChange(e.target.value)}\n            onFocus={() => {\n              setFocused(true);\n            }}\n            onBlur={() => {\n              setFocused(false);\n            }}\n          />\n\n          {!!value.length && (\n            <Button\n              size={size}\n              fitting='skinny'\n              onClick={() => {\n                onChange('');\n              }}\n            >\n              <CollecticonDiscXmark meaningful title='Clear search' />\n            </Button>\n          )}\n        </SearchFieldClearable>\n      </SearchFieldContainer>\n      <SearchFieldMessage isOpen={isOpen} isFocused={isFocused}>\n        Minimum 3 characters\n      </SearchFieldMessage>\n    </SearchFieldWrapper>\n  );\n}\n\nexport default SearchField;\n","import React, {useState, useCallback, useEffect} from 'react';\nimport styled from 'styled-components';\nimport { FormGroupStructure, FormCheckableGroup,  FormCheckable} from '@devseed-ui/form';\nimport { CollecticonChevronDown, CollecticonChevronUp } from '@devseed-ui/collecticons';\nimport { Toolbar, ToolbarIconButton } from '@devseed-ui/toolbar';\nimport { themeVal } from '@devseed-ui/theme-provider';\nimport { variableBaseType, variableGlsp } from '$styles/variable-utils';\nimport { CardTitle } from '$components/common/card/styles';\n\n\nconst FilterMenu = styled.div`\n  border: 2px solid ${themeVal('color.base-200')};\n  border-radius: ${themeVal('shape.rounded')};\n  padding: 12px;\n  margin-bottom: 1.5rem;\n`;\n\nconst FilterTitle = styled.div`\n  display: flex;\n  justify-content: space-between;\n\n  #title-selected {\n    display: flex;\n    flex-direction: column;\n    gap: ${variableGlsp(0.1)};\n\n    ${CardTitle} {\n      font-size: ${variableBaseType('0.7rem')};\n    }\n  }\n\n  span {\n    font-size: 1rem;\n    color: ${themeVal('color.base-500')};\n  }\n`;\n\nconst Options = styled(FormCheckableGroup)`\n  padding-top: 6px;\n\n  div {\n    width: 100%;\n    padding: 4px 8px;\n  }\n  \n  .checked {\n    background-color: ${themeVal('color.primary-100')};\n    outline-width: 1px;\n    outline-color: ${themeVal('color.primary-300')};\n    outline-style: solid;\n  }\n`;\n\nconst Option = styled(FormCheckable)`\n  font-size: ${variableBaseType('0.6rem')};\n  display: flex;\n  align-items: center;\n`;\n\nconst Toggle = styled(Toolbar)`\n  align-items: start;\n`;\n\nconst ToggleIconButton = styled(ToolbarIconButton)`\n  background-color: inherit;\n`;\n\ninterface CheckableFiltersProps {\n  title: string;\n  items: OptionItem[];\n  onChanges: (items: OptionItem) => void;\n  globallySelected: OptionItem[]; // Selected values across all filters\n  tagItemCleared?: { // An option item that was removed globally\n    item?: OptionItem;\n    callback?: React.Dispatch<React.SetStateAction<any>>;\n  }\n}\n\nexport interface OptionItem {\n  taxonomy: string;\n  id: string;\n  name: string;\n}\n\nexport default function CheckableFilters(props: CheckableFiltersProps) {\n  const {\n    items,\n    title,\n    onChanges,\n    globallySelected,\n    tagItemCleared\n  } = props;\n  const [show, setShow] = useState<boolean>(true);\n  const [count, setCount] = useState<number>(0);\n  const [selected, setSelected] = useState<OptionItem[]>([]);\n\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const idInfo = e.target.id.split('&&');\n    const taxonomy = idInfo[0];\n    const id = idInfo[1];\n\n    const optionItem = {\n      taxonomy: taxonomy,\n      name: e.target.name,\n      id: id,\n    };\n\n    if(e.target.checked) {\n      setCount((prevValue) => prevValue + 1);\n      setSelected([...selected, optionItem]); // Local\n      onChanges(optionItem); // Global to filters-control\n    }\n    else {\n      setCount((prevValue) => prevValue - 1);\n      setSelected(selected.filter((item) => item.id !== e.target.id));\n      onChanges(optionItem);\n    }\n  }, [selected]);\n\n  const isChecked = (item: OptionItem) => globallySelected.some((selected) => selected.id == item.id && selected.taxonomy == item.taxonomy);\n\n  useEffect(() => {\n    if(!globallySelected || globallySelected.length === 0) {\n      setCount(0);\n    }\n    \n    if(globallySelected.length > 0) {\n      setSelected(selected.filter((item) => item.id));\n    } else {\n      setSelected([]);\n    }\n  }, [globallySelected]);\n\n  useEffect(() => {\n    if(tagItemCleared?.item && globallySelected.length > 0) {\n      setCount((prevValue) => prevValue - 1);\n      setSelected(selected.filter((item) => item.id !== tagItemCleared.item?.id));\n      tagItemCleared?.callback?.(undefined);\n    }\n  }, [tagItemCleared, globallySelected]);\n\n  return (\n    <FilterMenu>\n      <FilterTitle>\n        <div id='title-selected'>\n          <CardTitle>{title}</CardTitle>\n          {\n            count > 0 && (\n              <span>{count} selected</span> \n            )\n          }\n        </div>\n        <Toggle size='small'>\n          <ToggleIconButton\n            active={show}\n            onClick={() => setShow(!show)}\n          >\n            {\n              show ? \n              <CollecticonChevronUp />\n              : \n              <CollecticonChevronDown />\n            }\n          </ToggleIconButton>\n        </Toggle>\n      </FilterTitle>\n      {\n        show && (\n          <FormGroupStructure label='' id=''>\n            <Options>\n              {\n                items.map((item) => {\n                  const checked = isChecked(item);\n                  return (\n                    <div className={checked ? 'checked' : 'unchecked'} key={item.id}>\n                      <Option\n                        key={item.id}\n                        value={item.name}\n                        onChange={(e) => handleChange(e)}\n                        checked={checked}\n                        type='checkbox'\n                        name={item.name}\n                        id={`${item.taxonomy}&&${item.id}`}\n                      >\n                        {item.name}\n                      </Option>\n                    </div>\n                  );\n                })\n              }\n            </Options>\n          </FormGroupStructure>\n        )\n      }\n    </FilterMenu>\n  );\n}","import styled from 'styled-components';\nimport {\n  glsp,\n  listReset,\n  media,\n  multiply,\n  themeVal,\n  visuallyHidden\n} from '@devseed-ui/theme-provider';\nimport { Overline } from '@devseed-ui/typography';\nimport { VerticalDivider } from '@devseed-ui/toolbar';\nimport { variableGlsp } from '$styles/variable-utils';\nimport { VarHeading } from '$styles/variable-components';\n\nexport const CardBlank = styled.article`\n  position: relative;\n  display: flex;\n  flex-flow: column nowrap;\n  border-radius: ${multiply(themeVal('shape.rounded'), 2)};\n  box-shadow: ${themeVal('boxShadow.elevationD')};\n  height: 100%;\n  overflow: hidden;\n  transition: all 0.24s ease-in-out 0s;\n`;\n\nexport const CardList = styled.ol`\n  ${listReset()}\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n`;\n\nexport const CardListGrid = styled.ol`\n  ${listReset()}\n  grid-column: 1 / -1;\n  display: grid;\n  gap: ${variableGlsp()};\n  grid-template-columns: repeat(1, 1fr);\n\n  ${media.mediumUp`\n    grid-template-columns: repeat(2, 1fr);\n  `}\n\n  ${media.largeUp`\n    grid-template-columns: repeat(3, 1fr);\n  `}\n\n  > li {\n    min-width: 0;\n  }\n`;\n\nexport const CardHeader = styled.header`\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  align-items: flex-end;\n  padding: ${variableGlsp()};\n  gap: ${variableGlsp()};\n`;\n\nexport const CardHeadline = styled.div`\n  display: flex;\n  flex-flow: column nowrap;\n  gap: ${glsp(0.25)};\n`;\n\nexport const CardActions = styled.div`\n  /* styled-component */\n`;\n\nexport const CardTitle = styled(VarHeading).attrs({\n  as: 'h3',\n  size: 'small'\n})`\n  /* styled-component */\n`;\n\nexport const CardOverline = styled(Overline)`\n  order: -1;\n  color: ${themeVal('color.base-400a')};\n\n  > * {\n    line-height: inherit;\n  }\n\n  i {\n    ${visuallyHidden()}\n  }\n`;\n\nexport const CardMeta = styled.div`\n  display: flex;\n  gap: ${glsp(0.25)};\n\n  a {\n    color: inherit;\n    pointer-events: all;\n\n    &,\n    &:visited {\n      text-decoration: none;\n      color: inherit;\n    }\n\n    &:hover {\n      opacity: 0.64;\n    }\n  }\n\n  > ${/* sc-selector */ VerticalDivider}:last-child {\n    display: none;\n  }\n\n  > ${/* sc-selector */ VerticalDivider}:first-child {\n    display: none;\n  }\n`;\n\nexport const CardBody = styled.div`\n  padding: ${variableGlsp()};\n\n  &:not(:first-child) {\n    padding-top: 0;\n    margin-top: ${variableGlsp(-0.5)};\n  }\n`;\n\nexport const CardFooter = styled.div`\n  display: flex;\n  flex-flow: row nowrap;\n  gap: ${variableGlsp(0.5)};\n  padding: ${variableGlsp()};\n\n  &:not(:first-child) {\n    padding-top: 0;\n    margin-top: ${variableGlsp(-0.5)};\n  }\n\n  button {\n    pointer-events: all;\n  }\n`;\n\nexport const CardTopicsList = styled.dl`\n  display: flex;\n  gap: ${variableGlsp(0.25)};\n  max-width: 100%;\n  width: 100%;\n  overflow: hidden;\n  mask-image: linear-gradient(\n    to right,\n    black calc(100% - 3rem),\n    transparent 100%\n  );\n\n  > dt {\n    ${visuallyHidden()}\n  }\n`;","import { useCallback } from 'react';\nimport { useNavigate } from 'react-router';\nimport useQsStateCreator from 'qs-state-hook';\nimport { set, omit } from 'lodash';\n\nexport enum Actions {\n  CLEAR = 'clear',\n  SEARCH = 'search',\n  SORT_FIELD = 'sfield',\n  SORT_DIR = 'sdir',\n  TAXONOMY = 'taxonomy',\n  TAXONOMY_MULTISELECT = 'taxonomy_multiselect',\n}\n\nexport type BrowserControlsAction = (what: Actions, value?: any) => void;\n\nexport interface FilterOption {\n  id: string;\n  name: string;\n}\n\nexport interface TaxonomyFilterOption {\n  taxonomyType: string;\n  value: string;\n  exclusion?: string;\n}\n\ninterface BrowseControlsHookParams {\n  sortOptions: FilterOption[];\n}\n\nexport const sortDirOptions: FilterOption[] = [\n  {\n    id: 'asc',\n    name: 'Ascending'\n  },\n  {\n    id: 'desc',\n    name: 'Descending'\n  }\n];\n\nexport const optionAll = {\n  id: 'all',\n  name: 'All'\n};\n\nexport function useBrowserControls({ sortOptions }: BrowseControlsHookParams) {\n  // Setup Qs State to store data in the url's query string\n  // react-router function to get the navigation.\n  const navigate = useNavigate();\n  const useQsState = useQsStateCreator({\n    commit: navigate\n  });\n\n  const [sortField, setSortField] = useQsState.memo(\n    {\n      key: Actions.SORT_FIELD,\n      // If pubDate exists, default sorting to this\n      default: sortOptions.find((o) => o.id === 'pubDate')?.id || sortOptions[0]?.id,\n      validator: sortOptions.map((d) => d.id)\n    },\n    [sortOptions]\n  );\n\n  const [sortDir, setSortDir] = useQsState.memo(\n    {\n      key: Actions.SORT_DIR,\n      default: sortDirOptions[0].id,\n      validator: sortDirOptions.map((d) => d.id)\n    },\n    []\n  );\n\n  const [search, setSearch] = useQsState.memo(\n    {\n      key: Actions.SEARCH,\n      default: ''\n    },\n    []\n  );\n\n  const [taxonomies, setTaxonomies] = useQsState.memo<Record<string, string | string[]>>(\n    {\n      key: Actions.TAXONOMY,\n      default: {},\n      dehydrator: (v) => JSON.stringify(v), // dehydrator defines how a value is stored in the url\n      hydrator: (v) => (v ? JSON.parse(v) : {}) // hydrator defines how a value is read from the url\n    },\n    []\n  );\n\n  const onAction = useCallback<BrowserControlsAction>(\n    (what, value) => {\n      switch (what) {\n        case Actions.CLEAR:\n          setSearch('');\n          setTaxonomies({});\n          break;\n        case Actions.SEARCH:\n          setSearch(value);\n          break;\n        case Actions.SORT_FIELD:\n          setSortField(value);\n          break;\n        case Actions.SORT_DIR:\n          setSortDir(value);\n          break;\n        case Actions.TAXONOMY:\n          {\n            const { key, value: val } = value;\n            if (val === optionAll.id) {\n              setTaxonomies(omit(taxonomies, key));\n            } else {\n              setTaxonomies(set({ ...taxonomies }, key, val));\n            }\n          }\n          break;\n        case Actions.TAXONOMY_MULTISELECT:\n          {\n            const { key, value: val } = value;\n            if (taxonomies && (key in taxonomies)) { // If taxonomy group currently present\n              const taxonomyGroupValues = taxonomies[key] instanceof Array ? (taxonomies[key] as string[]) : [taxonomies[key]];\n\n              if (taxonomyGroupValues.includes(val)) { // If val exists, then remove\n                const updatedValues = taxonomyGroupValues.filter((x) => x !== val);\n                updatedValues.length ? setTaxonomies(set({ ...taxonomies }, key, updatedValues)) : setTaxonomies(omit(taxonomies, key));\n              } else { // else add\n                taxonomyGroupValues.push(val);\n                setTaxonomies(taxonomies);\n              }\n            } else { // Taxonomy group currently not present\n              setTaxonomies(set({ ...taxonomies }, key, [val]));\n            }\n          }\n          break;\n      }\n      \n    },\n    [setSortField, setSortDir, taxonomies, setTaxonomies, setSearch]\n  );\n\n  return {\n    search,\n    sortField,\n    sortDir,\n    taxonomies,\n    onAction\n  };\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { glsp, themeVal } from '@devseed-ui/theme-provider';\nimport {\n  CollecticonXmarkSmall\n} from '@devseed-ui/collecticons';\nimport { variableBaseType } from '$styles/variable-utils';\nimport { OptionItem } from '$components/common/form/checkable-filter';\n\ninterface FilterTagProps {\n  item: OptionItem;\n  onClick: (item: OptionItem) => void;\n}\n\nconst Tag = styled.span`\n  display: flex;\n  width: fit-content;\n  justify-content: center;\n  background-color: ${themeVal('color.base-50')};\n  margin: ${glsp(0.25)};\n  padding: 6px 0 6px 6px;\n  outline-width: 1px;\n  outline-color: ${themeVal('color.base-200')};\n  outline-style: solid;\n  border-radius: 2px;\n  font-size: ${variableBaseType('0.6rem')};\n\n  button {\n    background: none;\n    border: none;\n    outline: none;\n    box-shadow: none;\n    display: flex;\n    align-items: center;\n  }\n`;\n\nexport default function FilterTag(props: FilterTagProps) {\n  const {item, onClick} = props;\n\n  const handleClick = () => {\n    onClick(item);\n  };\n  \n  return (\n    <Tag>\n      {item.name}\n      <button type='button' onClick={handleClick}>\n        <CollecticonXmarkSmall />\n      </button>\n    </Tag>\n  );\n}","import { DatasetData } from 'veda';\nimport { optionAll } from '$components/common/browse-controls/use-browse-controls';\nimport { TAXONOMY_TOPICS } from '$utils/veda-data';\n\nconst prepareDatasets = (\n  data: DatasetData[],\n  options: {\n    search: string;\n    taxonomies: Record<string, string | string[]> | null;\n    sortField: string | null;\n    sortDir: string | null;\n    filterLayers: boolean | null;\n  }\n) => {\n  const { sortField, sortDir, search, taxonomies, filterLayers } = options;\n  let filtered = [...data];\n\n  // Does the free text search appear in specific fields?\n  if (search.length >= 3) {\n    const searchLower = search.toLowerCase();\n    // Function to check if searchLower is included in any of the string fields\n    const includesSearchLower = (str) => str.toLowerCase().includes(searchLower);\n    // Function to determine if a layer matches the search criteria\n    const layerMatchesSearch = (layer) => \n      includesSearchLower(layer.stacCol) ||\n      includesSearchLower(layer.name) ||\n      includesSearchLower(layer.parentDataset.name) ||\n      includesSearchLower(layer.parentDataset.id) ||\n      includesSearchLower(layer.description);\n\n    filtered = filtered\n      .filter((d) => {\n        // Pre-calculate lowercased versions to use in comparisons\n        const idLower = d.id.toLowerCase();\n        const nameLower = d.name.toLowerCase();\n        const descriptionLower = d.description.toLowerCase();\n        const topicsTaxonomy = d.taxonomy.find((t) => t.name === TAXONOMY_TOPICS);\n        // Check if any of the conditions for including the item are met\n        return (\n          idLower.includes(searchLower) ||\n          nameLower.includes(searchLower) ||\n          descriptionLower.includes(searchLower) ||\n          d.layers.some(layerMatchesSearch) ||\n          topicsTaxonomy?.values.some((t) => includesSearchLower(t.name))\n        );\n      });\n\n      if (filterLayers)\n        filtered = filtered.map((d) => ({\n          ...d,\n          layers: d.layers.filter(layerMatchesSearch),\n        }));\n  }\n\n  taxonomies &&\n    Object.entries(taxonomies).forEach(([name, value]) => {\n      if (!value.includes(optionAll.id)) {\n        filtered = filtered.filter((d) =>\n          d.taxonomy.some(\n            (t) => t.name === name && t.values.some((v) => value.includes(v.id))\n          )\n        );\n      }\n    });\n\n  sortField &&\n    /* eslint-disable-next-line fp/no-mutating-methods */\n    filtered.sort((a, b) => {\n      if (!a[sortField]) return Infinity;\n\n      return a[sortField]?.localeCompare(b[sortField]);\n    });\n\n  if (sortDir === 'desc') {\n    /* eslint-disable-next-line fp/no-mutating-methods */\n    filtered.reverse();\n  }\n\n  return filtered;\n};\n\nexport default prepareDatasets;","import React, { ComponentProps, ReactNode } from 'react';\n\nimport styled from 'styled-components';\nimport { glsp, media, themeVal } from '@devseed-ui/theme-provider';\n\nimport { variableGlsp } from '$styles/variable-utils';\nimport { VarHeading, VarLead, VarProse } from '$styles/variable-components';\nimport Constrainer from '$styles/constrainer';\nimport Hug from '$styles/hug';\n\nexport const FoldBase = styled.div`\n  padding-top: ${variableGlsp(2)};\n  padding-bottom: ${variableGlsp(2)};\n\n  & + & {\n    padding-top: 0;\n  }\n`;\n\nexport const FoldGrid = styled(Hug)`\n  padding-top: ${variableGlsp(2)};\n  padding-bottom: ${variableGlsp(2)};\n\n  & + &,\n  & + ${FoldBase} {\n    padding-top: 0;\n  }\n`;\n\nconst FoldInner = styled(Constrainer)`\n  /* styled-component */\n`;\n\nexport const FoldHeader = styled.div`\n  grid-column: 1 / -1;\n  display: flex;\n  flex-flow: column nowrap;\n  gap: ${variableGlsp()};\n\n  ${media.largeUp`\n    flex-flow: row nowrap;\n    justify-content: space-between;\n    align-items: flex-end;\n  `}\n\n  > a {\n    flex-shrink: 0;\n  }\n`;\n\nexport const FoldHeadline = styled.div`\n  p {\n    margin: 1rem 0 0 0;\n  }\n`;\n\nexport const FoldHeadActions = styled.div`\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  gap: ${variableGlsp(0.5)};\n`;\n\nexport const FoldHGroup = styled.div`\n  gap: ${variableGlsp(0.125)};\n`;\n\nexport const FoldTitle = styled(VarHeading).attrs({\n  as: 'h2',\n  size: 'xlarge'\n})`\n  column-span: all;\n  max-width: 52rem;\n  display: flex;\n  flex-direction: column;\n  gap: calc(${glsp()} - ${glsp(0.25)});\n\n  &::before {\n    content: '';\n    width: ${glsp(2)};\n    height: ${glsp(0.25)};\n    border-radius: ${themeVal('shape.rounded')};\n    background: ${themeVal('color.primary')};\n  }\n`;\n\nexport const FoldLead = styled(VarLead)`\n  color: inherit;\n`;\n\nexport const FoldBody = styled.div`\n  grid-column: 1 / -1;\n  display: flex;\n  flex-flow: column nowrap;\n  gap: ${variableGlsp()};\n`;\n\nconst Content = styled(VarProse)`\n  grid-column: 1 / span 4;\n\n  ${media.mediumUp`\n    grid-column: 2 / span 6;\n  `}\n\n  ${media.largeUp`\n    grid-column: 3 / span 8;\n  `}\n`;\n\nfunction FoldComponent(\n  props: ComponentProps<typeof FoldBase> & { children: ReactNode }\n) {\n  const { children, ...rest } = props;\n\n  return (\n    <FoldBase {...rest}>\n      <FoldInner>{children}</FoldInner>\n    </FoldBase>\n  );\n}\n\nexport const Fold = styled(FoldComponent)`\n  /* Convert to styled-component: https://styled-components.com/docs/advanced#caveat */\n`;\n\nexport function FoldProse(props: { children: ReactNode }) {\n  const { children } = props;\n\n  return (\n    <FoldBase>\n      <FoldInner>\n        <Content>{children}</Content>\n      </FoldInner>\n    </FoldBase>\n  );\n}\n","import styled from 'styled-components';\nimport { media, themeVal } from '@devseed-ui/theme-provider';\nimport { variableGlsp } from './variable-utils';\n\nconst Constrainer = styled.div`\n  display: grid;\n  gap: ${variableGlsp()};\n  grid-template-columns: repeat(4, 1fr);\n  width: 100%;\n  max-width: ${themeVal('layout.max')};\n  margin: 0 auto;\n  padding-left: ${variableGlsp()};\n  padding-right: ${variableGlsp()};\n\n  ${media.mediumUp`\n    grid-template-columns: repeat(8, 1fr);\n  `}\n\n  ${media.largeUp`\n    grid-template-columns: repeat(12, 1fr);\n  `}\n`;\n\nexport default Constrainer;\n","import React, { MouseEventHandler } from 'react';\nimport styled, { css } from 'styled-components';\nimport { Link } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport { CollecticonExpandTopRight } from '@devseed-ui/collecticons';\n\nimport {\n  glsp,\n  media,\n  multiply,\n  themeVal,\n  listReset,\n} from '@devseed-ui/theme-provider';\nimport { CardBody, CardBlank, CardHeader, CardHeadline, CardTitle, CardOverline } from './styles';\nimport HorizontalInfoCard, { HorizontalCardStyles } from './horizontal-info-card';\nimport { variableBaseType, variableGlsp } from '$styles/variable-utils';\n\nimport { ElementInteractive } from '$components/common/element-interactive';\nimport { Figure } from '$components/common/figure';\nimport { getLinkProps } from '$utils/url';\n\ntype CardType = 'classic' | 'cover' | 'featured' | 'horizontal-info';\n\ninterface CardItemProps {\n  isStateFocus?: boolean;\n  isStateOver?: boolean;\n  isStateActive?: boolean;\n  cardType?: CardType;\n}\n\n/**\n  @NOTE: CardList & CardFooter have been moved over to /common/card/styles and has modified styles \n  These styles are used in GHG instance, so we leave these for now. We should move these styles to GHG instances\n  since these styles are not used by UI instance anymore.\n*/\nexport const CardList = styled.ol`\n  ${listReset()}\n  grid-column: 1 / -1;\n  display: grid;\n  gap: ${variableGlsp()};\n  grid-template-columns: repeat(1, 1fr);\n\n  ${media.mediumUp`\n    grid-template-columns: repeat(2, 1fr);\n  `}\n\n  ${media.largeUp`\n    grid-template-columns: repeat(3, 1fr);\n  `}\n\n  > li {\n    min-width: 0;\n  }\n`;\n\nexport const CardFooter = styled.div`\n  display: flex;\n  flex-flow: row nowrap;\n  gap: ${variableGlsp(0.5)};\n  padding: ${variableGlsp()};\n\n  &:not(:first-child) {\n    padding-top: 0;\n    margin-top: ${variableGlsp(-0.5)};\n  }\n\n  button {\n    pointer-events: all;\n  }\n`;\n\nfunction renderCardType({ cardType }: CardItemProps) {\n  switch (cardType) {\n    case 'cover':\n      return css`\n        padding-top: ${variableGlsp(2)};\n        background: ${themeVal('color.base-400')};\n        color: ${themeVal('color.surface')};\n        justify-content: flex-end;\n\n        ${CardFigure} {\n          position: absolute;\n          inset: 0;\n          z-index: -1;\n          background: ${themeVal('color.base-400')};\n        }\n\n        ${CardOverline} {\n          color: ${themeVal('color.surface-400a')};\n        }\n      `;\n    case 'featured':\n      return css`\n        padding-top: ${variableGlsp()};\n        color: ${themeVal('color.surface')};\n        justify-content: flex-end;\n        min-height: 16rem;\n\n        ${media.mediumUp`\n          min-height: 28rem;\n        `}\n\n        ${CardFigure} {\n          position: absolute;\n          inset: 0;\n          z-index: -1;\n          background: ${themeVal('color.base-400')};\n        }\n\n        ${CardTitle} {\n          font-size: ${variableBaseType('1.5rem')};\n          max-width: 52rem;\n        }\n\n        ${CardOverline} {\n          color: ${themeVal('color.surface-400a')};\n        }\n\n        ${CardBody} {\n          font-size: ${variableBaseType('1rem')};\n          max-width: 52rem;\n        }\n      `;\n    case 'horizontal-info':\n      return HorizontalCardStyles;\n    default:\n      return css`\n        background: transparent;\n      `;\n  }\n}\n\nexport const CardItem = styled(CardBlank)<CardItemProps>`\n  ${renderCardType}\n\n  ${({ isStateFocus }) =>\n    isStateFocus &&\n    css`\n      box-shadow: ${themeVal('boxShadow.elevationC')};\n      transform: translate(0, 0.125rem);\n    `}\n  ${({ isStateOver }) =>\n    isStateOver &&\n    css`\n      box-shadow: ${themeVal('boxShadow.elevationC')};\n      transform: translate(0, 0.125rem);\n    `}\n  ${({ isStateActive }) =>\n    isStateActive &&\n    css`\n      box-shadow: ${themeVal('boxShadow.elevationB')};\n      transform: translate(0, 0.125rem);\n    `}\n`;\n\nconst CardLabel = styled.span`\n  position: absolute;\n  z-index: 1;\n  top: ${variableGlsp()};\n  right: ${variableGlsp()};\n  display: inline-block;\n  vertical-align: top;\n  color: ${themeVal('color.surface')};\n  border-radius: ${themeVal('shape.ellipsoid')};\n  padding: ${glsp(0.125, 0.5)};\n  background: ${themeVal('color.base-400a')};\n  pointer-events: auto;\n  transition: all 0.24s ease 0s;\n\n  &,\n  &:visited {\n    text-decoration: none;\n  }\n\n  &:hover {\n    opacity: 0.64;\n  }\n`;\n\n\nconst CardFigure = styled(Figure)`\n  order: -1;\n\n  img {\n    height: 100%;\n    width: 100%;\n    object-fit: cover;\n    mix-blend-mode: multiply;\n  }\n`;\n\nconst ExternalLinkMark = styled.div`\n  display: flex;\n  align-items: center;\n  position: absolute;\n  top: ${variableGlsp(0.25)};\n  right: ${variableGlsp(0.25)};\n  padding: ${variableGlsp(0.125)} ${variableGlsp(0.25)};\n  background-color: ${themeVal('color.primary')};\n  color: ${themeVal('color.surface')};\n  text-transform: none;\n  border-radius: calc(\n    ${multiply(themeVal('shape.rounded'), 2)} - ${variableGlsp(0.125)}\n  );\n  z-index: 1;\n`;\n\nconst FlagText = styled.div`\n  display: inline;\n  font-weight: bold;\n  font-size: 0.825rem;\n  margin-right: ${variableGlsp(0.25)};\n`;\n\nexport function ExternalLinkFlag() {\n  return (\n    <ExternalLinkMark>\n      <FlagText>External Link</FlagText>\n      <CollecticonExpandTopRight size='small' meaningful={false} />\n    </ExternalLinkMark>\n  );\n}\n\nexport interface CardComponentProps {\n  title: JSX.Element | string;\n  linkLabel: string;\n  linkTo: string;\n  className?: string;\n  cardType?: CardType;\n  description?: JSX.Element | string;\n  date?: Date;\n  overline?: JSX.Element;\n  imgSrc?: string;\n  imgAlt?: string;\n  parentTo?: string;\n  tagLabels?: string[];\n  footerContent?: JSX.Element;\n  onCardClickCapture?: MouseEventHandler;\n  onLinkClick?: MouseEventHandler;\n}\n\nfunction CardComponent(props: CardComponentProps) {\n  const {\n    className,\n    title,\n    cardType,\n    description,\n    linkLabel,\n    linkTo,\n    date,\n    overline,\n    imgSrc,\n    imgAlt,\n    tagLabels,\n    parentTo,\n    footerContent,\n    onCardClickCapture,\n    onLinkClick\n  } = props;\n\n  const isExternalLink = /^https?:\\/\\//.test(linkTo);\n  const linkProps = getLinkProps(linkTo, Link, onLinkClick);\n\n\n  return (\n    <ElementInteractive\n      as={CardItem}\n      cardType={cardType}\n      className={className}\n      linkLabel={linkLabel || 'View more'}\n      linkProps={linkProps}\n      onClickCapture={onCardClickCapture}\n    >\n      {\n        cardType !== 'horizontal-info' && (\n          <>\n            <CardHeader>\n              <CardHeadline>\n                <CardTitle>{title}</CardTitle>\n                <CardOverline as='div'>\n                  {isExternalLink && <ExternalLinkFlag />}\n                  {!isExternalLink && tagLabels && parentTo && (\n                    tagLabels.map((label) => (\n                      <CardLabel as={Link} to={parentTo} key={label}>\n                        {label}\n                      </CardLabel>\n                    ))\n                  )}\n                  {date ? (\n                    <>\n                      published on{' '}\n                      <time dateTime={format(date, 'yyyy-MM-dd')}>\n                        {format(date, 'MMM d, yyyy')}\n                      </time>\n                    </>\n                  ) : (\n                    overline\n                  )}\n                </CardOverline>\n              </CardHeadline>\n            </CardHeader>\n            {description && (\n              <CardBody>\n                <p>{description}</p>\n              </CardBody>\n            )}\n            {footerContent && <CardFooter>{footerContent}</CardFooter>}\n            {imgSrc && (\n              <CardFigure>\n                <img src={imgSrc} alt={imgAlt} loading='lazy' />\n              </CardFigure>\n            )}\n          </>\n        )\n      } \n      {\n        cardType === 'horizontal-info' && (\n          <HorizontalInfoCard \n            title={title}\n            description={description}\n            imgSrc={imgSrc}\n            imgAlt={imgAlt}\n            tagLabels={tagLabels}\n          />\n        )\n      }\n    </ElementInteractive>\n  );\n}\n\nexport const Card = styled(CardComponent)`\n  /* Convert to styled-component: https://styled-components.com/docs/advanced#caveat */\n`;\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport {\n  glsp,\n  themeVal,\n} from '@devseed-ui/theme-provider';\nimport { CardTitle } from './styles';\nimport { variableBaseType } from '$styles/variable-utils';\nimport { Pill } from '$styles/pill';\n\nconst HorizontalCard = styled.div`\n  display: flex;\n  height: inherit;\n`;\n\nconst CardImage = styled.div`\n  min-width: 10rem;\n  width: 10rem;\n  height: 100%;\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n`;\n\nconst CardContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 1.5rem 1rem;\n`;\n\nexport const HorizontalCardStyles = css`\n  height: 10rem;\n  color: ${themeVal('color.base-800')};\n\n  ${CardTitle} {\n    font-size: ${variableBaseType('0.7rem')};\n  }\n\n  #description {\n    font-size: ${variableBaseType('0.6rem')};\n    height: 3rem;\n    margin: 0.5rem 0;\n    overflow: hidden;\n    text-overflow: ellipsis;\n\n    /* stylelint-disable-next-line value-no-vendor-prefix */\n    display: -webkit-box;\n    -webkit-line-clamp: 2; /* number of lines to show */\n            line-clamp: 2;\n  \n    /* stylelint-disable-next-line property-no-vendor-prefix */\n    -webkit-box-orient: vertical;\n  }\n\n  #tags {\n    display: flex;\n    gap: ${glsp(0.5)};\n  }\n`;\n\ninterface Props {\n  title: JSX.Element | string;\n  description?: JSX.Element | string;\n  imgSrc?: string;\n  imgAlt?: string;\n  tagLabels?: string[];\n}\n\nexport default function HorizontalInfoCard(props: Props) {\n    const {\n    title,\n    description,\n    imgSrc,\n    imgAlt,\n    tagLabels,\n  } = props;\n\n  return (\n    <HorizontalCard>\n      <CardImage>\n        <img src={imgSrc} alt={imgAlt} loading='lazy' />\n      </CardImage>\n      <CardContent>\n        <CardTitle>{title}</CardTitle>\n        <div id='description'>\n          <p>{description}</p>\n        </div>\n        <div id='tags'>\n          {\n            tagLabels && (\n              tagLabels.map((label) => (\n                <Pill variation='primary' key={label}>\n                  {label}\n                </Pill>\n              ))\n            )\n          }\n        </div>\n      </CardContent>\n    </HorizontalCard>\n  );\n}","import styled, { css } from 'styled-components';\nimport { glsp, themeVal } from '@devseed-ui/theme-provider';\n\nconst renderPillVariation = ({ variation }: PillProps) => {\n  switch (variation) {\n    case 'achromic':\n      return css`\n        color: ${themeVal('color.surface')};\n        background: ${themeVal('color.surface-100a')};\n      `;\n    case 'warning':\n      return css`\n        color: ${themeVal('color.danger-500')};\n        background: ${themeVal('color.danger-200a')};\n      `;\n    case 'primary':\n    default:\n      return css`\n        color: ${themeVal('color.primary')};\n        background: ${themeVal('color.primary-100a')};\n      `;\n  }\n};\n\ninterface PillProps {\n  variation?: 'primary' | 'achromic' | 'warning';\n}\nexport const Pill = styled.span<PillProps>`\n  display: inline-flex;\n  vertical-align: top;\n  border-radius: ${themeVal('shape.ellipsoid')};\n  padding: ${glsp(0.125, 0.75)};\n  transition: all 0.24s ease 0s;\n  font-size: 0.75rem;\n  line-height: 1.25rem;\n  font-weight: ${themeVal('type.base.bold')};\n  white-space: nowrap;\n\n  /* stylelint-disable-next-line selector-type-no-unknown */\n  ${renderPillVariation}\n\n  :is(a) {\n    pointer-events: auto;\n\n    &,\n    &:visited {\n      text-decoration: none;\n    }\n\n    &:hover {\n      opacity: 0.64;\n    }\n  }\n`;\n","import React, { useCallback, useState } from 'react';\nimport T from 'prop-types';\nimport styled from 'styled-components';\n\nconst InteractiveLink = styled.a`\n  position: absolute;\n  inset: 0;\n  z-index: -1;\n  pointer-events: auto;\n  font-size: 0;\n  margin: 0;\n`;\n\nexport const Wrapper = styled.div`\n  position: relative;\n  z-index: 1;\n\n  > *:not(a) {\n    pointer-events: none;\n  }\n`;\n\n/**\n * The ElementInteractive allows you to create a link with actions \"inside\" it.\n *\n * The most common use case is to have a card, or a list of items where the\n * whole item is clickable but there are actions (like buttons) inside it. Since\n * it is not allowed to have links within links, the ElementInteractive renders\n * an invisible link that takes up the whole element. In this way it is possible\n * to style the element in response to interactive events.\n *\n * The ElementInteractive requires a styled component to be passed through the\n * `as` property. This element must have the style specified in the example\n * below, and can implement the following props for styling:\n *\n * @example\n * const WrapperElement = styled.article`\n *   position: relative;\n *\n *   > *:not(a) {\n *     pointer-events: none;\n *   }\n *\n *   ${({ isStateFocus }) => isStateFocus && css``}\n *   ${({ isStateOver }) => isStateOver && css``}\n *   ${({ isStateActive }) => isStateActive && css``}\n * `;\n *\n *  ⚠️ IMPORTANT:\n *  The `> *:not(a) { ... }` is needed to ensure that the link over the elements\n *  works properly.\n *  However since we are removing the pointer events from all elements, they\n *  need to be added again to each element that needs to be interacted with,\n *  be it a Link, Button, etc,\n *\n * It is also required to pass a label to be used as the link content (using\n * `linkLabel`). This value is hidden from view.\n * Additional link properties (like `href`, or even a replacement styled link)\n * can be passed through `linkProps`\n *\n * @example\n * <ElementInteractive\n *   as={WrapperElement}\n *   linkLabel='View more'\n *   linkProps={{\n *     as: Link, // import { Link } from 'react-router-dom';\n *     to: '/member/123'\n *   }}\n * >\n *   <p>Content for this item</p>\n *   <button>click</button>\n * </ElementInteractive>\n */\nexport const ElementInteractive = React.forwardRef(\n  function ElementInteractiveFwd(props, ref) {\n    const { linkProps = {}, linkLabel = 'View', children, ...rest } = props;\n    const [isStateOver, setStateOver] = useState(false);\n    const [isStateActive, setStateActive] = useState(false);\n    const [isStateFocus, setStateFocus] = useState(false);\n\n    return (\n      <Wrapper\n        ref={ref}\n        {...rest}\n        isStateOver={isStateOver}\n        isStateActive={isStateActive}\n        isStateFocus={isStateFocus}\n        onFocus={useCallback(() => setStateFocus(true), [])}\n        onBlur={useCallback(() => setStateFocus(false), [])}\n        onMouseEnter={useCallback(() => setStateOver(true), [])}\n        onMouseLeave={useCallback(() => {\n          setStateOver(false);\n          setStateActive(false);\n        }, [])}\n      >\n        {children}\n        <InteractiveLink\n          {...linkProps}\n          onMouseDown={useCallback(() => setStateActive(true), [])}\n          onMouseUp={useCallback(() => setStateActive(false), [])}\n          onFocus={useCallback(() => setStateFocus(true), [])}\n          onBlur={useCallback(() => setStateFocus(false), [])}\n        >\n          {linkLabel}\n        </InteractiveLink>\n      </Wrapper>\n    );\n  }\n);\n\nElementInteractive.propTypes = {\n  children: T.node.isRequired,\n  linkLabel: T.string.isRequired,\n  linkProps: T.object\n};\n\n/**\n🍀 FULL EXAMPLE CODE\n\nimport { Link } from 'react-router-dom'\nimport { ElementInteractive, Wrapper } from './element-interactive';\n\nconst WrapperElement = styled(Wrapper).attrs({ as: 'article' })`\n  ${({ isStateFocus }) => isStateFocus && css``}\n  ${({ isStateOver }) => isStateOver && css``}\n  ${({ isStateActive }) => isStateActive && css``}\n`;\n\nfunction MyComponent() {\n  return (\n    <ElementInteractive\n      as={WrapperElement}\n      linkLabel='View more'\n      linkProps={{\n        as: Link,\n        to: '/member/123'\n      }}\n    >\n      <p>Content for this item</p>\n      <button>click</button>\n    </ElementInteractive>\n  );\n}\n*/\n","import React, { ReactNode } from 'react';\nimport styled, { useTheme } from 'styled-components';\nimport { CollecticonPage } from '@devseed-ui/collecticons';\nimport { themeVal } from '@devseed-ui/theme-provider';\n\nimport { variableGlsp } from '$styles/variable-utils';\n\nfunction EmptyHub(props: { children: ReactNode }) {\n  const theme = useTheme();\n\n  const { children, ...rest } = props;\n\n  return (\n    <div {...rest}>\n      <CollecticonPage size='xxlarge' color={theme.color!['base-400']} />\n      {children}\n    </div>\n  );\n}\n\nexport default styled(EmptyHub)`\n  max-width: 100%;\n  grid-column: 1/-1;\n  display: flex;\n  flex-flow: column;\n  align-items: center;\n  padding: ${variableGlsp(5, 1)};\n  border-radius: ${themeVal('shape.rounded')};\n  border: 1px dashed ${themeVal('color.base-300')};\n  gap: ${variableGlsp(1)};\n`;\n","import React, { ComponentType, ReactNode } from 'react';\nimport styled from 'styled-components';\nimport { themeVal } from '@devseed-ui/theme-provider';\n\nconst SearchHighlight = styled.mark`\n  font-style: italic;\n  background-color: ${themeVal('color.warning')};\n`;\n\ninterface TextHighlightProps {\n  children: string;\n  value?: string;\n  highlightEl?: ComponentType | keyof JSX.IntrinsicElements;\n  disabled?: boolean;\n}\n\nexport default function TextHighlight(props: TextHighlightProps) {\n  const { children, value, highlightEl, disabled } = props;\n\n  if (!value || disabled) return <>{children}</>;\n  const El = highlightEl ?? SearchHighlight;\n\n  // Highlight is done index based because it has to take case insensitive\n  // searches into account.\n  const regex = new RegExp(value, 'ig');\n  /* eslint-disable-next-line prefer-const */\n  let highlighted: ReactNode[] = [];\n  let workingIdx = 0;\n  let m;\n  /* eslint-disable-next-line no-cond-assign */\n  while ((m = regex.exec(children)) !== null) {\n    // Prevent infinite loops with zero-width matches.\n    if (m.index === regex.lastIndex) regex.lastIndex++;\n\n    // Store string since last match.\n    highlighted = highlighted.concat(children.substring(workingIdx, m.index));\n    // Highlight word.\n    highlighted = highlighted.concat(\n      <El key={m.index}>\n        {children.substring(m.index, m.index + value.length)}\n      </El>\n    );\n    // Move index forward.\n    workingIdx = m.index + value.length;\n  }\n  // Add last piece. From working index to the end.\n  highlighted = highlighted.concat(children.substring(workingIdx));\n\n  return <>{highlighted}</>;\n}","import React from 'react';\nimport styled from 'styled-components';\nimport { TaxonomyItem } from 'veda';\nimport { Link } from 'react-router-dom';\nimport { listReset } from '@devseed-ui/theme-provider';\nimport { Actions } from '$components/common/browse-controls/use-browse-controls';\n\nconst SourcesUl = styled.ul`\n  ${listReset()}\n  display: inline;\n  gap: 0.25rem;\n\n  li {\n    display: inline;\n  }\n\n  li:not(:last-child)::after {\n    content: ', ';\n  }\n`;\n\ninterface SourcesListProps {\n  sources?: TaxonomyItem[];\n  onSourceClick?: (v: string) => void;\n  rootPath?: string;\n}\n\nexport function CardSourcesList(props: SourcesListProps) {\n  const { sources, onSourceClick, rootPath } = props;\n\n  if (!sources?.length) return null;\n\n  // No link rendering\n  if (!rootPath || !onSourceClick) {\n    return (\n      <div>\n        <span>By</span>{' '}\n        <SourcesUl>\n          {sources.map((source) => (\n            <li key={source.id}>{source.name}</li>\n          ))}\n        </SourcesUl>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <span>By</span>{' '}\n      <SourcesUl>\n        {sources.map((source) => (\n          <li key={source.id}>\n            <Link\n              to={`${rootPath}?${Actions.TAXONOMY}=${encodeURIComponent(\n                JSON.stringify({\n                  Source: source.id\n                })\n              )}`}\n              onClick={(e) => {\n                e.preventDefault();\n                onSourceClick(source.id);\n              }}\n            >\n              {source.name}\n            </Link>\n          </li>\n        ))}\n      </SourcesUl>\n    </div>\n  );\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { DatasetData } from 'veda';\nimport { glsp, themeVal } from '@devseed-ui/theme-provider';\n\nimport { Tip } from './tip';\nimport {\n  CollecticonProgressTickHigh,\n  CollecticonProgressTickLow,\n  CollecticonProgressTickMedium\n} from './icons/progress-tick';\nimport { CollecticonFlask } from './icons/flask';\nimport { CollecticonMedal } from './icons/medal';\n\nimport { variableGlsp } from '$styles/variable-utils';\nimport {\n  getTaxonomy,\n  TAXONOMY_GRADE,\n  TAXONOMY_UNCERTAINTY\n} from '$utils/veda-data';\n\nconst DATA_UNCERTAINTY = {\n  High: CollecticonProgressTickLow,\n  Medium: CollecticonProgressTickMedium,\n  Low: CollecticonProgressTickHigh\n};\n\nconst DATA_GRADE = {\n  Research: CollecticonFlask,\n  'Agency standard/regulatory': CollecticonMedal\n};\n\nconst DatasetClassificationWrapper = styled.div`\n  position: absolute;\n  top: ${variableGlsp()};\n  left: ${variableGlsp()};\n  display: flex;\n  gap: ${glsp(0.5)};\n\n  svg {\n    pointer-events: all;\n    color: ${themeVal('color.surface')};\n  }\n`;\n\nexport function DatasetClassification(props: { dataset: DatasetData }) {\n  const { dataset } = props;\n\n  const grade = getTaxonomy(dataset, TAXONOMY_GRADE)?.values[0];\n  const uncertainty = getTaxonomy(dataset, TAXONOMY_UNCERTAINTY)?.values[0];\n\n  const IconUncertainty = DATA_UNCERTAINTY[uncertainty?.name ?? ''];\n  const IconGrade = DATA_GRADE[grade?.name ?? ''];\n\n  if (!IconUncertainty && !IconGrade) return null;\n\n  return (\n    <DatasetClassificationWrapper>\n      {IconUncertainty && uncertainty && (\n        <Tip content={`Uncertainty: ${uncertainty.name}`}>\n          <IconUncertainty\n            meaningful\n            title={`Uncertainty: ${uncertainty.name}`}\n          />\n        </Tip>\n      )}\n      {IconGrade && grade && (\n        <Tip content={`Grade: ${grade.name}`}>\n          <IconGrade meaningful title={`Grade: ${grade.name}`} />\n        </Tip>\n      )}\n    </DatasetClassificationWrapper>\n  );\n}\n","import React from 'react';\nimport { createCollecticon } from '@devseed-ui/collecticons';\nimport styled from 'styled-components';\n\nexport const CollecticonProgressTickHigh = styled(\n  createCollecticon((props: any) => (\n    <svg {...props}>\n      <title>{props.title || 'A progress tick high icon'}</title>\n      <path d='M15.938,9L13.918,9C13.713,10.223 13.136,11.349 12.244,12.244C11.109,13.375 9.603,14 8,14C6.397,14 4.891,13.375 3.756,12.244C2.625,11.109 2,9.603 2,8C2,6.397 2.625,4.891 3.756,3.756C3.834,3.678 3.916,3.6 4,3.528L4,6L6,6L6,-0L0,0L0,2L2.709,2C1.047,3.466 0,5.609 0,8C0,12.419 3.581,16 8,16C12.081,16 15.446,12.947 15.938,9ZM10.784,4.916L12.269,6.253L7.1,12L3.856,8.794L5.262,7.372L7.016,9.103L10.784,4.916ZM14.32,3.094L12.893,4.521C13.42,5.26 13.769,6.104 13.918,7L15.938,7C15.756,5.539 15.18,4.201 14.32,3.094ZM11.478,3.108L12.906,1.68C11.551,0.627 9.849,-0 8,-0L8,2C9.264,2 10.469,2.388 11.478,3.108Z' />\n    </svg>\n  ))\n)`\n  /* icons must be styled-components */\n`;\n\nexport const CollecticonProgressTickMedium = styled(\n  createCollecticon((props: any) => (\n    <svg {...props}>\n      <title>{props.title || 'A progress tick medium icon'}</title>\n      <path d='M7,15.938L7,13.918C5.777,13.713 4.651,13.136 3.756,12.244C2.625,11.109 2,9.603 2,8C2,6.397 2.625,4.891 3.756,3.756C3.834,3.678 3.916,3.6 4,3.528L4,6L6,6L6,-0L0,0L0,2L2.709,2C1.047,3.466 0,5.609 0,8C0,12.081 3.053,15.446 7,15.938ZM11.478,12.892C10.739,13.419 9.895,13.768 9,13.918L9,15.938C10.461,15.756 11.799,15.18 12.906,14.32L11.478,12.892ZM15.938,9L13.918,9C13.768,9.895 13.419,10.739 12.892,11.478L14.32,12.906C15.18,11.8 15.756,10.461 15.938,9ZM10.784,4.916L12.269,6.253L7.1,12L3.856,8.794L5.262,7.372L7.016,9.103L10.784,4.916ZM14.32,3.094L12.893,4.521C13.42,5.26 13.769,6.104 13.918,7L15.938,7C15.756,5.539 15.18,4.201 14.32,3.094ZM11.478,3.108L12.906,1.68C11.551,0.627 9.849,-0 8,-0L8,2C9.264,2 10.469,2.388 11.478,3.108Z' />\n    </svg>\n  ))\n)`\n  /* icons must be styled-components */\n`;\n\nexport const CollecticonProgressTickLow = styled(\n  createCollecticon((props: any) => (\n    <svg {...props}>\n      <title>{props.title || 'A progress tick high icon'}</title>\n      <path d='M4.522,12.892L3.094,14.32C4.2,15.18 5.539,15.756 7,15.938L7,13.918C6.105,13.768 5.261,13.419 4.522,12.892ZM11.478,12.892C10.739,13.419 9.895,13.768 9,13.918L9,15.938C10.461,15.756 11.799,15.18 12.906,14.32L11.478,12.892ZM13.918,9C13.768,9.895 13.419,10.739 12.892,11.478L14.32,12.906C15.18,11.8 15.756,10.461 15.938,9L13.918,9ZM2.082,9L0.062,9C0.244,10.461 0.82,11.799 1.68,12.906L3.108,11.478C2.581,10.739 2.232,9.895 2.082,9ZM10.784,4.916L12.269,6.253L7.1,12L3.856,8.794L5.262,7.372L7.016,9.103L10.784,4.916ZM14.32,3.094L12.893,4.521C13.42,5.26 13.769,6.104 13.918,7L15.938,7C15.756,5.539 15.18,4.201 14.32,3.094ZM0.062,7L2.082,7C2.287,5.777 2.864,4.651 3.756,3.756C3.834,3.678 3.916,3.6 4,3.528L4,6L6,6L6,-0L0,0L0,2L2.709,2C1.283,3.258 0.309,5.015 0.062,7ZM11.478,3.108L12.906,1.68C11.551,0.627 9.849,-0 8,-0L8,2C9.264,2 10.469,2.388 11.478,3.108Z' />\n    </svg>\n  ))\n)`\n  /* icons must be styled-components */\n`;\n","import React from 'react';\nimport { createCollecticon } from '@devseed-ui/collecticons';\nimport styled from 'styled-components';\n\nexport const CollecticonFlask = styled(\n  createCollecticon((props: any) => (\n    <svg {...props}>\n      <title>{props.title || 'A flask icon'}</title>\n      <path\n        id='lab-flask'\n        d='M5,2L5,6C5,6 2.583,10.028 0.817,12.971C0.447,13.589 0.437,14.358 0.792,14.985C1.147,15.612 1.812,16 2.532,16C5.694,16 10.306,16 13.468,16C14.188,16 14.853,15.612 15.208,14.985C15.563,14.358 15.553,13.589 15.183,12.971C13.417,10.028 11,6 11,6L11,2L12,2L12,0L4,0L4,2L5,2ZM11.068,10L4.932,10L7,6.554L7,2L9,2C9,2 9,6.554 9,6.554L11.068,10Z'\n      />\n    </svg>\n  ))\n)`\n  /* icons must be styled-components */\n`;\n","import React from 'react';\nimport { createCollecticon } from '@devseed-ui/collecticons';\nimport styled from 'styled-components';\n\nexport const CollecticonMedal = styled(\n  createCollecticon((props: any) => (\n    <svg {...props}>\n      <title>{props.title || 'A medal icon'}</title>\n      <path\n        id='medal'\n        d='M4,10.471L4,16L8,14L12,16L12,10.471C13.227,9.372 14,7.775 14,6C14,2.689 11.311,0 8,0C4.689,0 2,2.689 2,6C2,7.775 2.773,9.372 4,10.471ZM8,3C9.656,3 11,4.344 11,6C11,7.656 9.656,9 8,9C6.344,9 5,7.656 5,6C5,4.344 6.344,3 8,3Z'\n      />\n    </svg>\n  ))\n)`\n  /* icons must be styled-components */\n`;\n","import {\n  eachDayOfInterval,\n  eachMonthOfInterval,\n  eachYearOfInterval,\n  startOfDay,\n  startOfMonth,\n  startOfYear\n} from 'date-fns';\nimport { DatasetLayer, DatasetData } from 'veda';\nimport {\n  EnhancedDatasetLayer,\n  StacDatasetData,\n  TimeDensity,\n  TimelineDataset,\n  TimelineDatasetStatus\n} from './types.d.ts';\nimport {\n  DataMetric,\n  DATA_METRICS,\n  DEFAULT_DATA_METRICS\n} from './components/datasets/analysis-metrics';\nimport { veda_datasets } from \"$data-layer/datasets\";\n\nimport { utcString2userTzDate } from '$utils/date';\n\n// @TODO: These should be updated to take in datasets as a param instead of using veda_datasets directly\n\nexport const findParentDataset = (layerId: string) => {\n  const parentDataset = Object.values(veda_datasets).find((dataset) =>\n    dataset!.data.layers.find((l) => l.id === layerId)\n  );\n  return parentDataset?.data;\n};\n\nexport const findDatasetAttribute = ({ datasetId, attr }: {datasetId: string, attr: string}) => {\n  return veda_datasets[datasetId]?.data[attr];\n};\n\nexport const allDatasets = Object.values(veda_datasets)\n  .map((d) => d!.data);\n\n\nexport const allExploreDatasets = Object.values(veda_datasets)\n  .map((d) => d!.data)\n  .filter((d) => !d.disableExplore);\n\nexport interface DatasetDataWithEnhancedLayers extends DatasetData {\n  layers: EnhancedDatasetLayer[];\n}\n\nfunction enhanceDatasetLayers(dataset) {\n  return {\n      ...dataset,\n      layers: dataset.layers.map(layer => ({\n          ...layer,\n          parentDataset: {\n              id: dataset.id,\n              name: dataset.name\n          }\n      }))\n  };\n}\n\nexport const allExploreDatasetsWithEnhancedLayers: DatasetDataWithEnhancedLayers[] = allExploreDatasets.map(enhanceDatasetLayers);\n\nexport const getAllDatasetsWithEnhancedLayers = (dataset): DatasetDataWithEnhancedLayers[] => dataset.map(enhanceDatasetLayers);\n\nexport const datasetLayers = Object.values(veda_datasets)\n  .flatMap((dataset) => {\n    return dataset!.data.layers.map(l => ({\n      ...l,\n      parentDataset: {\n        id: dataset!.data.id,\n        name: dataset!.data.name\n      }\n    }));\n  });\n\n/**\n * Returns an array of metrics based on the given Dataset Layer configuration.\n * If the layer has metrics defined, it returns only the metrics that match the\n * ids. Otherwise, it returns all available metrics.\n *\n * @param data - The Datase tLayer object to get metrics for.\n * @returns An array of metrics objects.\n */\nfunction getInitialMetrics(data: DatasetLayer): DataMetric[] {\n  const metricsIds = data.analysis?.metrics ?? [];\n  \n  if (!metricsIds.length) {\n    return DEFAULT_DATA_METRICS;\n  }\n  \n  const foundMetrics = metricsIds\n    .map((metric: string) => {\n      return DATA_METRICS.find((m) => m.id === metric)!;\n    })\n    .filter(Boolean);\n\n  return foundMetrics;\n}\n\n/**\n * Converts the datasets to a format that can be used by the timeline, skipping\n * the ones that have already been reconciled.\n *\n * @param ids The ids of the datasets to reconcile.\n * @param datasetsList The list of datasets layers from VEDA\n * @param reconciledDatasets The datasets that were already reconciled.\n */\n\n// @TODO: Assuming that all the datasets are added only through this method\n// We can find a dataset that a layer belongs to in this method\n// Include it as a part of returned value \n\nexport function reconcileDatasets(\n  ids: string[],\n  datasetsList: EnhancedDatasetLayer[],\n  reconciledDatasets: TimelineDataset[]\n): TimelineDataset[] {\n  return ids.map((id) => {\n    const alreadyReconciled = reconciledDatasets.find((d) => d.data.id === id);\n\n    if (alreadyReconciled) {\n      return alreadyReconciled;\n    }\n\n    const dataset = datasetsList.find((d) => d.id === id);\n\n    if (!dataset) {\n      throw new Error(`Dataset [${id}] not found`);\n    }\n\n    return {\n      status: TimelineDatasetStatus.IDLE,\n      data: dataset,\n      error: null,\n      settings: {\n        isVisible: true,\n        opacity: 100,\n        analysisMetrics: getInitialMetrics(dataset)\n      },\n      analysis: {\n        status: TimelineDatasetStatus.IDLE,\n        data: null,\n        error: null,\n        meta: {}\n      }\n    };\n  });\n}\n\nexport function resolveLayerTemporalExtent(\n  datasetId: string,\n  datasetData: StacDatasetData\n): Date[] {\n  const { domain, isPeriodic, timeDensity } = datasetData;\n\n  if (!domain || domain.length === 0) {\n    throw new Error(`Invalid domain on dataset [${datasetId}]`);\n  }\n\n  if (!isPeriodic) return domain.map((d) => utcString2userTzDate(d));\n\n  switch (timeDensity) {\n    case TimeDensity.YEAR:\n      return eachYearOfInterval({\n        start: utcString2userTzDate(domain[0]),\n        end: utcString2userTzDate(domain.last)\n      });\n    case TimeDensity.MONTH:\n      return eachMonthOfInterval({\n        start: utcString2userTzDate(domain[0]),\n        end: utcString2userTzDate(domain.last)\n      });\n    case TimeDensity.DAY:\n      return eachDayOfInterval({\n        start: utcString2userTzDate(domain[0]),\n        end: utcString2userTzDate(domain.last)\n      });\n    default:\n      throw new Error(\n        `Invalid time density [${timeDensity}] on dataset [${datasetId}]`\n      );\n  }\n}\n\nexport function getTimeDensityStartDate(date: Date, timeDensity: TimeDensity) {\n  switch (timeDensity) {\n    case TimeDensity.MONTH:\n      return startOfMonth(date);\n    case TimeDensity.YEAR:\n      return startOfYear(date);\n  }\n\n  return startOfDay(date);\n}\n\nexport class ExtendedError extends Error {\n  code: string;\n  details?: any;\n\n  constructor(message: string, code: string) {\n    super(message);\n    this.code = code;\n  }\n}\n","import { DatasetLayer } from 'veda';\nimport { DataMetric } from './components/datasets/analysis-metrics';\n\nexport enum TimeDensity {\n  YEAR = 'year',\n  MONTH = 'month',\n  DAY = 'day'\n}\n\nexport enum TimelineDatasetStatus {\n  IDLE = 'idle',\n  LOADING = 'loading',\n  SUCCESS = 'success',\n  ERROR = 'error'\n}\n\nexport interface StacDatasetData {\n  isPeriodic: boolean;\n  timeDensity: TimeDensity;\n  domain: string[];\n}\n\nexport interface AnalysisTimeseriesEntry {\n  date: Date;\n  min: number;\n  max: number;\n  mean: number;\n  count: number;\n  sum: number;\n  std: number;\n  median: number;\n  majority: number;\n  minority: number;\n  unique: number;\n  histogram: [number[], number[]];\n  valid_percent: number;\n  masked_pixels: number;\n  valid_pixels: number;\n  percentile_2: number;\n  percentile_98: number;\n}\n\ninterface AnalysisMeta {\n  loaded: number;\n  total: number;\n}\n\n// TimelineDatasetAnalysis type discriminants\nexport interface TimelineDatasetAnalysisIdle {\n  status: TimelineDatasetStatus.IDLE;\n  data: null;\n  error: null;\n  meta: Record<string, never>;\n}\nexport interface TimelineDatasetAnalysisLoading {\n  status: TimelineDatasetStatus.LOADING;\n  data: null;\n  error: null;\n  meta: Partial<AnalysisMeta>\n}\nexport interface TimelineDatasetAnalysisError {\n  status: TimelineDatasetStatus.ERROR;\n  data: null;\n  error: any;\n  meta: Partial<AnalysisMeta>\n}\nexport interface TimelineDatasetAnalysisSuccess {\n  status: TimelineDatasetStatus.SUCCESS;\n  data: {\n    timeseries: AnalysisTimeseriesEntry[];\n  };\n  error: null;\n  meta: AnalysisMeta;\n}\n\nexport type TimelineDatasetAnalysis =\n  | TimelineDatasetAnalysisIdle\n  | TimelineDatasetAnalysisLoading\n  | TimelineDatasetAnalysisError\n  | TimelineDatasetAnalysisSuccess;\n\n// END TimelineDatasetAnalysis type discriminants\nexport interface ParentDatset {\n  id: string;\n  name: string;\n}\nexport interface EnhancedDatasetLayer extends DatasetLayer {\n  parentDataset: ParentDatset;\n}\n\nexport interface TimelineDatasetData extends EnhancedDatasetLayer {\n  isPeriodic: boolean;\n  timeDensity: TimeDensity;\n  domain: Date[];\n}\n\nexport interface TimelineDatasetSettings {\n  // Whether or not the layer should be shown on the map.\n  isVisible?: boolean;\n  // Opacity of the layer on the map.\n  opacity?: number;\n  // Active metrics for the analysis chart.\n  analysisMetrics?: DataMetric[];\n}\n\n// Any sort of meta information the dataset like:\n// Tile endpoints for the layer given the current map view.\ntype TimelineDatasetMeta = Record<string, any>;\n\n// TimelineDataset type discriminants\nexport interface TimelineDatasetIdle {\n  status: TimelineDatasetStatus.IDLE;\n  data: EnhancedDatasetLayer;\n  error: null;\n  // User controlled settings like visibility, opacity.\n  settings: TimelineDatasetSettings;\n  analysis: TimelineDatasetAnalysisIdle;\n  meta?: TimelineDatasetMeta;\n}\nexport interface TimelineDatasetLoading {\n  status: TimelineDatasetStatus.LOADING;\n  data: EnhancedDatasetLayer;\n  error: null;\n  // User controlled settings like visibility, opacity.\n  settings: TimelineDatasetSettings;\n  analysis: TimelineDatasetAnalysisIdle;\n  meta?: TimelineDatasetMeta;\n}\nexport interface TimelineDatasetError {\n  status: TimelineDatasetStatus.ERROR;\n  data: EnhancedDatasetLayer;\n  error: unknown;\n  // User controlled settings like visibility, opacity.\n  settings: TimelineDatasetSettings;\n  analysis: TimelineDatasetAnalysisIdle;\n  meta?: TimelineDatasetMeta;\n}\nexport interface TimelineDatasetSuccess {\n  status: TimelineDatasetStatus.SUCCESS;\n  data: TimelineDatasetData;\n  error: null;\n  // User controlled settings like visibility, opacity.\n  settings: TimelineDatasetSettings;\n  analysis: TimelineDatasetAnalysis;\n  meta?: TimelineDatasetMeta;\n}\n\nexport type TimelineDataset =\n  | TimelineDatasetIdle\n  | TimelineDatasetLoading\n  | TimelineDatasetError\n  | TimelineDatasetSuccess;\n\n// END TimelineDataset type discriminants\n\nexport interface TimelineDatasetForUrl {\n  id: string;\n  settings?: TimelineDatasetSettings;\n}\n\nexport interface DateRange {\n  start: Date;\n  end: Date;\n}\n\nexport interface ZoomTransformPlain {\n  x: number;\n  y: number;\n  k: number;\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { glsp, themeVal } from '@devseed-ui/theme-provider';\nimport { FormSwitch } from '@devseed-ui/form';\nimport { DropMenu, DropTitle } from '@devseed-ui/dropdown';\n\nexport interface DataMetric {\n  id: string;\n  label: string;\n  chartLabel: string;\n  themeColor:\n    | 'infographicA'\n    | 'infographicB'\n    | 'infographicC'\n    | 'infographicD'\n    | 'infographicE'\n    | 'infographicF';\n  style?: Record<string, string>\n}\n\nexport const DATA_METRICS: DataMetric[] = [\n  {\n    id: 'min',\n    label: 'Min',\n    chartLabel: 'Min',\n    themeColor: 'infographicA',\n    style: { \"strokeDasharray\": \"2 2\"}\n  },\n  {\n    id: 'mean',\n    label: 'Average',\n    chartLabel: 'Average',\n    themeColor: 'infographicB'\n  },\n  {\n    id: 'max',\n    label: 'Max',\n    chartLabel: 'Max',\n    themeColor: 'infographicC',\n    style: { \"strokeDasharray\": \"2 2\"}\n  },\n  {\n    id: 'std',\n    label: 'St Deviation',\n    chartLabel: 'St Deviation',\n    themeColor: 'infographicD'\n  },\n  {\n    id: 'median',\n    label: 'Median',\n    chartLabel: 'Median',\n    themeColor: 'infographicE'\n  },\n  {\n    id: 'sum',\n    label: 'Sum',\n    chartLabel: 'Sum',\n    themeColor: 'infographicF'\n  }\n];\n\nexport const DEFAULT_DATA_METRICS: DataMetric[] = DATA_METRICS.filter(metric => metric.id ==='mean' || metric.id==='std');\n\nconst MetricList = styled(DropMenu)`\n  display: flex;\n  flex-flow: column;\n  list-style: none;\n  margin: ${glsp(0, -1, 1, -1)};\n  padding: ${glsp(0, 0, 1, 0)};\n  gap: ${glsp(0.5)};\n\n  > li {\n    padding: ${glsp(0, 1)};\n    font-weight: ${themeVal('type.base.regular')};\n    color: ${themeVal('color.base-400')};\n  }\n`;\n\nconst MetricSwitch = styled(FormSwitch)<{ metricThemeColor: string }>`\n  display: grid;\n  grid-template-columns: min-content 1fr auto;\n  gap: ${glsp(0.5)};\n\n  &::before {\n    content: '';\n    width: 0.5rem;\n    height: 0.5rem;\n    background: ${({ metricThemeColor }) =>\n      themeVal(`color.${metricThemeColor}` as any)};\n    border-radius: ${themeVal('shape.ellipsoid')};\n    align-self: center;\n  }\n`;\n\ninterface AnalysisMetricsProps {\n  activeMetrics: DataMetric[];\n  onMetricsChange: (metrics: DataMetric[]) => void;\n}\n\nexport default function AnalysisMetrics(props: AnalysisMetricsProps) {\n  const { activeMetrics, onMetricsChange } = props;\n\n  const handleMetricChange = (metric: DataMetric, shouldAdd: boolean) => {\n    onMetricsChange(\n      shouldAdd\n        ? activeMetrics.concat(metric)\n        : activeMetrics.filter((m) => m.id !== metric.id)\n    );\n  };\n\n  return (\n    <>\n    <DropTitle>Analysis metrics</DropTitle>\n    <MetricList>\n      {DATA_METRICS.map((metric) => {\n        const checked = !!activeMetrics.find((m) => m.id === metric.id);\n        return (\n          <li key={metric.id}>\n            <MetricSwitch\n              metricThemeColor={metric.themeColor}\n              name={`switch-metric-${metric.id}`}\n              id={`switch-metric-${metric.id}`}\n              value={`switch-metric-${metric.id}`}\n              title='Toggle metric on/off'\n              checked={checked}\n              onChange={() => handleMetricChange(metric, !checked)}\n            >\n              {metric.label}\n            </MetricSwitch>\n          </li>\n        );\n      })}\n    </MetricList>\n    </>\n  );\n}\n","import { datasets } from 'veda';\n\n// @VEDA2-REFACTOR-WORK\n\n/**\n * @NOTE\n * This file ideally is used to provide different collection datasets from different sources \n * and is still a WIP so may change\n * \n * All datasets should now be referenced from the data-layer, as this should serve as the main source of truth\n * \n * @TECH-DEBT\n * veda virtual modules may go away, but this is used here for now until it is removed entirely or updated\n */\n\n\nexport const veda_datasets = datasets;"],"names":["React","T","MDXProvider","useMdxPageLoader","S_LOADING","S_SUCCEEDED","ContentLoading","Block","ContentBlockFigure","ContentBlockProse","Image","Caption","Chapter","LazyChart","LazyCompareImage","LazyScrollyTelling","LazyMap","LazyTable","LazyEmbed","NotebookConnectCalloutBlock","SmartLink","CustomLink","MdxContent","props","pageMdx","loader","status","Prose","Figure","Map","ScrollytellingBlock","Chart","CompareImage","NotebookConnectCallout","Link","a","Table","Embed","throughProps","propTypes","func","object","useEffect","useState","useParams","uniqBy","stories","datasets","DatasetData","StoryData","Taxonomy","TaxonomyItem","MDXContent","MDXModule","S_IDLE","DatasetDataWithEnhancedLayers","allDatasetsProps","Object","values","map","d","data","allStoriesProps","useStory","storyId","story","useDataset","datasetId","dataset","MdxPageLoadResult","Promise","setPageMdx","load","content","default","generateTaxonomies","concat","arr","v","taxonomyData","taxonomy","name","length","taxonomiesUnique","entries","key","tx","t","id","sort","b","localeCompare","TAXONOMY_TOPICS","TAXONOMY_SOURCE","TAXONOMY_GRADE","TAXONOMY_UNCERTAINTY","getTaxonomy","taxonomyName","list","Array","isArray","find","getAllTaxonomyValues","allValues","l","flat","getTaxonomyByIds","group","ids","taxonomies","groupValues","taxonomyItems","items","filter","value","item","push","S_FAILED","ActionStatus","ReactNode","styled","keyframes","css","glsp","themeVal","visuallyHidden","CollecticonChartLine","variableGlsp","pulse","pulsingAnimation","LoadingSkeletonProps","inline","width","height","size","variation","type","LoadingSkeleton","span","LoadingSkeletonGroup","div","MapLoadingProps","position","MapLoadingWrapper","ContentLoadingSelf","ChartLoadingWrapper","PageLoadingSelf","PageLoading","MapLoading","ChartLoading","message","cssNoHighlight","variableType","base","variable","variableBaseType","variableProseVSpace","args","fns","m","spaces","fill","Children","Component","ReactElement","createElement","media","FigcaptionInner","defaultBlockName","wideBlockName","fullBlockName","generalErrorMessage","blockTypeErrorMessage","contentTypeErrorMessage","figureDisplayName","proseDisplayName","ContentBlock","HintedError","HintedErrorDisplay","docsMessage","ContentBlockPAlpha","largeUp","ContentBlockPBeta","mediumUp","ContentBlockFAlpha","ContentBlockFBeta","ContentBlockFGama","ContentBlockPFAlpha","xlargeUp","ContentBlockPFBeta","ContentBlockPFGama","smallUp","ContentBlockPFDelta","matchingBlocks","BlockComponentProps","children","BlockComponent","typeName","childrenAsArray","toArray","childrenComponents","e","displayName","childrenNames","reduce","acc","curr","includes","hints","BlockErrorBoundaryProps","childToRender","passErrorToChild","className","BlockErrorBoundary","error","getDerivedStateFromError","CRAOverlayIgnore","constructor","state","clearError","bind","setState","render","rest","BlockWithErrorProps","title","subtitle","BlockWithError","truncated","Subtitle","CollecticonCircleInformation","figure","Figcaption","figcaption","attrs","as","renderAttributionPosition","FigureAttributionSelf","p","FigureAttributionInner","FigureAttributionCmp","author","url","innerProps","href","target","rel","FigureAttribution","string","oneOf","captionDisplayName","captionChild","Error","node","StyledContentBlockFigure","VarProse","Hug","Heading","Lead","sizeMapping","xxsmall","xsmall","small","medium","large","xlarge","xxlarge","jumbo","HeadingSizes","renderHeadingSize","VarHeading","VarLead","mediumDown","DefaultTheme","ThemedCssFunction","gridLineNames","mdQueryOrdered","RequireAtLeastOne","Pick","Exclude","Keys","Required","K","Partial","MdQuery","GridLines","GridderRange","MdQueryUp","GridderDefinition","HugProps","grid","validateGridLineNames","cols","some","indexOf","JSON","stringify","makeGrid","columns","mdQuery","gridGap","layoutMax","layoutMaxNoPadding","fullColumn","contentColWidth","contentColumns","_","i","columnTemplate","gridTemplateColumns","gridColumn","start","end","getGridProp","startIdx","findIndex","col","endIdx","line","c","join","lastColumn","slice","mdIndex","_media","Fragment","ErrorBlock","ErrorBlockInner","ErrorHints","ErrorSubtitle","HintedErrorDisplayProps","attrAuthor","attrUrl","align","caption","propsWithoutAttrs","imageAlign","src","alt","multiply","ProjectionOptions","utcString2userTzDate","validateRangeNum","validateProjectionBlockProps","ChapterProps","center","zoom","layerId","datetime","showBaseMap","projectionId","projectionCenter","projectionParallels","ScrollyChapter","Omit","Date","chapterDisplayName","ChapterSelf","lngValidator","latValidator","validateChapter","chapter","index","dataProperties","mapProperties","missingDataProps","undefined","missingMapProps","missing","missingError","dateError","isNaN","getTime","contentError","centerValid","centerError","projectionErrors","parallels","errors","Boolean","format","isSameMonth","isSameYear","parse","startOfYear","sub","str","isoYearOrMonth","match","isoMatch","date","offset","getTimezoneOffset","setTime","replace","userTzDate2utcString","tz","toISOString","isValidDate","dateString","formatDateRange","datesSeparator","useOrdinalDays","DATE_FORMAT_FULL","startStr","endStr","monthDayFormat","dateToInputFormat","inputFormatToDate","inputFormat","DateRangePreset","getRangeFromPreset","preset","days","years","FlattenSimpleInterpolation","visuallyDisabled","mod","n","min","max","raw","Number","isEqualObj","composeVisuallyDisabled","Comp","additionalStyles","onClickOriginal","onClick","preventDefault","vd","checkEnvFlag","toLowerCase","MbProjectionOptions","ProjectionListItem","projectionsList","mbId","label","conicValues","isCustom","projectionDefault","convertProjectionToMapbox","projection","proj","console","validateLon","validateLat","allowedProjections","projectionsConic","o","LazyLoad","chartMaxHeight","tableHeight","mapHeight","scrollyMapHeight","number","csv","json","DSVRowArray","FormattedTimeSeriesData","getFData","fileExtensionRegex","CommonLineChartProps","UniqueKeyUnit","useAsyncError","BlockChartProp","dataPath","idKey","xKey","yKey","subIdKey","BlockChart","dateFormat","chartData","setChartData","uniqueKeys","setUniqueKeys","newDataPath","split","extension","exec","throwAsyncError","getData","then","dataToUse","fData","formattedUniqueKeys","active","timeFormat","timeParse","d3ScaleChromatic","formatAsScientificNotation","round","timeFormatter","time","dateFormatter","convertToTime","timeString","parseDate","Record","formatTimeSeriesData","timeSeriesData","dates","idx","currentStat","columnErrors","noErr","keys","collator","Intl","Collator","numeric","from","Set","compare","keyObject","entry","parseFloat","getInterpolateFunction","colorScheme","fnName","toUpperCase","getColors","steps","colorFn","getNumForChart","x","Math","abs","toString","decimals","pow","shortenLargeNumber","num","unit","FormatThousandsOptions","separator","forceDecimals","shorten","formatThousands","options","opts","repeat","char","sign","absNum","int","dec","largeNumUnit","substring","zeroPad","prefix","abdsNum","wholeNum","floor","padLength","String","pads","isFinite","coefficient","exponent","toExponential","sups","exponentSup","chartMinHeight","chartAspectRatio","defaultMargin","top","right","left","bottom","highlightColorThemeValue","highlightColor","legendWidth","brushHeight","brushRelatedConfigs","with","xAxisHeight","labelOffset","without","chartYAxisWidth","chartLabelOffset","useMemo","forwardRef","LineChart","Line","XAxis","YAxis","Tooltip","CartesianGrid","Label","ResponsiveContainer","ReferenceArea","Legend","Curve","Customized","TooltipComponent","AltTitle","LegendComponent","ReferenceLegendComponent","ChartWrapperRef","BrushCustom","useMediaQuery","LineChartWithFont","ChartWrapper","BrushContainer","altTitle","altDesc","colors","renderLegend","renderBrush","xAxisLabel","yAxisLabel","highlightStart","highlightEnd","highlightLabel","availableDomain","brushRange","onBrushRangeChange","range","color","RLineChartProps","syncId","CustomCursor","payloadIndex","RLineChart","ref","chartMargin","setChartMargin","isMediumUp","lineColors","uniqueKeysWithColors","renderHighlight","xAxisDomain","brushXAxisDomain","chartDataWithFakeValues","firstDate","lastDate","interval","currentFakeDate","prependValues","appendValues","xAxisInterval","numValuesInBrushRange","k","r","TooltipProps","TooltipComponentProps","TooltipWrapper","ListItem","TooltipItem","payload","inactiveKeys","point","AltTitleProps","desc","LegendProps","CategoricalChartProps","ReferenceLegendComponentProps","LegendWrapper","ul","LegendItem","li","HighlightLabel","text","HighlightLabelMarker","rect","useCallback","useBrush","BrushWrapper","BrushComponent","button","BrushTraveller","BrushTravellerStart","BrushTravellerEnd","BrushDrag","BrushProps","Brush","changeCallback","newSelection","onBrushMouseDown","wrapperRef","containerStyles","scaleTime","useRef","useResizeObserver","DraggingState","domain","currentValues","minBrushWidthPx","HTMLDivElement","dragging","setDragging","initialOffsetX","wrapperWidth","initialWidth","scale","brushX","brushWidth","role","onBrushMouseUp","current","onBrushMouseMove","baseX","getBoundingClientRect","wrapperOffsetedX","clientX","offsetX","newStart","newEnd","dragOffsetedX","invert","currentEndX","currentStartX","document","addEventListener","removeEventListener","MutableRefObject","UseResizeObserverProps","Element","setWidth","observeTarget","resizeObserver","ResizeObserver","forEach","contentRect","observe","unobserve","useTheme","useDimensions","DevseedUIThemeMediaRanges","getScrollbarWidth","MediaBreakpointStatus","isXsmallUp","isXsmallOnly","isXsmallDown","isSmallUp","isSmallOnly","isSmallDown","isMediumOnly","isMediumDown","isLargeUp","isLargeOnly","isLargeDown","isXlargeUp","isXlargeOnly","isXlargeDown","theme","mediaRanges","ranges","breakpoints","breakpoint","lowerBound","currentBreakpoint","calculatedWidth","updateOnBreakpointChange","body","scrollbarWidth","window","innerWidth","rangeBooleans","rangeKey","bounds","upper","charAt","makeKey","lBound","uBound","Infinity","scrollbarWidthCache","el","style","cssText","appendChild","offsetWidth","clientWidth","remove","useScrollbarWidthAsCssVar","varName","documentElement","setProperty","removeProperty","setError","flexRender","getCoreRowModel","useReactTable","ColumnDef","getSortedRowModel","SortingState","Row","SortDirection","useVirtual","Sheet2JSONOpts","CollecticonSortAsc","CollecticonSortDesc","CollecticonSortNone","useLoadFile","ExcelOption","sheetNumber","parseOption","TablecomponentProps","excelOption","columnToSort","PlaceHolderWrapper","TableWrapper","StyledTable","TableComponent","tableContainerRef","dataLoading","dataError","sorting","setSorting","dataLoaded","accessorKey","enableSorting","table","onSortingChange","rows","getRowModel","rowVirtualizer","parentRef","overscan","virtualItems","virtualRows","totalSize","paddingTop","paddingBottom","getHeaderGroups","headerGroup","headers","header","colSpan","column","getCanSort","getIsSorted","getToggleSortingHandler","columnDef","getContext","virtualRow","row","getVisibleCells","cell","SortableLink","SortableThProps","isSortable","sortDirection","onSortClick","event","SortableTh","axios","FileExtension","useFileLoader","fileName","setData","setLoading","controller","AbortController","signal","loadData","pop","read","utils","f","get","responseType","response","arrayBuffer","wb","ws","Sheets","SheetNames","sheet_to_json","csvParse","csvData","csvStr","abort","ReactCompareImage","MediaCompare","leftImageSrc","leftImageAlt","leftImageLabel","rightImageSrc","rightImageAlt","rightImageLabel","isRequired","BasemapId","MapboxMap","MapboxMapProps","Carto","mapInstanceId","validateBlockProps","MapBlockProps","dateTime","compareDateTime","requiredProperties","zoomError","compareDateError","compareLabel","allowProjectionChange","basemapId","MapBlock","generatedId","selectedDatetime","selectedCompareDatetime","projectionStart","setProjection","mapBasemapId","setMapBasemapId","lng","lat","useImperativeHandle","MapboxOptions","CompareMbGL","dateFns","CollecticonCircleXmark","CollecticonChevronRightSmall","CollecticonChevronLeftSmall","iconDataURI","DatasetDatumFnResolverBag","AoiChangeListenerOverload","AoiState","getLayerComponent","resolveConfigFunctions","SimpleMap","MapMessage","LayerLegendContainer","LayerLegend","useBasemap","DEFAULT_MAP_STYLE_URL","ExtendedStyle","Styles","Basemap","formatCompareDate","formatSingleDate","useDatasetAsyncLayer","calcFeatCollArea","chevronRightURI","chevronLeftURI","MapsContainer","mapOptions","logoPosition","trackResize","pitchWithRotate","dragRotate","getMapPositionOptions","MapboxMapComponent","MapboxMapRef","compareDate","isComparing","cooperativeGestures","onPositionChange","initialPosition","withGeocoder","withScale","aoi","onAoiChange","onProjectionChange","basemapStyleId","onBasemapStyleIdChange","isDatasetLayerHidden","onStyleChange","mapContainer","mapRef","mapCompareContainer","mapCompareRef","isMapLoaded","setMapLoaded","isMapCompareLoaded","setMapCompareLoaded","labelsOption","boundariesOption","onOptionChange","baseLayerStatus","setBaseLayerStatus","onBaseLayerStatusChange","compareLayerStatus","setCompareLayerStatus","onCompareLayerStatusChange","resize","instance","compareInstance","baseLayer","compareLayer","shouldRenderCompare","compareControl","mousemove","orientation","resolverBag","compareDatetime","baseLayerResolvedData","BaseLayerComponent","bag","timeseries","compareLayerResolvedData","CompareLayerComponent","compareToDate","theDate","baseTimeDensity","timeDensity","compareTimeDensity","computedCompareLabel","providedLabel","mapLabel","drawing","featureCollection","features","legend","description","stacApiEndpoint","tileApiEndpoint","assetUrlReplacements","stacCol","sourceParams","zoomExtent","getCenter","getZoom","MapPosition","result","userInitiated","MapboxMapComponentFwd","FunctionComponent","Feature","defaultsDeep","clamp","Method","eachDayOfInterval","eachMonthOfInterval","eachYearOfInterval","endOfDay","startOfDay","DatasetLayer","DatasetLayerCompareInternal","DatasetLayerCompareSTAC","DatasetDatumFn","DatasetDatumReturnType","DatasetLayerCompareNormalized","DatasetLayerType","MapLayerRasterTimeseries","MapLayerRasterTimeseriesProps","StacFeature","MapLayerVectorTimeseries","MapLayerVectorTimeseriesProps","MapLayerZarrTimeseries","MapLayerZarrTimeseriesProps","MapLayerCMRTimeseries","MapLayerCMRTimeseriesProps","AsyncDatasetLayer","isTimeseries","layerType","getCompareLayerData","layerData","compareInternal","compareSTAC","passThroughProps","errorHints","datasetData","otherLayer","layers","Fn","ObjResMap","Res","datum","ready","checkLayerLoadStatus","asyncLayer","global","last","AsyncDatasetLayerData","resolveLayerTemporalExtent","isPeriodic","quickCache","RequestQuickCacheParams","method","requestQuickCache","has","set","getFilterPayload","collection","op","property","getMergedBBox","mergedBBox","POSITIVE_INFINITY","NEGATIVE_INFINITY","feature","bbox","FIT_BOUNDS_PADDING","LayerInteractionHookOptions","mapInstance","useLayerInteraction","onPointsClick","onPointsEnter","getCanvas","cursor","onPointsLeave","on","off","OptionalBbox","clampBbox","minX","minY","maxX","maxY","useFitBbox","isUserPositionSet","initialBbox","stacBbox","clampedBbox","fitBounds","padding","qs","AnyLayer","AnySourceImpl","GeoJSONSourceRaw","LngLatBoundsLike","RasterLayer","RasterSource","SymbolLayer","useMapStyle","useCustomMarker","LOG","process","env","NODE_ENV","onStatusChange","isHidden","idSuffix","isPositionSet","STATUS_KEY","Global","Layer","StacSearch","Statuses","updateStyle","minZoom","generatorId","stacApiEndpointToUse","API_STAC_ENDPOINT","tileApiEndpointToUse","API_RASTER_ENDPOINT","statuses","changeStatus","context","layersToCheck","newStatus","every","s","stacCollection","setStacCollection","limit","fields","include","exclude","groupCollapsed","log","groupEnd","responseData","aborted","points","w","mosaicUrl","setMosaicUrl","links","markerLayout","haveSourceParamsChanged","run","sources","tileParams","assets","arrayFormat","tilejsonUrl","tileServerUrl","tilejsonData","tiles","wmtsBaseUrl","mosaicSource","mosaicLayer","source","layout","visibility","paint","duration","minzoom","metadata","layerOrderPosition","xyzTileUrl","wmtsTileUrl","pointsSourceId","pointsSource","pointsLayer","primary","maxzoom","properties","layerBounds","Style","createContext","useContext","ExtendedLayer","LayerOrderPosition","GeneratorParams","StylesContextType","params","updateMetaData","metaData","StylesContext","LAYER_ORDER","ReturnType","generateStyle","stylesData","generatorParams","layersWithMeta","layer","layerA","layerB","layerAOrder","layerBOrder","layerAIndex","layerBIndex","sortDeltaOrder","sortDeltaGeneratorId","version","glyphs","sprite","onStyleUpdate","setStylesData","setStyle","prevStyle","markerSdfUrl","CUSTOM_MARKER_ID","loadImage","image","hasImage","removeImage","addImage","sdf","LngLatLike","VectorSourceImpl","centroid","featuresApiEndpoint","setFeaturesApiEndpoint","featuresBbox","setFeaturesBbox","maxZoom","endpoint","featuresData","extent","spatial","infographicB","extractedFeat","geometry","coordinates","flyTo","useZarr","ZarrPaintLayerProps","assetUrl","ZarrPaintLayer","time_slice","zarrSource","zarrLayer","AssetUrlReplacement","to","ZarrResponseData","zarr","CMRResponseData","setAssetUrl","useCMR","replaceInAssetUrl","replacement","cmrAssetUrl","MapRef","MultiPolygon","Polygon","BBox","checkFitBoundsFromLayer","minXLayer","minYLayer","maxXLayer","maxYLayer","minXMap","minYMap","maxXMap","maxYMap","getBounds","isOutside","layerExtentSmaller","reject","reason","resolve","abortHandler","dataPromise","catch","finally","toAoIid","drawId","multiPolygonToPolygons","polygons","getZoomFromBbox","latMax","lngMax","latMin","lngMin","maxDiff","zoomLevel","RefObject","mapboxgl","AttributionControl","EventData","NavigationControl","ScaleControl","MapboxGeocoder","MapboxStyleOverride","MbDrawPopover","aoiCursorStyles","useMbDraw","MapOptions","useMapboxControl","MapCoords","Option","accessToken","MAPBOX_TOKEN","SingleMapContainer","SimpleMapProps","containerRef","onLoad","onMoveEnd","onUnmount","option","attributionPosition","mapOptionsControl","mapCoordsControl","mbMap","container","attributionControl","addControl","geocoderControl","marker","collapsed","_inputEl","HTMLInputElement","clear","blur","interactive","showCompass","scalecontrol","once","setTimeout","ctrl","removeControl","listener","prototype","hasOwnProperty","call","onChange","selectedContext","createButtonGroupStyles","createButtonStyles","CollecticonPlusSmall","CollecticonMinusSmall","CollecticonMagnifierLeft","CollecticonXmarkSmall","fitting","surface","CollecticonTrashBin","Button","ReactPopoverGl","AoiChangeListener","makeFeatureCollection","ActionPopoverInner","MbDrawPopoverProps","getCenterCoords","centerPoint","lngLat","TransitionGroup","CSSTransition","MBPopoverInner","POPOVER_SHOW_HIDE_ANIM_TIME","MBPopoverProps","MBPopover","onClose","onCloseProp","switchingPopovers","pLngLat","prev","ReactDOM","Toolbar","ToolbarIconButton","getAnchorTranslate","Popover","PopoverContents","PopoverHeader","PopoverHeadline","PopoverTitle","PopoverSubtitle","PopoverBody","PopoverFooter","PopoverAnchor","PopoverRenderFunction","PopoverRenderFunctionBag","Try","fn","AnchorPoints","closeOnClick","closeOnMove","offsetTop","offsetBottom","renderContents","renderHeader","renderHeadline","renderToolbar","renderBody","renderFooter","closeButton","titleHLevel","suptitle","footerContent","popoverEl","HTMLElement","anchorPoints","setAnchorPoints","setPosition","update","pageYOffset","pageXOffset","getContainer","mapTop","mapLeft","mapRight","mapBottom","pos","project","anchorPosition","y","popoverDomRect","halfW","destroy","disconnect","hasPlacement","anchor","popoverStyle","transform","display","createPortal","querySelector","defaultProps","createSubtitleStyles","applyBorderStyles","applyAnchorStyles","centerClip","cornerClip","common","getTransition","isShowing","easing","article","verticalAttachment","va","isSup","footer","featArea","union","FeatureCollection","AoiBounds","AoiBoundsUnset","AoiFeature","boundsFromFeature","feat","ne","sw","featureFromBounds","neLng","neLat","swLng","swLat","mergedFeature","km2","areBoundsValid","MapboxDraw","computeDrawStyles","mbDrawRef","_interactive","newMbDraw","modes","displayControlsDefault","styles","_drawControl","drawCreateListener","drawSelectionListener","mode","getMode","isSelected","selected","drawUpdateListener","drawModeListener","drawDeleteListener","hasControl","mbDraw","deleteAll","changeMode","CollecticonGlobe","Dropdown","DropMenu","DropMenuItem","DropTitle","FormSwitch","ProjectionItemConic","ProjectionItemCustom","ProjectionItemSimple","MapOptionsProps","BASEMAP_STYLES","DropHeader","DropBody","MapOptionsDropdown","SelectorButton","ContentGroup","ContentGroupHeader","ContentGroupTitle","ContentGroupBody","OptionSwitch","OptionMedia","basemap","thumbnailUrl","checked","FormFieldsetHeader","FormLegend","StressedFormGroupInput","ProjectionItemConicProps","ProjectionItemProps","FormFieldsetBodyColumns","FormFieldsetCompact","ProjectionOptionsForm","projectionConicCenter","validate","projectionConicParallel","activeProjection","defaultConicValues","isActive","activeConicValues","setConicValues","onChangeConicValues","field","newConic","assign","Dispatch","FormInput","FormGroupStructure","formSkinStylesProps","StressedField","StressedFormGroupInputProps","inputType","inputSize","placeholder","draftValue","setDraftValue","helper","JSX","hideHeader","errored","handlers","FormEvent","KeyboardEvent","Ref","useSafeState","StressedFieldProps","renderProps","onKeyPress","onBlur","fieldRef","setErrored","validateField","onChangeHandler","currentTarget","onKeypressHandler","oneOfType","initialValue","isMountedRef","currentValue","setCurrentValue","setSafeState","FormFieldset","FormFieldsetBody","BASE_STYLE_PATH","getStyleUrl","mapboxId","const","BASEMAP_ID_DEFAULT","GROUPS_BY_OPTION","labels","boundaries","IControl","Root","createRoot","ThemeProvider","renderFn","deps","rootRef","elementRef","renderFnRef","onAdd","onRemove","_internalRoot","containerInfo","unmount","CopyField","MapCoordsWrapper","MapCoordsProps","getCoords","mapCenter","posListener","showCopiedMsg","Clipboard","CopyFieldProps","originalValue","setShowCopiedMsg","triggerElement","copyValue","copiedMsgTimeout","NodeJS","Timeout","clipboard","clearTimeout","val","Transition","fadeDuration","MessageProps","show","isInvalid","Message","MapMessageProps","LayerLegendCategorical","LayerLegendGradient","AccordionFold","AccordionManager","followCursor","scaleLinear","Tip","WidgetItemBodyInner","WidgetItemHeader","WidgetItemHeadline","WidgetItemHGroup","LayerLegendCommonProps","LegendSwatchProps","hasHelp","stops","LayerLegendContainerProps","makeGradient","printLegendVal","formatTooltipValue","rawVal","LegendContainer","LayerLegendSelf","LegendList","dl","LegendSwatch","LayerLegendTitle","h3","LegendBody","isExpanded","toggleExpanded","LayerCategoricalGraphic","stop","LayerGradientGraphic","hoverVal","setHoverVal","moveListener","nativeEvent","layerX","hasNumericLegend","tipText","Typpy","reactTippyStyles","Overline","panelWidth","PANEL_REVEAL_DURATION","Panel","revealed","PanelInner","PanelHeader","PanelHeadline","PanelActions","PanelTitle","h2","PanelToggle","PanelBody","PanelWidget","PanelWidgetHeader","PanelWidgetTitle","PanelWidgetBody","setLabelsOption","setBoundariesOption","useQuery","BasemapProps","mapGroupNameToGroupId","groupNames","mapboxGroups","groupsAsArray","groupName","baseStyle","setBaseStyle","styleJson","styleRaw","fetch","labelsGroupIds","boundariesGroupIds","layerGroup","isLabelsLayer","isBoundariesLayer","TimeDensity","dateFormats","year","month","day","dateA","dateB","timeDensityA","timeDensityB","useDeepCompareMemo","QueryState","useQueries","useQueryClient","UseQueryOptions","UseQueryResult","STACLayerData","fetchLayerById","time_density","commonTimeseriesParams","featuresApiData","temporal","summaries","domainStart","lastDatetime","makeQueryObject","queryKey","queryFn","staleTime","refetchOnMount","refetchOnReconnect","refetchOnWindowFocus","NullableQueryState","TData","TError","reFetch","NullAsyncDatasetLayer","useLayersInit","queryClient","queries","layerQueries","mergeSTACData","baseData","dataSTAC","getQueryState","layerProps","refetchQueries","exact","hasParams","layersList","layerAsArray","asyncLayers","useDatasetAsyncLayers","ReferencedLayer","skipCompare","useAsyncLayers","referencedLayers","BrowserFrame","EmbedWrapper","IframeWrapper","iframe","EmbedProps","CollecticonExpandTopRight","BrowserFrameComponent","link","scrollama","SwitchTransition","useSlidingStickyHeaderProps","HEADER_TRANSITION_DURATION","ResolvedLayer","runtimeData","ScrollyMapWrapper","TheMap","topOffset","TheChapters","useChapterPropsFromChildren","chapters","chErrors","ch","getChapterLayerKey","useMapLayersFromChapters","chList","uniqueChapterLayers","unique","uniqueLayerRefs","resolvedLayersCache","resolvedLayers","resolved","resolvedStatus","useAllLayersAdded","count","cb","succeededCount","allAdded","setAdded","onLoadCb","Scrollytelling","isHeaderHidden","headerHeight","wrapperHeight","chapterProps","activeChapter","setActiveChapter","areAllLayersLoaded","onLayerLoadSuccess","initialCh","setZoom","setCenter","scroller","setup","step","onStepEnter","activeChapterLayerId","activeChapterLayer","resolvedLayer","didFailLayerLoading","areLayersLoading","done","lIdx","LayerCmp","SetStateAction","useDeepCompareEffect","Outlet","reveal","MetaTags","PageFooter","useGoogleTagManager","useSlidingStickyHeader","NavWrapper","appTitle","APP_TITLE","appDescription","APP_DESCRIPTION","PAGE_BODY_ID","Page","PageBody","LayoutRoot","thumbnail","hideFooter","LayoutRootContext","truncatedTitle","fullTitle","LayoutRootContextProps","setLayoutProps","feedbackModalRevealed","setFeedbackModalRevealed","LayoutRootContextProvider","layoutProps","ctx","LayoutProps","useFeedbackModal","isRevealed","hide","Helmet","useLocation","baseUrl","location","origin","defaultMetaImage","PUBLIC_URL","pathname","CUSTOM_SCRIPT_SRC","CUSTOM_SCRIPT_ID","CollecticonBrandGithub","CollecticonEnvelope","ComponentOverride","PageFooterSelf","FooterCredits","address","InfoList","nowDate","APP_VERSION","APP_UI_VERSION","APP_BUILD_TIME","getFullYear","bool","lazy","getOverride","PageOverrides","ComponentOverrideProps","_with","ContentOverride","getLinkProps","SmartLinkProps","isExternalLink","test","linkProps","CustomLinkProps","MouseEventHandler","getBoolean","LinkProps","linkTo","ForwardRefExoticComponent","RefAttributes","HTMLAnchorElement","externalLinksInNewTab","TagManager","gtMCode","GOOGLE_TAG_MANAGER_ID","gtmAuth","GOOGLE_TAG_AUTH","gtmPreviewEnv","GOOGLE_TAG_PREVIEW","tagManagerArgs","gtmId","auth","preview","cookies_win","initialize","useEffectPrevious","HEADER_ID","HEADER_WRAPPER_ID","setHidden","setHeaderHeight","setWrapperHeight","navWrapperElement","pathnamePrev","pageChanged","ticking","prevY","scrollY","scrollUpDelta","observer","IntersectionObserver","isIntersecting","headerHeightQueried","offsetHeight","tick","currY","wrapperEl","atTheBottom","innerHeight","ceil","transition","onViewportPositionChange","requestAnimationFrame","DependencyList","useLayoutEffect","EffectPreviousCb","previous","mounted","makePreviousHook","effectHook","unchangingCb","useLayoutEffectPrevious","usePreviousValue","isEqualFunc","PageHeader","shouldSlideHeader","PageNavWrapper","NavLink","userPages","getString","listReset","rgba","CollecticonEllipsisVertical","CollecticonHamburgerMenu","DropdownScrollable","NasaLogo","GoogleForm","UnscrollableBody","STORIES_PATH","DATASETS_PATH","ANALYSIS_PATH","ABOUT_PATH","EXPLORATION_PATH","GlobalMenuLinkCSS","rgbaFixed","appVersion","PageHeaderSelf","Brand","PageTitleSecLink","GlobalNav","nav","GlobalNavInner","GlobalNavHeader","GlobalNavTitle","GlobalNavActions","GlobalNavToggle","GlobalNavBody","GlobalNavBodyInner","NavBlock","SROnly","SectionsNavBlock","GlobalNavBlockTitle","GlobalMenu","GlobalMenuLink","DropMenuNavItem","globalNavRevealed","setGlobalNavRevealed","globalNavBodyRef","onGlobalNavClick","contains","closeNavOnClick","userPagesMainNavItem","page","mainNavItem","navTitle","skipNav","pageBody","getElementById","focus","FEATURE_NEW_EXPLORATION","other","HUB_URL","HUB_NAME","GOOGLE_FORM","DotMenuItem","menu","UserPagesDotMenu","onItemClick","dotMenuItems","menuItems","menuItem","DropdownProps","DropdownRef","DropdownWithScroll","fillRule","clipRule","strokeLinejoin","strokeMiterlimit","Modal","StyledGoogleForm","BtnMediaProps","ButtonAsNavLink","overflow","ANALYSIS_RESULTS_PATH","getStoryPath","getDatasetPath","getDatasetExplorePath","ButtonProps","CollecticonBook","CollecticonCode","CollecticonCog","CollecticonDownload2","NotebookConnectButtonProps","compact","DatasetUsages","DatasetUsageLink","DatasetUsageLabel","DatasetUsageType","IconByType","jupyter","github","download","unknown","NotebookConnectModal","datasetUsages","usage","datasetUsagesWithIcon","layerIdsSet","add","datasetUsage","NotebookConnectButtonSelf","setRevealed","close","NotebookConnectButton","NotebookConnectCalloutProps","NotebookConnectCalloutSelf","DataCatalog","useNavigate","VerticalDivider","DatasetMenu","FiltersControl","FilterTag","prepareDatasets","Actions","useBrowserControls","FoldHeader","FoldHeadline","FoldTitle","Card","CardList","CardMeta","CardTopicsList","EmptyHub","TextHighlight","Pill","CardSourcesList","DatasetClassification","OptionItem","getAllDatasetsWithEnhancedLayers","BrowseFoldHeader","Content","CatalogWrapper","BrowseSection","Cards","Tags","PlainTextButton","EmptyState","sortOptions","DataCatalogProps","controlVars","navigate","sortField","sortDir","onAction","search","datasetTaxonomies","urlTaxonomyItems","allDatasetsWithEnhancedLayers","datasetsToDisplay","setDatasetsToDisplay","filterLayers","allSelectedFilters","setAllSelectedFilters","clearedTagItem","setClearedTagItem","prevSelectedFilters","handleChangeAllSelectedFilters","action","TAXONOMY_MULTISELECT","handleClearTag","handleClearTags","CLEAR","updated","browseControlsHeaderRef","renderTags","scrollMarginTop","topics","allTaxonomyValues","scrollIntoView","path","TAXONOMY","encodeURIComponent","Topics","CollecticonCompass","CollecticonPage","DropMenuItemButton","TriggerButton","DropMenuItemButtonDisable","DatasetMenuProps","hasUsage","DropMenuItemProps","DropMenuItemButtonProps","renderVariation","SearchField","CheckableFilters","ControlsWrapper","widthValue","topValue","heightValue","FiltersMenuProps","taxonomiesOptions","allSelected","onChangeToFilters","controlsRef","controlsHeight","setControlsHeight","handleChanges","borderBoxSize","blockSize","SEARCH","callback","InputHTMLAttributes","FormHelperMessage","CollecticonDiscXmark","SearchFieldWrapper","SearchFieldMessageProps","isOpen","isFocused","SearchFieldMessage","SearchFieldContainer","SearchFieldClearable","FormInputSearch","SearchFieldProps","keepOpen","setFocused","FormCheckableGroup","FormCheckable","CollecticonChevronDown","CollecticonChevronUp","CardTitle","FilterMenu","FilterTitle","Options","Toggle","ToggleIconButton","CheckableFiltersProps","onChanges","globallySelected","tagItemCleared","setShow","setCount","setSelected","handleChange","ChangeEvent","idInfo","optionItem","prevValue","isChecked","CardBlank","ol","CardListGrid","CardHeader","CardHeadline","CardActions","CardOverline","CardBody","CardFooter","useQsStateCreator","omit","SORT_FIELD","SORT_DIR","BrowserControlsAction","what","FilterOption","TaxonomyFilterOption","taxonomyType","exclusion","BrowseControlsHookParams","sortDirOptions","optionAll","useQsState","commit","setSortField","memo","validator","setSortDir","setSearch","setTaxonomies","dehydrator","hydrator","taxonomyGroupValues","updatedValues","FilterTagProps","Tag","handleClick","filtered","searchLower","includesSearchLower","layerMatchesSearch","parentDataset","idLower","nameLower","descriptionLower","topicsTaxonomy","reverse","ComponentProps","Constrainer","FoldBase","FoldGrid","FoldInner","FoldHeadActions","FoldHGroup","FoldLead","FoldBody","FoldComponent","Fold","FoldProse","HorizontalInfoCard","HorizontalCardStyles","ElementInteractive","CardType","CardItemProps","isStateFocus","isStateOver","isStateActive","cardType","renderCardType","CardFigure","CardItem","CardLabel","ExternalLinkMark","FlagText","ExternalLinkFlag","CardComponentProps","linkLabel","overline","imgSrc","imgAlt","parentTo","tagLabels","onCardClickCapture","onLinkClick","CardComponent","HorizontalCard","CardImage","CardContent","Props","renderPillVariation","PillProps","InteractiveLink","Wrapper","ElementInteractiveFwd","setStateOver","setStateActive","setStateFocus","ComponentType","SearchHighlight","mark","TextHighlightProps","highlightEl","IntrinsicElements","disabled","El","regex","RegExp","highlighted","workingIdx","lastIndex","SourcesUl","SourcesListProps","onSourceClick","rootPath","Source","CollecticonProgressTickHigh","CollecticonProgressTickLow","CollecticonProgressTickMedium","CollecticonFlask","CollecticonMedal","DATA_UNCERTAINTY","High","Medium","Low","DATA_GRADE","Research","DatasetClassificationWrapper","grade","uncertainty","IconUncertainty","IconGrade","createCollecticon","startOfMonth","EnhancedDatasetLayer","StacDatasetData","TimelineDataset","TimelineDatasetStatus","DataMetric","DATA_METRICS","DEFAULT_DATA_METRICS","veda_datasets","findParentDataset","findDatasetAttribute","attr","allDatasets","allExploreDatasets","disableExplore","enhanceDatasetLayers","allExploreDatasetsWithEnhancedLayers","datasetLayers","flatMap","getInitialMetrics","metricsIds","analysis","metrics","foundMetrics","metric","reconcileDatasets","datasetsList","reconciledDatasets","alreadyReconciled","IDLE","settings","isVisible","opacity","analysisMetrics","meta","YEAR","MONTH","DAY","getTimeDensityStartDate","ExtendedError","code","details","LOADING","SUCCESS","ERROR","AnalysisTimeseriesEntry","mean","sum","std","median","majority","minority","histogram","valid_percent","masked_pixels","valid_pixels","percentile_2","percentile_98","AnalysisMeta","loaded","total","TimelineDatasetAnalysisIdle","TimelineDatasetAnalysisLoading","TimelineDatasetAnalysisError","TimelineDatasetAnalysisSuccess","TimelineDatasetAnalysis","ParentDatset","TimelineDatasetData","TimelineDatasetSettings","TimelineDatasetMeta","TimelineDatasetIdle","TimelineDatasetLoading","TimelineDatasetError","TimelineDatasetSuccess","TimelineDatasetForUrl","DateRange","ZoomTransformPlain","chartLabel","themeColor","MetricList","MetricSwitch","metricThemeColor","AnalysisMetricsProps","activeMetrics","onMetricsChange","AnalysisMetrics","handleMetricChange","shouldAdd"],"version":3,"file":"module.js.map"}